webpackJsonp([58],{qtG1:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("INCx"),i=s.n(a),o=s("bOdI"),n=s.n(o),l=(s("wtEF"),s("mtWM")),r=s.n(l),c=s("mw3O"),d=s.n(c),u={name:"name",data:function(){var t;return t={datalist:[],defaultProps:{label:"name",children:"next"},defaultkeys:[1],updateData:null,list:null,listLoading:!0,selectData:[],options:[],itemData:[{id:10,amountOfMoney:null,commitTime:null,brand:null,discount:null,discountAfter:null,discountAmount:null,tbGoods:{goodsName:"",describe:""},num:null,price:null,taxAfter:null,taxAmount:null,taxRate:null,unit:null,edit:!1},{id:11,amountOfMoney:null,commitTime:null,brand:null,discount:null,discountAfter:null,discountAmount:null,tbGoods:{goodsName:"",describe:""},num:null,price:null,taxAfter:null,taxAmount:null,taxRate:null,unit:null,edit:!1}],itemList:[],tableData:[],scopeIndex:null,myform:{id:null,customerpoolId:null,contactId:null,orderTime:null,settlement:null,deliveryMode:null,deliveryAddress:null,private_employee:null,ascriptionId:null,ascription:null,deptname:null,parentname:null,remarks:null},rules:{customerpoolId:[{required:!0,message:"公司名称不能为空",trigger:"blur"}],orderTime:[{required:!0,message:"订单时间不能为空",trigger:"blur"}],settlement:[{required:!0,message:"结算方式不能为空",trigger:"blur"}]},deliveryMethod:[],customerList:[],contactsList:[],brandList:[],settlementMethod:[{id:101,name:"一次性付款"},{id:102,name:"分次付款"},{id:103,name:"月结付款"}],customerId:null,cusdiscount:null,custaxRate:null,isDisable:!1,goodsName:"",dialogVisible:!1,classification_id:null,idArr:[],multipleSelection:null,OKdisabled:!0,thisshow:!1,retracts:!1,hasCheck:null,recordId:null,examineLog:[],examineList:[],dialogVisible2:!1,exaform:{status:null,remarks:null}},n()(t,"rules",{remarks:[{required:!0,message:"审核意见不能为空",trigger:"blur"}]}),n()(t,"auditing",this.$store.state.systemHttp+"/upload/staticImg/inaudit.png"),n()(t,"audited",this.$store.state.systemHttp+"/upload/staticImg/examine.png"),n()(t,"noaudit",this.$store.state.systemHttp+"/upload/staticImg/refuse.png"),n()(t,"filterList",null),n()(t,"checklist",null),t},mounted:function(){this.loadData(),this.getList(),this.loadOther(),this.reloadData()},methods:{loadData:function(){var t=this,e=this.$store.state.orderupdateData,a=s("1nuA"),i={};i.id=e.setForm.id,r()({method:"post",url:t.$store.state.defaultHttp+"order/selectById.do?cId="+t.$store.state.iscId,data:a.stringify(i)}).then(function(e){t.myform=e.data,t.updateData=e.data.orderDetails,t.customerId=e.data.customerpoolId,t.cusdiscount=e.data.orderDetails[0].discount,t.custaxRate=e.data.orderDetails[0].taxRate,t.recordId=e.data.examineRecordId,t.$options.methods.loadContact.bind(t)(),t.$options.methods.getItem.bind(t)(),t.$options.methods.loadExamine.bind(t)()}).catch(function(t){})},reloadData:function(){var t=this,e=s("1nuA"),a={type:"销售订单详情"},i={type:"销售订单详情",state:1};r()({method:"post",url:t.$store.state.defaultHttp+"userPageInfo/getAllUserPage.do?cId="+t.$store.state.iscId+"&pId="+t.$store.state.ispId,data:e.stringify(a)}).then(function(e){t.filterList=e.data}).catch(function(t){}),r()({method:"post",url:t.$store.state.defaultHttp+"userPageInfo/getUserPage.do?cId="+t.$store.state.iscId+"&pId="+t.$store.state.ispId,data:e.stringify(i)}).then(function(e){t.checklist=e.data}).catch(function(t){})},getList:function(){var t=this,e=s("1nuA"),a={page:1,limit:1e6};this.listLoading=!0,r()({method:"post",url:t.$store.state.defaultHttp+"goods/search.do?cId="+t.$store.state.iscId,data:e.stringify(a)}).then(function(e){var s=e.data.map.goods;t.list=s.map(function(e){return t.$set(e,"edit",!1),e}),s.forEach(function(t){for(var e in t.aaa=JSON.parse(t.spec),t.goodspec=[],t.aaa)"null"!==e&&"undefined"!==e&&t.goodspec.push({label:e,value:t.aaa[e]})}),t.$options.methods.getSelect.bind(t)(),t.listLoading=!1}).catch(function(t){})},getData:function(){var t=this,e=s("1nuA"),a={page:1,limit:1e6};a.classification_id=this.classification_id,a.searchName=this.goodsName,r()({method:"post",url:t.$store.state.defaultHttp+"goods/search.do?cId="+t.$store.state.iscId,data:e.stringify(a)}).then(function(e){var s=e.data.map.goods;s.map(function(e){return t.$set(e,"edit",!1),e}),s.forEach(function(t){for(var e in t.aaa=JSON.parse(t.spec),t.goodspec=[],t.aaa)"null"!==e&&"undefined"!==e&&t.goodspec.push({label:e,value:t.aaa[e]})}),t.tableData=s}).catch(function(t){})},loadOther:function(){var t=this,e=s("1nuA"),a={type:"交货方式"},i={page:1,limit:1e7};r()({method:"post",url:t.$store.state.defaultHttp+"typeInfo/getTypeInfoGroupByType.do?cId="+t.$store.state.iscId,data:e.stringify(a)}).then(function(e){t.deliveryMethod=e.data}).catch(function(t){}),r()({method:"post",url:t.$store.state.defaultHttp+"customerpool/query.do?cId="+t.$store.state.iscId,data:e.stringify(i)}).then(function(e){t.customerList=e.data.map.success}).catch(function(t){}),r()({method:"post",url:t.$store.state.defaultHttp+"brand/selectBrandList.do?cId="+t.$store.state.iscId,data:e.stringify(i)}).then(function(e){t.brandList=e.data.map.brands}).catch(function(t){}),r()({method:"get",url:t.$store.state.defaultHttp+"classification/getClassificationNodeTree.do?cId="+t.$store.state.iscId}).then(function(e){t.datalist=e.data.map.success}).catch(function(t){})},loadContact:function(){var t=this,e=s("1nuA"),a={};a.customerpool_id=this.customerId,r()({method:"post",url:t.$store.state.defaultHttp+"getPoolContactsName.do?cId="+t.$store.state.iscId,data:e.stringify(a)}).then(function(e){t.contactsList=e.data.map.success}).catch(function(t){})},getItem:function(){var t=this;this.itemData=[],0!==this.updateData.length&&this.updateData.forEach(function(e,s){for(var a in e.aaa=JSON.parse(e.spec),e.goodspec=[],e.aaa)"null"!==a&&"undefined"!==a&&e.goodspec.push({label:a,value:e.aaa[a]});t.itemData.push({amountOfMoney:e.amountOfMoney,commitTime:e.commitTime,brand:e.brand,discount:e.discount,discountAfter:e.discountAfter,discountAmount:e.discountAmount,goodsId:e.goodsId,tbGoods:{goodsName:e.goodsName,describe:e.describe},id:e.itemId,itemId:e.itemId,num:e.num,orderId:e.orderId,price:e.price,taxAfter:e.taxAfter,taxAmount:e.taxAmount,taxRate:e.taxRate,goodspec:e.goodspec,unit:e.unit,edit:!1})})},getSelect:function(){var t=this;this.itemData.forEach(function(e,s){t.list.forEach(function(s,a){s.id==e.id&&t.list.splice(a,1)})}),this.selectData=this.list},loadExamine:function(){var t=this,e={checkStatus:this.myform.checkStatus,recordId:this.myform.examineRecordId,pId:this.$store.state.ispId};r()({method:"post",url:t.$store.state.defaultHttp+"examineRecord/queryExamineRecordList.do?cId="+t.$store.state.iscId,data:d.a.stringify(e)}).then(function(e){t.examineList=e.data.steps,t.examineList.forEach(function(e,s){if(e.userLength=e.userList.length,1==e.userLength?e.type_style="width:50px;":2==e.userLength?e.type_style="width:75px;":3==e.userLength?e.type_style="width:100px;":4==e.userLength?e.type_style="width:125px;":5==e.userLength&&(e.type_style="width:150px;"),0==s&&(e.userList[0].img?e.headPortrait=t.$store.state.systemHttp+"/upload/"+t.$store.state.iscId+"/"+e.userList[0].img:e.headPortrait=t.$store.state.systemHttp+"/upload/staticImg/avatar.jpg"),2==e.stepType)for(var a=0;a<e.userList.length;a++){if(e.userList[a].img&&0!==e.userList[a].examineStatus){e.headPortrait=t.$store.state.systemHttp+"/upload/"+t.$store.state.iscId+"/"+e.userList[a].img;break}if(!e.userList[a].img&&0!==e.userList[a].examineStatus){e.headPortrait=t.$store.state.systemHttp+"/upload/staticImg/avatar.jpg";break}if(e.userList[a].img&&0==e.userList[a].examineStatus){e.headPortrait=t.$store.state.systemHttp+"/upload/"+t.$store.state.iscId+"/"+e.userList[a].img;break}if(!e.userList[a].img&&0==e.userList[a].examineStatus){e.headPortrait=t.$store.state.systemHttp+"/upload/staticImg/avatar.jpg";break}}3==e.stepType&&e.userList.forEach(function(e,s){e.img?e.headPortrait=t.$store.state.systemHttp+"/upload/"+t.$store.state.iscId+"/"+e.img:e.headPortrait=t.$store.state.systemHttp+"/upload/staticImg/avatar.jpg"})}),t.hasCheck=e.data.isCheck,t.hasRecheck=e.data.isRecheck}).catch(function(t){}),r()({method:"get",url:t.$store.state.defaultHttp+"examineLog/queryExamineLogList.do?cId="+t.$store.state.iscId+"&recordId="+t.recordId}).then(function(e){t.examineLog=e.data}).catch(function(t){})},selectCustomer:function(t){var e=this;this.customerId=t,this.customerList.forEach(function(s){s.id==t&&(e.myform.ascriptionId=s.privateUser[0].private_id,e.myform.ascription=s.privateUser[0].private_employee,e.myform.deptname=s.deptname,e.myform.parentname=s.parentname),s.discount&&(e.cusdiscount=s.discount),s.taxRate&&(e.custaxRate=s.taxRate)}),this.$options.methods.loadContact.bind(this)()},handleAdd:function(){this.itemData.push({amountOfMoney:null,commitTime:null,brand:null,discount:null,discountAfter:null,discountAmount:null,tbGoods:{goodsName:"",describe:""},num:null,price:null,taxAfter:null,taxAmount:null,taxRate:null,unit:null,edit:!1})},cellClick:function(t,e,s,a){var i=this;t.edit=!1,"操作"!==e.label&&0==this.myform.checkStatus&&(t.edit=!0,this.itemData.forEach(function(e,s){t.id==e.id&&(i.scopeIndex=s)}))},handleDelete:function(t,e){var s=this;this.itemData.forEach(function(e,a){a==t&&s.itemData.splice(a,1)}),this.$options.methods.getList.bind(this)()},confirmEdit:function(t){t.edit=!1,this.$message({message:"本地保存成功",type:"success"})},handleFoces:function(t,e){this.scopeIndex=t},handleFilter:function(t){var e=this;this.selectData=[],this.list.forEach(function(s){-1!=s.tbGoods.goodsName.indexOf(t)&&e.selectData.push(s)})},currentChange:function(t){var e=this;this.itemData.forEach(function(s,a){a==e.scopeIndex&&t&&(t.edit=!0,t.price=t.tbGoods.price,t.discount=e.cusdiscount,t.taxRate=e.custaxRate,t.num=1,e.itemData.splice(a,1,t),e.OKdisabled=!1,e.$options.methods.handleinput(1,a,t))}),this.list.forEach(function(s,a){t&&t.id==s.id&&e.list.splice(a,1)}),this.selectData=this.list},handleinput:function(t,e,s){if(s.num&&s.price){var a=parseInt(s.num)*parseFloat(s.price);s.amountOfMoney=a.toFixed(2)}if(s.amountOfMoney&&s.discount){var i=parseFloat(s.amountOfMoney)*parseFloat(s.discount)/100,o=parseFloat(s.amountOfMoney)-i;s.discountAmount=o.toFixed(2),s.discountAfter=i.toFixed(2)}else s.discountAmount=0,s.discountAfter=0;if(s.amountOfMoney&&s.taxRate)if(s.discountAfter){var n=parseFloat(s.discountAfter)*parseFloat(s.taxRate)/100,l=parseFloat(s.discountAfter)+n;s.taxAmount=n.toFixed(2),s.taxAfter=l.toFixed(2)}else{var r=parseFloat(s.amountOfMoney)*parseFloat(s.taxRate)/100,c=parseFloat(s.amountOfMoney)+r;s.taxAmount=r.toFixed(2),s.taxAfter=c.toFixed(2)}else s.taxAmount=0,s.taxAfter=0},showDialog:function(){this.dialogVisible=!0,this.$options.methods.getData.bind(this)()},handleNodeClick:function(t){this.classification_id=t.id,0==t.next.length&&this.$options.methods.getData.bind(this)()},addInput:function(t){this.goodsName=t,this.$options.methods.getData.bind(this)()},selectInfo:function(t){this.itemList=[],this.multipleSelection=t;var e=t,s=new Array;e.forEach(function(t){0!=t.id&&s.push(t.id)}),this.idArr=s,this.itemList=t},handleSubmit:function(){var t=this,e=[];this.itemData.forEach(function(s,a){s.goodsId&&e.push(s),t.itemList.length&&t.itemList.forEach(function(e,a){e.edit=!0,s.id==e.id&&t.itemList.splice(a,1)})}),this.itemData=e.concat(this.itemList),this.itemData.forEach(function(e,s){t.list.forEach(function(a,i){a.id==e.id&&(e.price=a.tbGoods.price,e.discount=t.cusdiscount,e.taxRate=t.custaxRate,e.num=1,t.list.splice(i,1),t.$options.methods.handleinput(1,s,e))})}),this.selectData=this.list,this.dialogVisible=!1},getSummary:function(t){var e=t.columns,s=t.data,a=[];return e.forEach(function(t,e){if(0!==e){var o=s.map(function(e){return Number(e[t.property])});if("amountOfMoney"==t.property||"discountAmount"==t.property||"discountAfter"==t.property||"taxAmount"==t.property||"taxAfter"==t.property){a[e]=o.reduce(function(t,e){return e+t},0),a[e]=a[e].toFixed(2);var n=i()(a[e]).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"),l=".00",r=a[e].split(".");2===r.length?1===(l=r[1].toString()).length?a[e]=n+"."+l+"0":a[e]=n+"."+l:a[e]=n+l,a[e]+=" 元"}else"num"==t.property?(a[e]=o.reduce(function(t,e){return e+t},0),a[e]):a[e]=""}else a[e]="合计"}),a},retract:function(){this.thisshow=!this.thisshow,this.retracts=!this.retracts},showexamine:function(t){this.exaform.status=t,this.dialogVisible2=!0},toexamine:function(){var t=this,e=s("1nuA"),a={};a.id=this.myform.id,a.recordId=this.recordId,a.pId=this.$store.state.ispId,a.status=this.exaform.status,a.remarks=this.exaform.remarks;var i=!1;a.remarks||(t.$message({message:"审核意见不能为空",type:"error"}),i=!0),i||r()({method:"post",url:t.$store.state.defaultHttp+"examineRecord/auditExamine.do?cId="+t.$store.state.iscId,data:e.stringify(a)}).then(function(e){e.data.code&&"200"==e.data.code?(t.$message({message:"操作成功",type:"success"}),t.dialogVisible2=!1,t.exaform.status=null,t.exaform.remarks=null,t.$options.methods.loadData.bind(t)()):t.$message({message:e.data.msg,type:"error"})}).catch(function(e){t.$message.error("审核失败，请稍后再试")})},onSubmit:function(){var t=this,e=(s("1nuA"),0),a=new Array;this.itemData.forEach(function(t,s){t.goodsId&&(e+=parseFloat(t.taxAfter),a.push({itemId:t.id,num:parseInt(t.num),price:parseFloat(t.price),commitTime:t.commitTime,amountOfMoney:t.amountOfMoney,discount:t.discount,discountAmount:t.discountAmount,discountAfter:t.discountAfter,taxRate:t.taxRate,taxAmount:t.taxAmount,taxAfter:t.taxAfter}))});var i={id:this.myform.id,customerpoolId:this.myform.customerpoolId,contactId:this.myform.contactId,orderTime:this.myform.orderTime,settlement:this.myform.settlement,deliveryMode:this.myform.deliveryMode,deliveryAddress:this.myform.deliveryAddress,pId:parseInt(this.$store.state.ispId),ascriptionId:this.myform.ascriptionId,remarks:this.myform.remarks,totalSum:e,orderDetails:a},o=!1;i.orderDetails.length||(t.$message({message:"产品不能为空",type:"error"}),o=!0),i.settlement||(t.$message({message:"结算方式不能为空",type:"error"}),o=!0),i.orderTime||(t.$message({message:"订单时间不能为空",type:"error"}),o=!0),i.customerpoolId||(t.$message({message:"客户名称不能为空",type:"error"}),o=!0),o||(this.isDisable=!0,r()({method:"post",url:t.$store.state.defaultHttp+"order/update.do?cId="+t.$store.state.iscId,data:i}).then(function(e){e.data.code&&"200"==e.data.code?(t.$message({message:"修改成功",type:"success"}),t.closeTag()):t.$message({message:e.data.msg,type:"error"}),t.isDisable=!1}).catch(function(e){t.isDisable=!1}))},closeTag:function(){var t=this,e=void 0;this.$store.state.tagsList.forEach(function(s,a){s.name==t.$options.name&&(e=a)});var s=this.$store.state.tagsList.splice(e,1)[0];(this.$store.state.tagsList[e]?this.$store.state.tagsList[e]:this.$store.state.tagsList[e-1])?s.path===this.$route.fullPath&&this.$router.push("/order"):this.$router.push("/index")},hangleChange:function(t,e){var a=this,i=s("1nuA"),o={};o.pageInfoId=e.pageInfoId,o.state=1==t?1:0,r()({method:"post",url:a.$store.state.defaultHttp+"userPageInfo/updateUserPageByid.do?cId="+a.$store.state.iscId+"&pId="+a.$store.state.ispId,data:i.stringify(o)}).then(function(t){t.data&&"success"==t.data&&a.$options.methods.reloadData.bind(a)(!0)}).catch(function(t){a.$message.error("提交失败，请重新提交")})}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"orderadd_c"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"bold_span"},[t._v("销售订单"),s("span",{staticClass:"bold_span"},[t._v("："+t._s(t.myform.orderNo))])]),t._v(" "),s("el-button",{staticClass:"info-btn",staticStyle:{float:"right","margin-left":"10px"},attrs:{size:"mini"},on:{click:function(e){t.retract()}}},[t._v("审核")])],1),t._v(" "),s("div",{staticClass:"orderHead"},[s("el-form",{ref:"myform",attrs:{inline:!0,model:t.myform,rules:t.rules}},[s("el-form-item",{staticClass:"first_input",attrs:{prop:"customerpoolId",label:"公司名称","label-width":"90px"}},[s("el-select",{staticClass:"inputbox",attrs:{placeholder:"请选择公司名称",filterable:""},on:{change:t.selectCustomer},model:{value:t.myform.customerpoolId,callback:function(e){t.$set(t.myform,"customerpoolId",e)},expression:"myform.customerpoolId"}},t._l(t.customerList,function(t){return s("el-option",{key:t.id,attrs:{label:t.pName,value:t.id}})}))],1),t._v(" "),s("el-form-item",{staticClass:"first_input",attrs:{label:"联系人","label-width":"90px"}},[s("el-select",{staticClass:"inputbox",attrs:{placeholder:"请选择联系人"},model:{value:t.myform.contactId,callback:function(e){t.$set(t.myform,"contactId",e)},expression:"myform.contactId"}},t._l(t.contactsList,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),s("el-form-item",{staticClass:"first_input",attrs:{prop:"orderTime",label:"订单时间","label-width":"90px"}},[s("el-date-picker",{staticClass:"inputbox",attrs:{type:"date",placeholder:"选择订单时间",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.myform.orderTime,callback:function(e){t.$set(t.myform,"orderTime",e)},expression:"myform.orderTime"}})],1),t._v(" "),s("el-form-item",{staticClass:"first_input",attrs:{prop:"settlement",label:"结算方式","label-width":"90px"}},[s("el-select",{staticClass:"inputbox",attrs:{placeholder:"请选择结算方式"},model:{value:t.myform.settlement,callback:function(e){t.$set(t.myform,"settlement",e)},expression:"myform.settlement"}},t._l(t.settlementMethod,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})}))],1),t._v(" "),s("el-form-item",{staticClass:"first_input",attrs:{label:"交货方式","label-width":"90px"}},[s("el-select",{staticClass:"inputbox",attrs:{placeholder:"请选择交货方式"},model:{value:t.myform.deliveryMode,callback:function(e){t.$set(t.myform,"deliveryMode",e)},expression:"myform.deliveryMode"}},t._l(t.deliveryMethod,function(t){return s("el-option",{key:t.id,attrs:{label:t.typeName,value:t.id}})}))],1),t._v(" "),s("el-form-item",{staticClass:"first_input",attrs:{label:"交货地址","label-width":"90px"}},[s("el-input",{staticClass:"inputbox",model:{value:t.myform.deliveryAddress,callback:function(e){t.$set(t.myform,"deliveryAddress",e)},expression:"myform.deliveryAddress"}})],1),t._v(" "),s("el-form-item",{staticClass:"first_input",attrs:{label:"备注","label-width":"90px"}},[s("el-input",{staticClass:"inputbox",model:{value:t.myform.remarks,callback:function(e){t.$set(t.myform,"remarks",e)},expression:"myform.remarks"}})],1)],1),t._v(" "),1==t.myform.checkStatus?s("div",{staticClass:"orderaudit"},[s("img",{staticClass:"audit_img",attrs:{src:t.auditing,alt:"审核中"}})]):t._e(),t._v(" "),2==t.myform.checkStatus?s("div",{staticClass:"orderaudit"},[s("img",{staticClass:"audit_img",attrs:{src:t.audited,alt:"已审核"}})]):t._e(),t._v(" "),3==t.myform.checkStatus?s("div",{staticClass:"orderaudit"},[s("img",{staticClass:"audit_img",attrs:{src:t.noaudit,alt:"未通过"}})]):t._e()],1)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.thisshow,expression:"thisshow"}],staticClass:"jobclass_line"}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.thisshow,expression:"thisshow"}]},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("el-popover",{attrs:{placement:"right-start",width:"220",trigger:"click"}},[s("div",{staticStyle:{"max-height":"400px","overflow-y":"overlay"}},t._l(t.examineLog,function(e,a){return s("div",{key:a,staticClass:"examine_popover"},[s("span",{staticClass:"examine_ico"},[0==e.examineStatus?s("i",{staticClass:"el-icon-time",staticStyle:{"font-size":"20px"}}):t._e(),t._v(" "),1==e.examineStatus?s("i",{staticClass:"el-icon-circle-check-outline",staticStyle:{color:"#67c23a","font-size":"20px"}}):t._e(),t._v(" "),2==e.examineStatus?s("i",{staticClass:"el-icon-circle-close-outline",staticStyle:{color:"#f56c6c","font-size":"20px"}}):t._e(),t._v(" "),3==e.examineStatus?s("i",{staticClass:"el-icon-time",staticStyle:{color:"#e6a23c","font-size":"20px"}}):t._e(),t._v(" "),5==e.examineStatus?s("i",{staticClass:"el-icon-circle-plus-outline",staticStyle:{color:"#67c23a","font-size":"20px"}}):t._e()]),t._v(" "),s("div",{staticClass:"examint_msg"},[s("p",{staticStyle:{"font-size":"13px",color:"#aaaaaa"}},[t._v(t._s(e.examineTime))]),t._v(" "),1==e.examineStatus?s("p",[t._v(t._s(e.realname+" 已审核"))]):t._e(),t._v(" "),2==e.examineStatus?s("p",[t._v(t._s(e.realname+" 已拒绝"))]):t._e(),t._v(" "),s("div",{staticClass:"examint_remark"},[s("p",[t._v(t._s(e.remarks))])])])])})),t._v(" "),s("span",{staticStyle:{"font-size":"14px","text-decoration":"underline"},attrs:{slot:"reference"},slot:"reference"},[t._v("查看审核历史")])]),t._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.hasCheck&&2!==t.myform.checkStatus,expression:"hasCheck && myform.checkStatus !== 2"}],staticClass:"info-btn",staticStyle:{float:"right"},attrs:{size:"mini"},on:{click:function(e){t.showexamine(1)}}},[t._v("通过")]),t._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.hasCheck&&2!==t.myform.checkStatus,expression:"hasCheck && myform.checkStatus !== 2"}],staticClass:"info-btn",staticStyle:{float:"right"},attrs:{size:"mini"},on:{click:function(e){t.showexamine(2)}}},[t._v("拒绝")]),t._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.hasCheck,expression:"hasCheck"}],staticClass:"info-btn",staticStyle:{float:"right"},attrs:{size:"mini"},on:{click:function(e){t.showexamine(4)}}},[t._v("驳回")])],1),t._v(" "),s("div",{staticClass:"text item"},[s("div",{staticClass:"examine_c"},t._l(t.examineList,function(e,a){return s("div",{key:a,staticClass:"examine_item"},[s("el-popover",{staticClass:"examine_cont",attrs:{placement:"bottom",width:"200",trigger:"hover"}},[t._l(e.userList,function(e,a){return s("div",{key:a,staticClass:"examine_popover"},[s("span",{staticClass:"examine_ico"},[0==e.examineStatus?s("i",{staticClass:"el-icon-time",staticStyle:{"font-size":"20px"}}):t._e(),t._v(" "),1==e.examineStatus?s("i",{staticClass:"el-icon-success",staticStyle:{color:"#67c23a","font-size":"18px"}}):t._e(),t._v(" "),2==e.examineStatus?s("i",{staticClass:"el-icon-circle-close",staticStyle:{color:"#f56c6c","font-size":"20px"}}):t._e(),t._v(" "),3==e.examineStatus?s("i",{staticClass:"el-icon-time",staticStyle:{color:"#e6a23c","font-size":"20px"}}):t._e(),t._v(" "),5==e.examineStatus?s("i",{staticClass:"el-icon-circle-plus",staticStyle:{color:"#67c23a","font-size":"20px"}}):t._e()]),t._v(" "),s("div",{staticClass:"examint_msg"},[s("p",{staticStyle:{"font-size":"13px",color:"#aaaaaa"}},[t._v(t._s(e.examineTime))]),t._v(" "),s("p",[t._v(t._s(e.realname+"("+e.phone+")"))]),t._v(" "),0==e.examineStatus?s("p",[t._v("未审核此申请")]):t._e(),t._v(" "),1==e.examineStatus?s("p",[t._v("通过此申请")]):t._e(),t._v(" "),2==e.examineStatus?s("p",[t._v("拒绝此申请")]):t._e(),t._v(" "),5==e.examineStatus?s("p",[t._v("创建此申请")]):t._e()])])}),t._v(" "),s("div",{staticStyle:{width:"100%"},attrs:{slot:"reference"},slot:"reference"},[5==e.examineStatus||4==e.examineStatus?s("span",{staticClass:"examine_po"},[s("img",{staticClass:"examine_img",attrs:{src:e.headPortrait,width:"50",height:"50"}})]):t._e(),t._v(" "),2==e.stepType?s("span",{staticClass:"examine_po1"},[s("img",{staticClass:"examine_img",class:{mohu:1!==e.examineStatus},attrs:{src:e.headPortrait,width:"50",height:"50"}})]):t._e(),t._v(" "),3==e.stepType?s("div",{staticStyle:{display:"inline-block",margin:"0 15px"},style:e.type_style},t._l(e.userList,function(t,e){return s("span",{key:e,staticClass:"examine_po2"},[s("img",{staticClass:"examine_img",class:{mohu:0==t.examineStatus},attrs:{src:t.headPortrait,width:"50",height:"50"}})])})):t._e(),t._v(" "),s("br"),t._v(" "),e.examineUserName?s("span",{staticClass:"examine_type"},[t._v(t._s(e.examineUserName))]):t._e(),t._v(" "),2==e.stepType?s("span",{staticClass:"examine_type"},[t._v(t._s(e.userLength+"人或签"))]):t._e(),t._v(" "),3==e.stepType?s("span",{staticClass:"examine_type"},[t._v(t._s(e.userLength+"人会签"))]):t._e(),t._v(" "),s("br"),t._v(" "),0==e.examineStatus&&1==a?s("span",{staticClass:"examine_status"},[t._v("一级审核")]):t._e(),t._v(" "),0==e.examineStatus&&2==a?s("span",{staticClass:"examine_status"},[t._v("二级审核")]):t._e(),t._v(" "),0==e.examineStatus&&3==a?s("span",{staticClass:"examine_status"},[t._v("三级审核")]):t._e(),t._v(" "),0==e.examineStatus&&4==a?s("span",{staticClass:"examine_status"},[t._v("四级审核")]):t._e(),t._v(" "),0==e.examineStatus&&5==a?s("span",{staticClass:"examine_status"},[t._v("五级审核")]):t._e(),t._v(" "),0==e.examineStatus&&6==a?s("span",{staticClass:"examine_status"},[t._v("六级审核")]):t._e(),t._v(" "),1==e.examineStatus?s("span",{staticClass:"examine_status"},[s("i",{staticClass:"el-icon-success",staticStyle:{color:"#67c23a","font-size":"15px"}}),t._v(" 已审核")]):t._e(),t._v(" "),2==e.examineStatus?s("span",{staticClass:"examine_status"},[s("i",{staticClass:"el-icon-circle-close",staticStyle:{color:"#f56c6c","font-size":"18px"}}),t._v(" 未通过")]):t._e(),t._v(" "),3==e.examineStatus?s("span",{staticClass:"examine_status"},[s("i",{staticClass:"el-icon-time",staticStyle:{color:"#e6a23c","font-size":"18px"}}),t._v(" 审核中")]):t._e(),t._v(" "),5==e.examineStatus?s("span",{staticClass:"examine_status"},[s("i",{staticClass:"el-icon-circle-plus",staticStyle:{color:"#67c23a","font-size":"18px"}}),t._v(" 发起")]):t._e()])],2),t._v(" "),a!==t.examineList.length-1?s("span",{staticClass:"examine_next"},[s("i",{staticClass:"el-icon-arrow-right"})]):t._e()],1)}))])])],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.thisshow,expression:"!thisshow"}]}),t._v(" "),s("div",{staticClass:"entry"},[0==t.myform.checkStatus?s("el-button",{staticClass:"btn info-btn",attrs:{size:"mini",icon:"el-icon-circle-plus-outline"},on:{click:t.handleAdd}}):t._e(),t._v(" "),s("el-popover",{attrs:{placement:"bottom",width:"100",trigger:"click"}},[s("el-checkbox-group",{staticClass:"checklist",staticStyle:{"max-height":"600px","overflow-y":"overlay","overflow-x":"hidden"},model:{value:t.checklist,callback:function(e){t.checklist=e},expression:"checklist"}},t._l(t.filterList,function(e){return s("el-checkbox",{key:e.id,staticClass:"checkone",attrs:{label:e.name,value:e.state},on:{change:function(s){t.hangleChange(s,e)}}})})),t._v(" "),s("el-button",{staticClass:"info-btn screen",attrs:{slot:"reference",icon:"el-icon-more",type:"mini"},slot:"reference"})],1)],1),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.itemData,border:"",fit:"","highlight-current-row":"","show-summary":"","summary-method":t.getSummary},on:{"cell-click":t.cellClick}},[s("el-table-column",{attrs:{"header-align":"center",align:"center",fixed:"",type:"index","min-width":"45"}}),t._v(" "),t._l(t.filterList,function(e,a){return s("div",{key:a},["goodsName"==e.prop&&1==e.state?s("el-table-column",{staticClass:"table_required",attrs:{label:"产品名称",prop:"tbGoods.goodsName",width:"280px",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[s("el-select",{attrs:{placeholder:"请选择",filterable:"","filter-method":t.handleFilter},on:{focus:function(s){t.handleFoces(e.$index,e.row)}},model:{value:e.row.tbGoods.goodsName,callback:function(s){t.$set(e.row.tbGoods,"goodsName",s)},expression:"scope.row.tbGoods.goodsName"}},[s("el-option",{staticClass:"droplist",attrs:{value:e.row.tbGoods.goodsName}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.selectData,border:"",fit:""},on:{"current-change":t.currentChange}},[s("el-table-column",{attrs:{"header-align":"center",align:"center",type:"index","min-width":"45"}}),t._v(" "),s("el-table-column",{attrs:{prop:"tbGoods.goodsName",label:"产品名称",width:"130"}}),t._v(" "),s("el-table-column",{attrs:{prop:"tbGoods.describe","show-overflow-tooltip":"",label:"描述",width:"150"}}),t._v(" "),s("el-table-column",{attrs:{prop:"goodspec",label:"规格属性","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.goodspec,function(e,a){return s("span",{key:a},[t._v(t._s(e.label+"："+e.value))])})}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"unit",label:"单位",width:"90"}})],1)],1)],1),t._v(" "),s("el-button",{staticClass:"btn info-btn",staticStyle:{width:"30px",height:"28px",padding:"0"},attrs:{size:"mini",icon:"el-icon-more"},on:{click:function(e){t.showDialog()}}})]:s("span",[t._v(t._s(e.row.tbGoods.goodsName))])]}}])}):t._e(),t._v(" "),"describe"==e.prop&&1==e.state?s("el-table-column",{attrs:{label:"描述",prop:"tbGoods.describe",width:"120"}}):t._e(),t._v(" "),"spec"==e.prop&&1==e.state?s("el-table-column",{attrs:{label:"规格属性",prop:"goodspec","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.goodspec,function(e,a){return s("span",{key:a},[t._v(t._s("/"+e.value))])})}}])}):t._e(),t._v(" "),"unit"==e.prop&&1==e.state?s("el-table-column",{attrs:{label:"单位",prop:"unit",width:"50"}}):t._e(),t._v(" "),"num"==e.prop&&1==e.state?s("el-table-column",{attrs:{label:"数量",prop:"num","min-width":"120","class-name":"table_required"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[s("el-input",{staticClass:"edit-input",attrs:{size:"small"},on:{input:function(s){t.handleinput(s,e.$index,e.row)}},model:{value:e.row.num,callback:function(s){t.$set(e.row,"num",s)},expression:"scope.row.num"}})]:s("span",[t._v(t._s(e.row.num))])]}}])}):t._e(),t._v(" "),"price"==e.prop&&1==e.state?s("el-table-column",{attrs:{label:"单价",prop:"price","min-width":"120","class-name":"table_required"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[s("el-input",{staticClass:"edit-input",attrs:{size:"small"},on:{input:function(s){t.handleinput(s,e.$index,e.row)}},model:{value:e.row.price,callback:function(s){t.$set(e.row,"price",s)},expression:"scope.row.price"}})]:s("span",[t._v(t._s(e.row.price))])]}}])}):t._e(),t._v(" "),"amountOfMoney"==e.prop&&1==e.state?s("el-table-column",{attrs:{label:"金额",prop:"amountOfMoney","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[s("el-input",{staticClass:"edit-input",attrs:{size:"small"},on:{input:function(s){t.handleinput(s,e.$index,e.row)}},model:{value:e.row.amountOfMoney,callback:function(s){t.$set(e.row,"amountOfMoney",s)},expression:"scope.row.amountOfMoney"}})]:s("span",[t._v(t._s(e.row.amountOfMoney))])]}}])}):t._e(),t._v(" "),"discount"==e.prop&&1==e.state?s("el-table-column",{attrs:{label:"折扣",prop:"discount",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[s("el-input",{staticClass:"edit-input",attrs:{size:"small"},on:{input:function(s){t.handleinput(s,e.$index,e.row)}},model:{value:e.row.discount,callback:function(s){t.$set(e.row,"discount",s)},expression:"scope.row.discount"}},[s("span",{staticStyle:{"margin-right":"5px","line-height":"34px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v("%")])])]:e.row.discount?s("span",[t._v(t._s(e.row.discount+" %"))]):t._e()]}}])}):t._e(),t._v(" "),"discountAmount"==e.prop&&1==e.state?s("el-table-column",{attrs:{label:"折扣额",prop:"discountAmount","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[s("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:e.row.discountAmount,callback:function(s){t.$set(e.row,"discountAmount",s)},expression:"scope.row.discountAmount"}})]:s("span",[t._v(t._s(e.row.discountAmount))])]}}])}):t._e(),t._v(" "),"discountAfter"==e.prop&&1==e.state?s("el-table-column",{attrs:{label:"折后金额",prop:"discountAfter","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[s("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:e.row.discountAfter,callback:function(s){t.$set(e.row,"discountAfter",s)},expression:"scope.row.discountAfter"}})]:s("span",[t._v(t._s(e.row.discountAfter))])]}}])}):t._e(),t._v(" "),"taxRate"==e.prop&&1==e.state?s("el-table-column",{attrs:{label:"税率",prop:"taxRate",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[s("el-input",{staticClass:"edit-input",attrs:{size:"small"},on:{input:function(s){t.handleinput(s,e.$index,e.row)}},model:{value:e.row.taxRate,callback:function(s){t.$set(e.row,"taxRate",s)},expression:"scope.row.taxRate"}},[s("span",{staticStyle:{"margin-right":"5px","line-height":"34px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v("%")])])]:e.row.taxRate?s("span",[t._v(t._s(e.row.taxRate+" %"))]):t._e()]}}])}):t._e(),t._v(" "),"taxAmount"==e.prop&&1==e.state?s("el-table-column",{attrs:{label:"税额",prop:"taxAmount","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[s("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:e.row.taxAmount,callback:function(s){t.$set(e.row,"taxAmount",s)},expression:"scope.row.taxAmount"}})]:s("span",[t._v(t._s(e.row.taxAmount))])]}}])}):t._e(),t._v(" "),"taxAfter"==e.prop&&1==e.state?s("el-table-column",{attrs:{label:"税后金额",prop:"taxAfter","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[s("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:e.row.taxAfter,callback:function(s){t.$set(e.row,"taxAfter",s)},expression:"scope.row.taxAfter"}})]:s("span",[t._v(t._s(e.row.taxAfter))])]}}])}):t._e(),t._v(" "),"commitTime"==e.prop&&1==e.state?s("el-table-column",{attrs:{label:"交货日期",prop:"commitTime",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[s("el-date-picker",{staticClass:"table_date",attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",size:"small"},model:{value:e.row.commitTime,callback:function(s){t.$set(e.row,"commitTime",s)},expression:"scope.row.commitTime"}})]:s("span",[t._v(t._s(e.row.commitTime))])]}}])}):t._e(),t._v(" "),"brand"==e.prop&&1==e.state?s("el-table-column",{attrs:{label:"产品品牌",prop:"brand",width:"80"}}):t._e()],1)}),t._v(" "),0==t.myform.checkStatus?s("el-table-column",{attrs:{align:"center",label:"操作",width:"90",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{staticStyle:{width:"30px",height:"30px",padding:"0"},attrs:{type:"success",plain:"",disabled:!e.row.edit,icon:"el-icon-circle-check-outline"},on:{click:function(s){t.confirmEdit(e.row)}}}),t._v(" "),s("el-button",{staticStyle:{width:"30px",height:"30px",padding:"0"},attrs:{type:"danger",plain:"",icon:"el-icon-delete"},on:{click:function(s){t.handleDelete(e.$index,e.row)}}})]}}])}):t._e()],2),t._v(" "),s("el-form",{ref:"myform",staticClass:"disabledForm",attrs:{inline:!0,model:t.myform}},[s("el-form-item",{attrs:{label:"制单人","label-width":"90px"}},[s("el-input",{attrs:{disabled:!0},model:{value:t.myform.private_employee,callback:function(e){t.$set(t.myform,"private_employee",e)},expression:"myform.private_employee"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"负责人","label-width":"90px"}},[s("el-input",{attrs:{disabled:!0},model:{value:t.myform.ascription,callback:function(e){t.$set(t.myform,"ascription",e)},expression:"myform.ascription"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"部门","label-width":"90px"}},[s("el-input",{attrs:{disabled:!0},model:{value:t.myform.deptname,callback:function(e){t.$set(t.myform,"deptname",e)},expression:"myform.deptname"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"机构","label-width":"90px"}},[s("el-input",{attrs:{disabled:!0},model:{value:t.myform.parentname,callback:function(e){t.$set(t.myform,"parentname",e)},expression:"myform.parentname"}})],1)],1),t._v(" "),s("div",{staticClass:"submit_btn"},[s("el-button",{staticStyle:{"margin-right":"100px"},attrs:{type:"primary",disabled:t.isDisable},on:{click:t.onSubmit}},[t._v("立即提交")]),t._v(" "),s("el-button",{on:{click:t.closeTag}},[t._v("取消")])],1),t._v(" "),s("el-dialog",{staticClass:"orderDialog",attrs:{title:"选择产品",visible:t.dialogVisible,"close-on-click-modal":!1,width:"80%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("div",{staticClass:"otherleftcontent"},[s("el-tree",{attrs:{"node-key":"id","highlight-current":"",accordion:"","expand-on-click-node":"",data:t.datalist,props:t.defaultProps,"default-expanded-keys":t.defaultkeys},on:{"node-click":t.handleNodeClick}})],1),t._v(" "),s("div",{staticClass:"otherightcontent"},[s("span",[t._v("产品名称：")]),s("el-input",{staticStyle:{width:"200px"},on:{input:t.addInput},model:{value:t.goodsName,callback:function(e){t.goodsName=e},expression:"goodsName"}}),t._v(" "),s("br"),s("br"),t._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",fit:""},on:{"selection-change":t.selectInfo}},[s("el-table-column",{attrs:{"header-align":"center",align:"center",type:"selection","min-width":"45"},on:{"selection-change":t.selectInfo}}),t._v(" "),s("el-table-column",{attrs:{prop:"tbGoods.goodsName",label:"产品名称",width:"130"}}),t._v(" "),s("el-table-column",{attrs:{prop:"tbGoods.describe","show-overflow-tooltip":"",label:"描述",width:"150"}}),t._v(" "),s("el-table-column",{attrs:{prop:"goodspec",label:"规格属性","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.goodspec,function(e,a){return s("span",{key:a},[t._v(t._s(e.label+"："+e.value))])})}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"unit",label:"单位",width:"90"}}),t._v(" "),s("el-table-column",{attrs:{prop:"brand",label:"品牌",width:"90"}})],1)],1),t._v(" "),s("span",{staticClass:"dialog-footer order_foot",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.handleSubmit()}}},[t._v("确 定")])],1)]),t._v(" "),s("el-dialog",{attrs:{title:"审核意见","close-on-click-modal":!1,visible:t.dialogVisible2,width:"40%"},on:{"update:visible":function(e){t.dialogVisible2=e}}},[s("el-form",{ref:"exaform",attrs:{model:t.exaform,rules:t.rules}},[s("el-form-item",{attrs:{prop:"remarks"}},[s("el-input",{attrs:{type:"textarea",rows:"5",placeholder:"请输入审核意见（必填）"},model:{value:t.exaform.remarks,callback:function(e){t.$set(t.exaform,"remarks",e)},expression:"exaform.remarks"}})],1)],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogVisible2=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.toexamine()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var p=s("VU/8")(u,m,!1,function(t){s("tV6j")},null,null);e.default=p.exports},tV6j:function(t,e){}});