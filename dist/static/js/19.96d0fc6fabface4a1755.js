webpackJsonp([19],{"2l5V":function(e,t){},lCyt:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("woOf"),o=a.n(s),i=a("wtEF"),r=a("mtWM"),l=a.n(r),n=(a("mw3O"),{name:"customerPool",props:{totalNum:Number},store:i.a,computed:{tableData:function(){return i.a.state.customerPoolList},tableNumber:function(){return i.a.state.customerPoolListnumber}},data:function(){return{searchList:{searchName:null,label:"1",page:null,limit:null,time:null},searchListNew:{searchName:null,label:"1",page:null,limit:null,time:null},page:1,limit:20,idArr:{id:null},pIdData:[{label:"0",value:"全部"},{label:"1",value:"我的"},{label:"2",value:"本组"},{label:"3",value:"本机构"}],timeData:[{id:"1",typeName:"今天"},{id:"2",typeName:"昨天"},{id:"3",typeName:"本周"},{id:"4",typeName:"本月"},{id:"5",typeName:"上月"}],nullvalue:null,useroptions:null,userData:{pId:null},filterList:null,checklist:null,dialogFormVisible:!1,dialogFormVisible1:!1,formLabelWidth:"130px",visible2:!1}},activated:function(){this.reloadTable()},mounted:function(){this.reloadTable(),this.reloadData()},beforeCreate:function(){var e=this;a("1nuA");l()({method:"get",url:e.$store.state.defaultHttp+"customerTwo/getNameAndId.do?cId="+e.$store.state.iscId}).then(function(t){e.useroptions=t.data.map.success}).catch(function(e){})},methods:{reloadTable:function(){var e=this,t=a("1nuA"),s={};s.searchName=this.searchList.searchName,0==this.searchList.label?s.pId=e.nullvalue:1==this.searchList.label?s.pId=e.$store.state.ispId:2==this.searchList.label?s.secondid=e.$store.state.deptid:3==this.searchList.label&&(s.deptid=e.$store.state.insid),s.example=this.searchList.time,s.page=this.page,s.limit=this.limit,l()({method:"post",url:e.$store.state.defaultHttp+"customerpool/querypool.do?cId="+e.$store.state.iscId,data:t.stringify(s)}).then(function(t){e.$store.state.customerPoolList=t.data.map.success,e.$store.state.customerPoolListnumber=t.data.count}).catch(function(e){})},reloadData:function(){var e=this,t=a("1nuA"),s={type:"客户池"},o={type:"客户池",state:1};l()({method:"post",url:e.$store.state.defaultHttp+"userPageInfo/getAllUserPage.do?cId="+e.$store.state.iscId+"&pId="+e.$store.state.ispId,data:t.stringify(s)}).then(function(t){e.filterList=t.data}).catch(function(e){}),l()({method:"post",url:e.$store.state.defaultHttp+"userPageInfo/getUserPage.do?cId="+e.$store.state.iscId+"&pId="+e.$store.state.ispId,data:t.stringify(o)}).then(function(t){e.checklist=t.data}).catch(function(e){})},selectInfo:function(e){this.multipleSelection=e;var t=e,a=[new Array];t.forEach(function(e){0!=e.id&&a.push(e.id)}),this.idArr.id=a},handleDeletes:function(){var e=this,t=this,s=a("1nuA"),o=[];o.id=this.idArr.id,o.id?t.$confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){e.value;l()({method:"post",url:t.$store.state.defaultHttp+"customerpool/delete.do?cId="+t.$store.state.iscId,data:s.stringify(o)}).then(function(e){e.data.success&&1==e.data.success?(t.$message({message:"删除成功",type:"success"}),t.$options.methods.reloadTable.bind(t)(!0)):e.data.msg&&"error"==e.data.msg?t.$message({message:"对不起，您没有该权限，请联系管理员开通",type:"error"}):t.$message({message:e.data.msg,type:"error"})}).catch(function(e){t.$message.error("删除失败,请重新删除")})}).catch(function(){e.$message({type:"info",message:"取消删除"})}):t.$message({type:"error",message:"请先选择要删除的客户"})},handleDelete:function(e,t){var s=this,o=this,i=a("1nuA"),r=[];r.id=t.id,o.$confirm("是否确认删除["+t.name+"]？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){e.value;l()({method:"post",url:o.$store.state.defaultHttp+"customerpool/delete.do?cId="+o.$store.state.iscId,data:i.stringify(r)}).then(function(e){e.data.success&&1==e.data.success?(o.$message({message:"删除成功",type:"success"}),o.$options.methods.reloadTable.bind(o)(!0)):e.data.msg&&"error"==e.data.msg?o.$message({message:"对不起，您没有该权限，请联系管理员开通",type:"error"}):o.$message({message:e.data.msg,type:"error"})}).catch(function(e){o.$message.error("删除失败,请重新删除")})}).catch(function(){s.$message({type:"info",message:"取消删除【"+t.name+"】"})})},handleReceives:function(){var e=this,t=a("1nuA"),s=[];s.ids=this.idArr.id,s.pId=e.$store.state.ispId,s.secondid=e.$store.state.deptid,s.deptid=e.$store.state.insid,s.ids?e.$confirm("是否确定领取？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(a){a.value;l()({method:"get",url:e.$store.state.defaultHttp+"customerPoolJurisdiction/receive.do"}).then(function(a){a.data.msg&&"error"==a.data.msg?e.$message({message:"对不起，您没有该权限，请联系管理员开通",type:"error"}):l()({method:"post",url:e.$store.state.defaultHttp+"customerpool/receivepool.do?cId="+e.$store.state.iscId,data:t.stringify(s)}).then(function(t){t.data.code&&200==t.data.code?(e.$message({message:"领取成功",type:"success"}),e.$options.methods.reloadTable.bind(e)(!0)):e.$message({message:t.data.msg,type:"error"})}).catch(function(t){e.$message.error("领取失败,请重新领取")})}).catch(function(e){})}).catch(function(){e.$message({type:"info",message:"取消领取"})}):e.$message({type:"error",message:"请先选择要领取的客户"})},handleReceive:function(e,t){var s=this,o=a("1nuA"),i=[];i.ids=t.id,i.secondid=s.$store.state.deptid,i.deptid=s.$store.state.insid,l()({method:"get",url:s.$store.state.defaultHttp+"customerPoolJurisdiction/receive.do"}).then(function(e){e.data.msg&&"error"==e.data.msg?s.$message({message:"对不起，您没有该权限，请联系管理员开通",type:"error"}):l()({method:"post",url:s.$store.state.defaultHttp+"customerpool/receivepool.do?cId="+s.$store.state.iscId+"&pId="+s.$store.state.ispId,data:o.stringify(i)}).then(function(e){e.data.code&&200==e.data.code?(s.$message({message:"领取成功",type:"success"}),s.$options.methods.reloadTable.bind(s)(!0)):s.$message({message:e.data.msg,type:"error"})}).catch(function(e){s.$message.error("领取失败,请重新领取")})}).catch(function(e){})},handleDistribution:function(){var e=this,t=a("1nuA"),s=[];s.ids=this.idArr.id,s.pId=this.userData.pId,s.secondid="",s.deptid="",s.ids?l()({method:"get",url:e.$store.state.defaultHttp+"customerPoolJurisdiction/distribution.do"}).then(function(a){a.data.msg&&"error"==a.data.msg?e.$message({message:"对不起，您没有该权限，请联系管理员开通",type:"error"}):l()({method:"post",url:e.$store.state.defaultHttp+"customerpool/receivepool.do?cId="+e.$store.state.iscId,data:t.stringify(s)}).then(function(t){t.data.code&&200==t.data.code?(e.$message({message:"分配成功",type:"success"}),e.visible2=!1,e.$options.methods.reloadTable.bind(e)(!0)):e.$message({message:t.data.msg,type:"error"})}).catch(function(t){e.$message.error("分配失败,请重新分配")})}).catch(function(e){}):e.$message({type:"error",message:"请先选择要分配的客户"})},hangleChange:function(e,t){var s=this,o=a("1nuA"),i={};i.pageInfoId=t.pageInfoId,i.state=1==e?1:0,l()({method:"post",url:s.$store.state.defaultHttp+"userPageInfo/updateUserPageByid.do?cId="+s.$store.state.iscId+"&pId="+s.$store.state.ispId,data:o.stringify(i)}).then(function(e){e.data&&"success"==e.data&&s.$options.methods.reloadData.bind(s)(!0)}).catch(function(e){})},search:function(){var e=this,t="",a=1;0==this.searchList.label?(t="customerPoolJurisdiction/all.do",a=0):2==this.searchList.label?(t="customerPoolJurisdiction/second.do",a=0):3==this.searchList.label&&(t="customerPoolJurisdiction/dept.do",a=0),0==a?l()({method:"get",url:e.$store.state.defaultHttp+t}).then(function(t){t.data.msg&&"error"==t.data.msg?e.$message({message:"对不起，您没有该权限，请联系管理员开通",type:"error"}):e.$options.methods.reloadTable.bind(e)(!0)}).catch(function(e){}):e.$options.methods.reloadTable.bind(e)(!0)},reset:function(){this.searchList=o()({},this.searchListNew),this.$options.methods.reloadTable.bind(this)(!0)},handleSizeChange:function(e){this.limit=e,this.$options.methods.reloadTable.bind(this)(!1)},handleCurrentChange:function(e){this.page=e,this.$options.methods.reloadTable.bind(this)(!1)}}}),c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"radioList"},[a("el-radio-group",{model:{value:e.searchList.label,callback:function(t){e.$set(e.searchList,"label",t)},expression:"searchList.label"}},[a("span",{staticClass:"nameList"},[e._v("数据授权：")]),e._v(" "),e._l(e.pIdData,function(t){return a("el-radio",{key:t.label,attrs:{label:t.label},on:{change:function(t){e.search()}}},[e._v(e._s(t.value))])})],2),e._v(" "),a("el-radio-group",{model:{value:e.searchList.time,callback:function(t){e.$set(e.searchList,"time",t)},expression:"searchList.time"}},[a("span",{staticClass:"nameList"},[e._v("新增时间：")]),e._v(" "),a("el-radio",{attrs:{label:e.nullvalue},on:{change:function(t){e.search()}}},[e._v("全部")]),e._v(" "),e._l(e.timeData,function(t){return a("el-radio",{key:t.id,attrs:{label:t.id},on:{change:function(t){e.search()}}},[e._v(e._s(t.typeName))])})],2)],1),e._v(" "),a("div",{staticClass:"searchList",staticStyle:{width:"100%"}},[a("span",{staticClass:"nameList"},[e._v("公司名称：")]),e._v(" "),a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入公司名称"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.search(t):null}},model:{value:e.searchList.searchName,callback:function(t){e.$set(e.searchList,"searchName",t)},expression:"searchList.searchName"}}),e._v("\n          \n        "),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"mini"},on:{click:function(t){e.search()}}},[e._v("查询")])],1),e._v(" "),a("div",{staticClass:"entry"},[a("el-button",{staticClass:"info-btn",attrs:{size:"mini"},on:{click:function(t){e.handleDeletes()}}},[e._v("删除")]),e._v(" "),a("el-button",{staticClass:"info-btn",attrs:{size:"mini"},on:{click:function(t){e.handleReceives()}}},[e._v("领取")]),e._v(" "),a("div",{staticClass:"totalnum_head"},[e._v("共 "),a("span",{staticClass:"bold_span"},[e._v(e._s(e.tableNumber))]),e._v(" 条")]),e._v(" "),a("el-popover",{attrs:{placement:"bottom",width:"100",trigger:"click"},model:{value:e.visible2,callback:function(t){e.visible2=t},expression:"visible2"}},[a("el-select",{attrs:{placeholder:"请选择用户"},model:{value:e.userData.pId,callback:function(t){e.$set(e.userData,"pId",t)},expression:"userData.pId"}},e._l(e.useroptions,function(e){return a("el-option",{key:e.private_id,attrs:{label:e.private_employee,value:e.private_id}})})),e._v(" "),a("br"),a("br"),a("br"),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.visible2=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.handleDistribution()}}},[e._v("确定")])],1),e._v(" "),a("el-button",{staticClass:"btn",attrs:{slot:"reference",size:"mini"},slot:"reference"},[e._v("分配")])],1),e._v(" "),a("div",{staticClass:"totalnum_head"},[e._v("共 "),a("span",{staticClass:"bold_span"},[e._v(e._s(e.tableNumber))]),e._v(" 条")]),e._v(" "),a("el-popover",{attrs:{placement:"bottom",width:"100",trigger:"click"}},[a("el-checkbox-group",{staticClass:"checklist",staticStyle:{"max-height":"600px","overflow-y":"overlay","overflow-x":"hidden"},model:{value:e.checklist,callback:function(t){e.checklist=t},expression:"checklist"}},e._l(e.filterList,function(t){return a("el-checkbox",{key:t.id,staticClass:"checkone",attrs:{label:t.name,value:t.state},on:{change:function(a){e.hangleChange(a,t)}}})})),e._v(" "),a("el-button",{staticClass:"info-btn screen",attrs:{slot:"reference",icon:"el-icon-more",size:"mini"},slot:"reference"})],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:""},on:{"selection-change":e.selectInfo}},[a("el-table-column",{attrs:{fixed:"","header-align":"center",align:"center",type:"selection",width:"45","scope.row.id":""},on:{"selection-change":e.selectInfo}}),e._v(" "),a("el-table-column",{attrs:{fixed:"","header-align":"center",align:"center",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.row.haveOpportunity,expression:"scope.row.haveOpportunity !== 0"}],staticClass:"diamood_blue"},[a("i",{staticClass:"mdi mdi-martini"})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.row.haveOpportunity,expression:"scope.row.haveOpportunity == 0"}],staticClass:"diamood_blue_h"},[a("i",{staticClass:"mdi mdi-martini"})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.row.haveContract,expression:"scope.row.haveContract !== 0"}],staticClass:"diamood_red"},[a("i",{staticClass:"mdi mdi-coin"})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.row.haveContract,expression:"scope.row.haveContract == 0"}],staticClass:"diamood_red_h"},[a("i",{staticClass:"mdi mdi-coin"})])]}}])}),e._v(" "),e._l(e.filterList,function(t,s){return a("div",{key:s},["name"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"公司名称",prop:"name",fixed:"","min-width":"200",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(t.row.name)+"\n                ")]}}])}):e._e(),e._v(" "),"address"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"地址",prop:"address","show-overflow-tooltip":"","min-width":"200",sortable:""}}):e._e(),e._v(" "),"contacts[0].coName"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"联系人",prop:"contacts[0].coName","min-width":"110",sortable:""}}):e._e(),e._v(" "),"contacts[0].telephone"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"电话",prop:"contacts[0].telephone",width:"110",sortable:""}}):e._e(),e._v(" "),"contacts[0].phone"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"手机",prop:"contacts[0].phone",width:"110",sortable:""}}):e._e(),e._v(" "),"contacts[0].qq"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"QQ",prop:"contacts[0].qq","min-width":"110",sortable:""}}):e._e(),e._v(" "),"email"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"邮箱",prop:"contacts[0].email","show-overflow-tooltip":"","min-width":"130",sortable:""}}):e._e(),e._v(" "),"wechat"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"微信",prop:"contacts[0].wechat","min-width":"110",sortable:""}}):e._e(),e._v(" "),"sex"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"性别",prop:"contacts[0].sex","min-width":"90",sortable:""}}):e._e(),e._v(" "),"remarks"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"备注",prop:"contacts[0].remark","min-width":"180",sortable:""}}):e._e(),e._v(" "),"follow[0].createTime"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"最新跟进时间",prop:"follow[0].createTime","min-width":"150",sortable:""}}):e._e(),e._v(" "),"follow[0].followContent"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"最新跟进记录",prop:"follow[0].followContent","show-overflow-tooltip":"","min-width":"180",sortable:""}}):e._e(),e._v(" "),"follow[0].contactTime"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"下次联系时间",prop:"follow[0].contactTime","min-width":"150",sortable:""}}):e._e(),e._v(" "),"privateUser[0].private_employee"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"前负责人",prop:"privateUser[0].private_employee","min-width":"110",sortable:""}}):e._e(),e._v(" "),"deptname"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"部门",prop:"deptname","min-width":"110",sortable:""}}):e._e(),e._v(" "),"parentname"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"机构",prop:"parentname","min-width":"110","show-overflow-tooltip":"",sortable:""}}):e._e(),e._v(" "),"countryid"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"省-市-区",prop:"countryid","min-width":"150",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(t.row.country)+"-"+e._s(t.row.city)+"-"+e._s(t.row.area)+"\n                ")]}}])}):e._e(),e._v(" "),"createTime"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"创建时间",prop:"createTime","min-width":"150",sortable:""}}):e._e(),e._v(" "),"status"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"状态",prop:"status","min-width":"90",sortable:""}}):e._e(),e._v(" "),"levels"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"客户分类",prop:"levels","min-width":"110",sortable:""}}):e._e(),e._v(" "),"source"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"客户来源",prop:"source","min-width":"110",sortable:""}}):e._e(),e._v(" "),"representative"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"法人代表",prop:"representative","min-width":"110",sortable:""}}):e._e(),e._v(" "),"registrationAuthority"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"登记机关",prop:"registrationAuthority","show-overflow-tooltip":"","min-width":"110",sortable:""}}):e._e(),e._v(" "),"creditCode"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"社会信用代码",prop:"creditCode","min-width":"150",sortable:""}}):e._e(),e._v(" "),"registrationNumber"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"注册号",prop:"registrationNumber","min-width":"140",sortable:""}}):e._e(),e._v(" "),"organizationCode"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"组织机构代码",prop:"organizationCode","min-width":"140",sortable:""}}):e._e(),e._v(" "),"capital"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"注册资金",prop:"capital","min-width":"110",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(t.row.capital+"万元")+"\n                ")]}}])}):e._e(),e._v(" "),"date"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"成立时间",prop:"date","min-width":"110",sortable:""}}):e._e(),e._v(" "),"enterpriseScale"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"企业规模",prop:"enterpriseScale","min-width":"110",sortable:""}}):e._e(),e._v(" "),"financingState"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"融资状态",prop:"financingState","min-width":"110",sortable:""}}):e._e(),e._v(" "),"industryType"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"行业",prop:"industryType","show-overflow-tooltip":"","min-width":"110",sortable:""}}):e._e(),e._v(" "),"companyType"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"公司类型",prop:"companyType","min-width":"110",sortable:""}}):e._e(),e._v(" "),"operatingState"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"营业状态",prop:"operatingState","min-width":"110",sortable:""}}):e._e()],1)}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"150","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleReceive(t.$index,t.row)}}},[e._v("领取")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],2),e._v(" "),a("div",{staticClass:"block numberPage"},[a("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[20,50,100,500],"page-size":20,layout:"total, sizes, prev, pager, next, jumper",total:e.tableNumber},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var d=a("VU/8")(n,c,!1,function(e){a("2l5V")},null,null);t.default=d.exports}});