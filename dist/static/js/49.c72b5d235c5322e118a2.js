webpackJsonp([49],{IRNA:function(t,e){},xp4l:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("INCx"),o=a.n(s),i=a("wtEF"),l=a("mtWM"),n=a.n(l),r=a("9igS"),c=(a("mw3O"),{name:"customerDetails",store:i.a,computed:{cusConsDetails:function(){return i.a.state.cusConsDetailsList},opportunityDetails:function(){return i.a.state.opportunityDetailsList},agreementDetails:function(){return i.a.state.agreementDetailsList},InvoiceDetails:function(){return i.a.state.InvoiceDetailsList},FielDutyDetails:function(){return i.a.state.FielDutyDetailsList}},filters:{rounding:function(t){if(t){var e=o()(t).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"),a=".00",s=t.toString().split(".");return 2===s.length?1===(a=s[1].toString()).length?e+"."+a+"0":e+"."+a:e+a}}},data:function(){return{detailData:null,pickerOptions:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},SMSform:{templateId:null},templateList:null,followform:{followType:"电话",contactTime:"",contactsId:"",followContent:"",state:""},newform:{},rules:{followContent:[{required:!0,message:"请输入跟进内容",trigger:"blur"}],contactsId:[{required:!0,message:"请选择联系人",trigger:"blur"}],followType:[{required:!0,message:"请选择联系方式",trigger:"blur"}],state:[{required:!0,message:"请选择状态",trigger:"blur"}],name:[{required:!0,message:"联系人名称不能为空",trigger:"blur"}],phone:[{required:!0,message:"手机号码不能为空",trigger:"blur"}],opportunity_name:[{required:!0,message:"商机名称不能为空",trigger:"blur"}],opportunity_achievement:[{required:!0,message:"预计成交金额不能为空",trigger:"blur"}],opportunity_deal:[{required:!0,message:"预计成交时间不能为空",trigger:"blur"}],contacts_id:[{required:!0,message:"客户决策人不能为空",trigger:"blur"}],contract_type:[{required:!0,message:"合同类型不能为空",trigger:"blur"}],contract_name:[{required:!0,message:"合同名称不能为空",trigger:"blur"}],amount:[{required:!0,message:"合同金额不能为空",trigger:"blur"}],start_date:[{required:!0,message:"开始时间不能为空",trigger:"blur"}],end_date:[{required:!0,message:"结束时间不能为空",trigger:"blur"}],signatories:[{required:!0,message:"客户签约人不能为空",trigger:"blur"}]},followTypes:[{label:"电话",value:"1"},{label:"微信",value:"2"},{label:"QQ",value:"3"},{label:"邮箱",value:"4"},{label:"拜访",value:"5"}],stateList:[],searchList:{keyword:null},customerdetail:{},contacts:{},record:[],fastcontactList:null,contactList:[],activeName2:"first",tableData:null,tableNumber:null,page:1,limit:20,thisshow:!0,idArr:{id:null},retracts:!0,priconList:[],contacts_id:null,countryId:null,Provinces:[],businessList:null,showbusiness:!1,showloading:!1,files:null,filesName:null,imgfile:null,imgName:null,fileList:[],imgList:[],dialogVisible2:!1,dialogImageUrl2:null,website:"",EnclosureDetails:[],contactdialog:!1,oppdialog:!1,agreedialog:!1}},beforeRouteLeave:function(t,e,a){r.a.$off("customer"),a()},activated:function(){this.loadData(),this.loadCountry(),this.reload(),this.loadTemplate()},methods:{reload:function(){var t=this;r.a.$on("customer",function(e){e&&(t.$options.methods.loadData.bind(t)(),t.$options.methods.loadCountry.bind(t)())})},loadData:function(){this.detailData=this.$store.state.cusdetailsData.submitData,this.idArr.id=this.$store.state.cusdetailsData.submitData.id;var t=this,e=a("1nuA"),s={};s.page=this.page,s.limit=this.limit;var o={page:1,limit:1e5},i={type:"快捷方式"};n()({method:"post",url:t.$store.state.defaultHttp+"typeInfo/getTypeInfoGroupByType.do?cId="+t.$store.state.iscId,data:e.stringify(i)}).then(function(e){t.fastcontactList=e.data}).catch(function(t){}),n()({method:"post",url:t.$store.state.defaultHttp+"customerpool/getPoolRight.do?cId="+t.$store.state.iscId+"&pId="+t.$store.state.ispId,data:e.stringify(s)}).then(function(e){t.tableData=e.data.map.success,t.tableNumber=e.data.count}).catch(function(t){}),n()({method:"get",url:t.$store.state.defaultHttp+"customerpool/getPoolById.do?cId="+t.$store.state.iscId+"&id="+this.detailData.id}).then(function(e){t.customerdetail=e.data.map.success[0],t.contacts=e.data.map.success[0].contacts[0],t.showbusiness=!1}).catch(function(t){}),n()({method:"get",url:t.$store.state.defaultHttp+"customerpool/getFollowStaffAndpool.do?cId="+t.$store.state.iscId+"&customerpool_id="+t.detailData.id}).then(function(e){t.record=e.data.map.success,t.record[0]?(t.followform.state=t.record[0].state,t.$options.methods.loadState.bind(t)()):t.$options.methods.loadState.bind(t)(),t.record.forEach(function(e){var a=Date.parse(e.createTime),s=(new Date).getTime()-a;s<72e5&&(e.showdelico=!0),s>72e5&&(e.showdelico=!1),e.userImagName&&(e.imgUrl=t.$store.state.systemHttp+"/upload/"+t.$store.state.iscId+"/"+e.userImagName),e.userImagName&&null!=e.userImagName||(e.imgUrl=t.$store.state.systemHttp+"/upload/staticImg/avatar.jpg"),e.imgName&&null!==e.imgName&&(e.picture_detail=t.$store.state.systemHttp+"/upload/"+t.$store.state.iscId+"/"+e.imgName),e.enclosureName&&null!==e.enclosureName&&(e.enclosureUrl=t.$store.state.systemHttp+"/upload/"+t.$store.state.iscId+"/"+e.enclosureName)})}).catch(function(t){}),n()({method:"post",url:t.$store.state.defaultHttp+"customerpool/getPoolNameAndNumber.do?cId="+t.$store.state.iscId+"&customerpool_id="+this.detailData.id,data:e.stringify(o)}).then(function(e){t.$store.state.InvoiceDetailsList=e.data.map.success}).catch(function(t){}),n()({method:"get",url:t.$store.state.defaultHttp+"customerpool/selectWorkPlanAndVisit.do?cId="+t.$store.state.iscId+"&customerpool_id="+this.detailData.id}).then(function(e){t.$store.state.FielDutyDetailsList=e.data.map.workPlanAndVisit}).catch(function(t){}),t.$options.methods.loadContact.bind(t)(),t.$options.methods.loadAgree.bind(t)(),t.$options.methods.loadOpp.bind(t)()},loadContact:function(){var t=this,e=a("1nuA"),s={page:1,limit:1e5};n()({method:"post",url:t.$store.state.defaultHttp+"customerpool/getPoolContacts.do?cId="+t.$store.state.iscId+"&customerpool_id="+this.detailData.id,data:e.stringify(s)}).then(function(e){t.$store.state.cusConsDetailsList=e.data.map.success,t.contactList=e.data.map.success,t.priconList=e.data.map.success,t.followform.contactsId=e.data.map.success[0].id}).catch(function(t){})},loadAgree:function(){var t=this,e=a("1nuA"),s={page:1,limit:1e5};n()({method:"post",url:t.$store.state.defaultHttp+"customerpool/getContractByPool.do?cId="+t.$store.state.iscId+"&customerpool_id="+this.detailData.id,data:e.stringify(s)}).then(function(e){t.$store.state.agreementDetailsList=e.data.map.success}).catch(function(t){})},loadOpp:function(){var t=this,e=a("1nuA"),s={page:1,limit:1e5};n()({method:"post",url:t.$store.state.defaultHttp+"customerpool/queryForPoolList.do?cId="+t.$store.state.iscId+"&customerpool_id="+this.detailData.id,data:e.stringify(s)}).then(function(e){t.$store.state.opportunityDetailsList=e.data.map.success}).catch(function(t){})},loadState:function(){var t=this,e=a("1nuA"),s={type:"客户状态"};n()({method:"post",url:t.$store.state.defaultHttp+"typeInfo/getTypeInfoGroupByType.do?cId="+t.$store.state.iscId+"&pId="+t.$store.state.ispId,data:e.stringify(s)}).then(function(e){t.stateList=e.data,t.stateList.forEach(function(e){t.followform.state&&t.followform.state==e.typeName&&(t.followform.state=e.id)})}).catch(function(t){})},loadTemplate:function(){var t=this,e=a("1nuA"),s={type:"客户",genre:"营销类",status:"2"};n()({method:"post",url:t.$store.state.defaultHttp+"template/selectTemplate.do?cId="+t.$store.state.iscId,data:e.stringify(s)}).then(function(e){t.templateList=e.data.map.templates}).catch(function(t){})},loadCountry:function(){var t=this;a("1nuA");n()({method:"get",url:t.$store.state.defaultHttp+"address/getAddress.do?id="}).then(function(e){t.Provinces=e.data}).catch(function(t){})},choosePri:function(t){var e=this,s=a("1nuA"),o={};o.contacts_id=t,n()({method:"post",url:e.$store.state.defaultHttp+"contacts/updateFirst.do?cId="+e.$store.state.iscId+"&customerpool_id="+this.detailData.id,data:s.stringify(o)}).then(function(t){t.data.msg&&"success"==t.data.msg?e.$options.methods.loadData.bind(e)():e.$message({message:"可能出了点什么问题，再看看",type:"error"})}).catch(function(t){})},showImg:function(t,e){this.dialogImageUrl2=_this.$store.state.systemHttp+"/upload/"+this.$store.state.iscId+"/"+e.imgName,this.dialogVisible2=!0},retract:function(){this.thisshow=!this.thisshow,this.retracts=!this.retracts},getRow:function(t,e){this.$store.state.cusdetailsData.submitData={id:e.id},this.idArr.id=e.id,this.countryId=null,this.$options.methods.loadData.bind(this)(!0)},TocustomerPool:function(){var t=this,e=a("1nuA"),s=[];s.id=this.idArr.id,n()({method:"post",url:t.$store.state.defaultHttp+"customerpool/updateTo.do?cId="+t.$store.state.iscId,data:e.stringify(s)}).then(function(e){e.data.code&&200==e.data.code?(t.$message({message:"转移成功",type:"success"}),t.closeTag()):e.data.msg&&"error"==e.data.msg?t.$message({message:"对不起，您没有该权限，请联系管理员开通",type:"error"}):t.$message({message:e.data.msg,type:"error"})}).catch(function(e){t.$message.error("转移失败,请重新转移")})},deletefollow:function(t){var e=this,s=a("1nuA"),o={};o.followId=this.record[t].followId,n()({method:"post",url:e.$store.state.defaultHttp+"delFollow.do?cId="+e.$store.state.iscId,data:s.stringify(o)}).then(function(t){t.data&&"1"==t.data?(e.$message({message:"删除成功",type:"success"}),e.$store.state.cusdetailsData.submitData={id:e.detailData.id},e.$options.methods.loadData.bind(e)(!0)):e.$message({message:t.data,type:"error"})}).catch(function(t){e.$message.error("删除失败,请重新删除")})},searchBusiness:function(t){this.showloading=!0;var e=this,s=a("1nuA"),o={};o.name=this.customerdetail.pName,o.countryId=this.countryId,n()({method:"post",url:e.$store.state.defaultHttp+"businessData/getBusinessData.do",data:s.stringify(o)}).then(function(t){t.data.code&&"200"==t.data.code&&t.data.map.businessDatas?(e.businessList=t.data.map.businessDatas[0],e.showloading=!1,e.showbusiness=!0,n()({method:"post",url:e.$store.state.defaultHttp+"businessData/insertBusinessData.do",data:s.stringify(o)}).then(function(t){}).catch(function(t){})):e.$message({message:"没有匹配的信息",type:"error"})}).catch(function(t){e.$message.error("服务器开小差了,请稍候重试")})},clickRefresh:function(){var t=this,e=a("1nuA"),s={};s.id=this.businessList.id,s.customerpoolId=this.detailData.id,s.countryId=this.countryId,this.customerdetail.pName==this.businessList.screenName?n()({method:"post",url:t.$store.state.defaultHttp+"customerpool/updateBusinessData.do?cId="+t.$store.state.iscId,data:e.stringify(s)}).then(function(e){e.data.code&&"200"==e.data.code?(t.$message({message:"更新成功",type:"success"}),t.$options.methods.loadData.bind(t)(!0)):t.$message({message:e.data.msg,type:"error"})}).catch(function(e){t.$message.error("更新失败,请重新更新")}):t.$message({message:"该公司与匹配的公司名称不一致，无法更新",type:"error"})},changeState:function(t){var e=this,s=a("1nuA"),o={};o.id=t.id,o.status=t.status,n()({method:"post",url:e.$store.state.defaultHttp+"contacts/updateStatus.do?cId="+e.$store.state.iscId,data:s.stringify(o)}).then(function(t){t.data.code&&"200"==t.data.code?e.$options.methods.loadData.bind(e)():e.$message({message:"可能出了点什么问题，再看看",type:"error"})}).catch(function(t){})},changePrimary:function(t){var e=this,s=a("1nuA"),o={};o.id=t.id,o.isCrux=t.isCrux,n()({method:"post",url:e.$store.state.defaultHttp+"contacts/updateIsCrux.do?cId="+e.$store.state.iscId,data:s.stringify(o)}).then(function(t){t.data.code&&"200"==t.data.code?e.$options.methods.loadData.bind(e)():e.$message({message:"可能出了点什么问题，再看看",type:"error"})}).catch(function(t){})},addcontact:function(){var t=this;n()({method:"get",url:t.$store.state.defaultHttp+"contactsJurisdiction/insert.do"}).then(function(e){e.data.msg&&"error"==e.data.msg?t.$message({message:"对不起，您没有该权限，请联系管理员开通",type:"error"}):(t.contactdialog=!0,t.newform={pName:t.customerdetail.pName,name:null,phone:null,telephone:null,qq:null,email:null,weChat:null,sex:null,birthday:null,identity:null,remark:null})}).catch(function(t){})},submitcontact:function(){var t=this,e=a("1nuA"),s={poolName:this.customerdetail.pName,customerpool_id:this.customerdetail.id,name:this.newform.name,phone:this.newform.phone,telephone:this.newform.telephone,qq:this.newform.qq,email:this.newform.email,weChat:this.newform.weChat,sex:this.newform.sex,birthday:this.newform.birthday,identity:this.newform.identity,remark:this.newform.remark,pId:this.$store.state.ispId,secondid:this.$store.state.deptid,deptid:this.$store.state.insid},o=!1;s.name||(t.$message({message:"联系人名称不能为空",type:"error"}),o=!0),s.phone||(t.$message({message:"手机号码不能为空",type:"error"}),o=!0),o||n()({method:"post",url:t.$store.state.defaultHttp+"insertContacts.do?cId="+t.$store.state.iscId,data:e.stringify(s)}).then(function(e){e.data.code&&"200"==e.data.code?(t.$message({message:"添加成功",type:"success"}),t.contactdialog=!1,t.$options.methods.loadContact.bind(t)()):t.$message({message:e.data.msg,type:"error"})}).catch(function(t){})},addopp:function(){var t=this;n()({method:"get",url:t.$store.state.defaultHttp+"opportunityJurisdiction/insert.do"}).then(function(e){e.data.msg&&"error"==e.data.msg?t.$message({message:"对不起，您没有该权限，请联系管理员开通",type:"error"}):(t.oppdialog=!0,t.newform={pName:t.customerdetail.pName,opportunity_name:null,contacts_id:null,opportunity_achievement:null,opportunity_deal:null,our_signame:t.$store.state.user,opportunity_remarks:null})}).catch(function(t){})},submitopp:function(){var t=this,e=a("1nuA"),s={customerpool_id:this.customerdetail.id,opportunity_name:this.newform.opportunity_name,contacts_id:this.newform.contacts_id,opportunity_achievement:this.newform.opportunity_achievement,opportunity_deal:this.newform.opportunity_deal,user_id:this.$store.state.ispId,secondid:this.$store.state.deptid,deptid:this.$store.state.insid},o=!1;s.opportunity_name||(t.$message({message:"商机名称不能为空",type:"error"}),o=!0),s.contacts_id||(t.$message({message:"客户决策人不能为空",type:"error"}),o=!0),s.opportunity_achievement||(t.$message({message:"预计成交金额不能为空",type:"error"}),o=!0),s.opportunity_deal||(t.$message({message:"预计成交时间不能为空",type:"error"}),o=!0),o||n()({method:"post",url:t.$store.state.defaultHttp+"opportunity/saveOrUpdate.do?cId="+t.$store.state.iscId,data:e.stringify(s)}).then(function(e){e.data.code&&"200"==e.data.code?(t.$message({message:"添加成功",type:"success"}),t.oppdialog=!1,t.$options.methods.loadOpp.bind(t)()):t.$message({message:e.data.msg,type:"error"})}).catch(function(t){})},addagree:function(){var t=this;n()({method:"get",url:t.$store.state.defaultHttp+"contractJurisdiction/insert.do"}).then(function(e){e.data.msg&&"error"==e.data.msg?t.$message({message:"对不起，您没有该权限，请联系管理员开通",type:"error"}):(t.agreedialog=!0,t.newform={pName:t.customerdetail.pName,contract_type:null,contract_name:null,opportunity_id:null,amount:null,start_date:null,end_date:null,signatories:null,our_signatories:null,our_signame:t.$store.state.user,remarks:null})}).catch(function(t){})},submitagree:function(){var t=this,e=a("1nuA"),s={customerpool_id:this.customerdetail.id,contract_type:this.newform.contract_type,contract_name:this.newform.contract_name,opportunity_id:this.newform.opportunity_id,amount:this.newform.amount,start_date:this.newform.start_date,end_date:this.newform.end_date,signatories:this.newform.signatories,our_signatories:this.$store.state.ispId,remarks:this.newform.remarks,pId:this.$store.state.ispId,secondid:this.$store.state.deptid,deptid:this.$store.state.insid},o=!1;s.contract_type||(t.$message({message:"合同类型不能为空",type:"error"}),o=!0),s.contract_name||(t.$message({message:"合同名称不能为空",type:"error"}),o=!0),s.amount||(t.$message({message:"合同金额不能为空",type:"error"}),o=!0),s.start_date||(t.$message({message:"开始时间不能为空",type:"error"}),o=!0),s.end_date||(t.$message({message:"结束时间不能为空",type:"error"}),o=!0),s.signatories||(t.$message({message:"客户签约人不能为空",type:"error"}),o=!0),o||n()({method:"post",url:t.$store.state.defaultHttp+"insertContract.do?cId="+t.$store.state.iscId,data:e.stringify(s)}).then(function(e){e.data.code&&"200"==e.data.code?(t.$message({message:"添加成功",type:"success"}),t.agreedialog=!1,t.$options.methods.loadAgree.bind(t)()):t.$message({message:e.data.msg,type:"error"})}).catch(function(t){})},handlechange:function(t){this.newform.start_date=t;var e=t.split("-"),a=parseInt(e[0])+1,s=e[1],o=e[2];this.newform.end_date=a+"-"+s+"-"+o},handleopp:function(t){var e=this;this.opportunityDetails.forEach(function(a){t==a.opportunity_id&&(e.newform.amount=a.opportunity_achievement)})},tabClick:function(t){var e=this;6==t.index&&(this.website="http://"+this.customerdetail.url),7==t.index&&(this.EnclosureDetails=[],this.record.forEach(function(t){t.enclosureName&&e.EnclosureDetails.push({name:t.enclosureOldName,src:e.$store.state.systemHttp+"upload/"+e.$store.state.iscId+"/"+t.enclosureName,uploads:t.private_employee,uploadTime:t.createTime})}))},beforeUploadimg:function(t,e){this.imgfile=t.raw;var a="jpg"===t.name.split(".")[1],s="png"===t.name.split(".")[1],o="jpeg"===t.name.split(".")[1],i=t.size/1024/1024<.5;if(a||s||o){if(i)return this.imgName=t.name,this.imgList.push({name:t.name}),!1;this.$message.warning("图片大小不能超过 500KB!")}else this.$message.warning("图片只能是 jpg、png、jpeg格式!")},beforeUploadfile:function(t,e){this.files=t.raw;var a="xls"===t.name.split(".")[1],s="xlsx"===t.name.split(".")[1],o="doc"===t.name.split(".")[1],i="docx"===t.name.split(".")[1],l="pdf"===t.name.split(".")[1],n=t.size/1024/1024<5;if(a||s||o||i||l){if(n)return this.filesName=t.name,this.fileList.push({name:t.name}),!1;this.$message.warning("附件大小不能超过 5MB!")}else this.$message.warning("附件只能是 xls、xlsx、doc、docx格式!")},Submitfollowform:function(){var t=this,e=(a("1nuA"),new FormData);e.append("followType",this.followform.followType),e.append("contactTime",this.followform.contactTime),e.append("followContent",this.followform.followContent),e.append("contactsId",this.followform.contactsId),e.append("follow_state",this.followform.state),e.append("customerpool_id",this.detailData.id),e.append("deptid",this.$store.state.insid),e.append("secondid",this.$store.state.deptid),e.append("imgNames",this.imgfile),e.append("enclosureNames",this.files),this.followform.followContent?this.followform.state?n()({method:"get",url:t.$store.state.defaultHttp+"customerJurisdiction/follow.do"}).then(function(a){a.data.msg&&"error"==a.data.msg?t.$message({message:"对不起，您没有该权限，请联系管理员开通",type:"error"}):n()({method:"post",url:t.$store.state.defaultHttp+"addFollow.do?cId="+t.$store.state.iscId+"&pId="+t.$store.state.ispId,headers:{"Content-Type":"multipart/form-data"},data:e}).then(function(e){e.data.msg&&"success"==e.data.msg?t.$message({message:"提交成功",type:"success"}):t.$message({message:e.data.msg,type:"error"}),t.followform.contactTime="",t.followform.followContent="",t.fileList=[],t.imgList=[],t.imgfile=null,t.files=null,t.$store.state.cusdetailsData.submitData={id:t.detailData.id},t.$options.methods.loadData.bind(t)(!0)}).catch(function(e){t.$message.error("提交失败,请重新提交")})}).catch(function(t){}):t.$message({message:"跟进状态不能为空",type:"error"}):t.$message({message:"跟进内容不能为空",type:"error"})},closeTag:function(){var t=this,e=void 0;this.$store.state.tagsList.forEach(function(a,s){a.name==t.$options.name&&(e=s)});var a=this.$store.state.tagsList.splice(e,1)[0];(this.$store.state.tagsList[e]?this.$store.state.tagsList[e]:this.$store.state.tagsList[e-1])?a.path===this.$route.fullPath&&this.$router.push("/customer"):this.$router.push("/index")},search:function(){var t=this,e=a("1nuA"),s={};s.searchName=this.searchList.keyword,s.page=this.page,s.limit=this.limit,n()({method:"post",url:t.$store.state.defaultHttp+"customerpool/getPoolRight.do?cId="+t.$store.state.iscId+"&pId="+t.$store.state.ispId,data:e.stringify(s)}).then(function(e){t.tableData=e.data.map.success,t.tableNumber=e.data.count}).catch(function(t){})},handleSizeChange:function(t){this.limit=t,this.$options.methods.loadData.bind(this)()},handleCurrentChange:function(t){this.page=t,this.$options.methods.loadData.bind(this)()},sendSMS:function(){var t=this,e=a("1nuA"),s={};s.names=[this.customerdetail.pName],s.phones=[this.contacts.phone],s.contacts=[this.contacts.coName],s.templateId=this.SMSform.templateId,n()({method:"get",url:t.$store.state.defaultHttp+"customerJurisdiction/send.do"}).then(function(a){a.data.msg&&"error"==a.data.msg?t.$message({message:"对不起，您没有该权限，请联系管理员开通",type:"error"}):n()({method:"post",url:t.$store.state.defaultHttp+"message/sendMarketingMsg.do?cId="+t.$store.state.iscId,data:e.stringify(s)}).then(function(e){e.data.code&&"200"==e.data.code?(t.$message({message:"发送成功",type:"success"}),t.$options.methods.addSMSsended.bind(t)()):t.$message({message:e.data.msg,type:"error"})}).catch(function(t){})}).catch(function(t){})},addSMSsended:function(){var t=this,e=a("1nuA"),s={type:"客户"};s.ids=[this.customerdetail.id],s.names=[this.customerdetail.pName],s.phones=[this.contacts.phone],s.contacts=[this.contacts.coName],s.templateId=this.SMSform.templateId,s.pId=this.$store.state.ispId,s.secondid=this.$store.state.deptid,s.deptid=this.$store.state.insid,n()({method:"post",url:t.$store.state.defaultHttp+"sendRecord/insertSendRecord.do?cId="+t.$store.state.iscId,data:e.stringify(s)}).then(function(e){e.data.code&&"200"==e.data.code?t.$message({message:"发送成功",type:"success"}):t.$message({message:e.data.msg,type:"error"})}).catch(function(t){})}}}),d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"cusdetcontent",attrs:{gutter:10}},[a("el-col",{attrs:{span:18}},[a("div",{staticClass:"top"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"bold_span"},[t._v(t._s(t.customerdetail.pName))]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.retracts,expression:"!retracts"}],staticClass:"info-btn",staticStyle:{float:"right"},attrs:{size:"mini"},on:{click:function(e){t.retract()}}},[t._v("收起")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.retracts,expression:"retracts"}],staticClass:"info-btn",staticStyle:{float:"right"},attrs:{size:"mini"},on:{click:function(e){t.retract()}}},[t._v("显示")]),t._v(" "),a("el-popover",{attrs:{placement:"bottom",width:"100",trigger:"click"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.SMSform.templateId,callback:function(e){t.$set(t.SMSform,"templateId",e)},expression:"SMSform.templateId"}},t._l(t.templateList,function(t){return a("el-option",{key:t.templateId,attrs:{label:t.title,value:t.templateId}})})),t._v(" "),a("br"),a("br"),a("br"),t._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.sendSMS()}}},[t._v("确定")])],1),t._v(" "),a("el-button",{staticClass:"info-btn",staticStyle:{float:"right"},attrs:{slot:"reference",type:"mini"},slot:"reference"},[t._v("发送短信")])],1),t._v(" "),a("el-button",{staticClass:"info-btn",staticStyle:{float:"right"},attrs:{size:"mini"},on:{click:function(e){t.TocustomerPool()}}},[t._v("转移至客户池")])],1),t._v(" "),a("div",{staticClass:"text item"},[a("ul",[a("li",[t._v("姓名："),a("span",[t._v(t._s(t.contacts.coName))])]),t._v(" "),a("li",[t._v("手机："),a("span",[t._v(t._s(t.contacts.phone))])]),t._v(" "),a("li",[t._v("电话："),a("span",[t._v(t._s(t.contacts.telephone))])]),t._v(" "),a("li",[t._v("邮箱："),a("span",[t._v(t._s(t.contacts.email))])]),t._v(" "),a("li",[t._v("QQ："),a("span",[t._v(t._s(t.contacts.qq))])]),t._v(" "),a("li",[t._v("微信："),a("span",[t._v(t._s(t.contacts.wechat))])]),t._v(" "),a("li",[t._v("职务："),a("span",[t._v(t._s(t.contacts.identity))])]),t._v(" "),a("li",[t._v("性别："),a("span",[t._v(t._s(t.contacts.sex))])]),t._v(" "),a("li",[t._v("网址："),a("span",[t._v(t._s(t.customerdetail.url))])]),t._v(" "),a("li",[t._v("地址："),a("span",[t._v(t._s(t.customerdetail.address))])]),t._v(" "),a("li",[t._v("备注："),a("span",[t._v(t._s(t.customerdetail.remark))])])])])])],1),t._v(" "),a("div",{staticClass:"top"},[a("el-card",{directives:[{name:"show",rawName:"v-show",value:!t.thisshow,expression:"!thisshow"}],staticClass:"box-card",model:{value:t.customerdetail,callback:function(e){t.customerdetail=e},expression:"customerdetail"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("辅助信息")]),t._v(" "),a("el-popover",{attrs:{placement:"left",width:"350",trigger:"click"}},[a("el-select",{staticStyle:{width:"90%"},on:{change:t.searchBusiness},model:{value:t.countryId,callback:function(e){t.countryId=e},expression:"countryId"}},t._l(t.Provinces,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id,placeholder:"请选择省份"}})})),t._v(" "),t.showloading?a("div",{staticClass:"load_icon"},[a("span",[a("i",{staticClass:"el-icon-loading"}),t._v("加载中，请稍候...")])]):t._e(),t._v(" "),t.showbusiness?a("ul",{staticClass:"ul_business"},[a("li",[a("span",[t._v("匹配公司：")]),t._v(t._s(t.businessList.screenName||"无"))]),t._v(" "),a("li",[a("span",[t._v("公司地址：")]),t._v(t._s(t.businessList.address||"无"))]),t._v(" "),a("li",[a("span",[t._v("法人代表：")]),t._v(t._s(t.businessList.legalRepresentative||"无"))]),t._v(" "),a("li",[a("span",[t._v("营业状态：")]),t._v(t._s(t.businessList.businessStatus||"无"))]),t._v(" "),a("li",[a("span",[t._v("登记机关：")]),t._v(t._s(t.businessList.aicBureau||"无"))]),t._v(" "),a("li",[a("span",[t._v("社会信用代码：")]),t._v(t._s(t.businessList.creditCode||"无"))]),t._v(" "),a("li",[a("span",[t._v("注册号：")]),t._v(t._s(t.businessList.licenseNo||"无"))]),t._v(" "),a("li",[a("span",[t._v("组织机构代码：")]),t._v(t._s(t.businessList.orgCode||"无"))]),t._v(" "),a("li",[a("span",[t._v("成立时间：")]),t._v(t._s(t.businessList.startupDate||"无"))])]):t._e(),t._v(" "),t.showbusiness?a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"mini"},on:{click:t.clickRefresh}},[t._v("确定")]):t._e(),t._v(" "),a("el-button",{staticClass:"btn_refresh",attrs:{slot:"reference",size:"mini"},slot:"reference"},[t._v("智能补全")])],1)],1),t._v(" "),a("div",{staticClass:"text item"},[a("ul",[a("br"),t._v(" "),a("li",[t._v("法人代表："),a("span",[t._v(t._s(t.customerdetail.representative))])]),t._v(" "),a("li",[t._v("行业："),a("span",[t._v(t._s(t.customerdetail.industryType))])]),t._v(" "),a("li",[t._v("社会信用代码："),a("span",[t._v(t._s(t.customerdetail.creditCode))])]),t._v(" "),a("li",[t._v("公司类型："),a("span",[t._v(t._s(t.customerdetail.companyType))])]),t._v(" "),a("li",[t._v("企业规模："),a("span",[t._v(t._s(t.customerdetail.enterpriseScale))])]),t._v(" "),a("li",[t._v("注册号："),a("span",[t._v(t._s(t.customerdetail.registrationNumber))])]),t._v(" "),a("li",[t._v("融资状态："),a("span",[t._v(t._s(t.customerdetail.financingState))])]),t._v(" "),a("li",[t._v("营业状态："),a("span",[t._v(t._s(t.customerdetail.operatingState))])]),t._v(" "),a("li",[t._v("组织机构代码："),a("span",[t._v(t._s(t.customerdetail.organizationCode))])]),t._v(" "),a("li",[t._v("注册资金："),a("span",[t._v(t._s(t.customerdetail.capital))])]),t._v(" "),a("li",[t._v("登记机关："),a("span",[t._v(t._s(t.customerdetail.registrationAuthority))])]),t._v(" "),a("li",[t._v("成立时间："),a("span",[t._v(t._s(t.customerdetail.date))])])])])])],1),t._v(" "),a("div",{staticClass:"bottom"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.tabClick},model:{value:t.activeName2,callback:function(e){t.activeName2=e},expression:"activeName2"}},[a("el-tab-pane",{attrs:{label:"跟进记录",name:"first"}},[a("el-form",{ref:"followform",staticClass:"followform",attrs:{rules:t.rules,model:t.followform}},[a("el-form-item",{attrs:{prop:"followContent"}},[a("el-input",{attrs:{type:"textarea",placeholder:"添加跟进内容"},model:{value:t.followform.followContent,callback:function(e){t.$set(t.followform,"followContent",e)},expression:"followform.followContent"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"联系方式",prop:"followType"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.followform.followType,callback:function(e){t.$set(t.followform,"followType",e)},expression:"followform.followType"}},t._l(t.followTypes,function(t){return a("el-option",{key:t.value,attrs:{value:t.label,label:t.label}})}))],1),t._v(" "),a("el-form-item",{staticStyle:{width:"290px"},attrs:{label:"联系人",prop:"contactsId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.followform.contactsId,callback:function(e){t.$set(t.followform,"contactsId",e)},expression:"followform.contactsId"}},t._l(t.contactList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{staticStyle:{width:"275px"},attrs:{label:"状态",prop:"state"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.followform.state,callback:function(e){t.$set(t.followform,"state",e)},expression:"followform.state"}},t._l(t.stateList,function(t){return a("el-option",{key:t.id,attrs:{label:t.typeName,value:t.id}})}))],1),t._v(" "),a("el-form-item",{staticStyle:{width:"310px"},attrs:{label:"下次联系时间"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","default-time":"12:00:00","picker-options":t.pickerOptions,placeholder:"选择日期时间"},model:{value:t.followform.contactTime,callback:function(e){t.$set(t.followform,"contactTime",e)},expression:"followform.contactTime"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"快捷沟通"}},t._l(t.fastcontactList,function(e){return a("el-radio",{key:e.id,attrs:{label:e.content},model:{value:t.followform.followContent,callback:function(e){t.$set(t.followform,"followContent",e)},expression:"followform.followContent"}},[t._v(t._s(e.typeName))])})),t._v(" "),a("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"上传图片"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{"file-list":t.imgList,action:"doUpload","auto-upload":!1,"on-change":t.beforeUploadimg}},[a("el-button",{staticClass:"info-btn",attrs:{slot:"trigger",size:"mini"},slot:"trigger"},[t._v("上传图片")])],1)],1),t._v(" "),a("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"上传附件"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{"file-list":t.fileList,action:"doUpload","auto-upload":!1,"on-change":t.beforeUploadfile}},[a("el-button",{staticClass:"info-btn",attrs:{slot:"trigger",size:"mini"},slot:"trigger"},[t._v("上传附件")])],1)],1),t._v(" "),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{staticStyle:{"margin-top":"6px"},attrs:{type:"primary",size:"mini"},on:{click:t.Submitfollowform}},[t._v("立即提交")])],1)],1),t._v(" "),t._l(t.record,function(e,s){return a("ul",{key:e.followId,staticClass:"followrecord"},[a("li",{staticClass:"recordicon"},[a("img",{staticClass:"detail_portrait",attrs:{src:e.imgUrl,alt:"头像"}})]),t._v(" "),a("li",{staticClass:"verticalline"}),t._v(" "),a("li",{staticClass:"recordcontent"},[a("div",{staticClass:"left_more"},[a("p",[a("span",{staticClass:"de_span_2"},[t._v(t._s(e.contacts[0].name))]),t._v(" "),a("span",{staticClass:"de_span_1"},[t._v(" | ")]),t._v(" "),a("span",{staticClass:"de_span_1"},[t._v(t._s(e.createTime))]),t._v(" "),e.contactTime?a("span",{staticClass:"de_span_1"},[t._v("  --  ")]):t._e(),t._v(" "),a("span",{staticClass:"de_span_1"},[t._v(t._s(e.contactTime))]),t._v("\n                                      \n                                    "),a("span",{staticClass:"de_span_2"},[t._v(t._s(e.state))]),t._v("\n                                      \n                                    "),a("span",{staticClass:"de_span_3"},[t._v("  "+t._s(e.followType)+"  ")])]),t._v(" "),a("p",{staticStyle:{"margin-top":"15px","margin-bottom":"15px"}},[t._v(t._s(e.followContent))]),t._v(" "),e.imgName?a("div",{staticClass:"imgbox_two"},[a("img",{attrs:{src:e.picture_detail,alt:"图片",width:"80",height:"80"},on:{click:function(a){t.showImg(a,e)}}})]):t._e(),t._v(" "),e.enclosureName?a("div",[a("a",{attrs:{href:e.enclosureUrl,download:""}},[t._v(t._s(e.enclosureOldName))])]):t._e(),t._v(" "),a("p",{staticClass:"de_span_1"},[t._v(t._s(e.inputType))]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible2},on:{"update:visible":function(e){t.dialogVisible2=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl2,alt:""}})])],1),t._v(" "),e.showdelico?a("div",{staticClass:"right_more"},[a("el-dropdown",{attrs:{trigger:"click"},on:{command:function(e){t.deletefollow(s)}}},[a("span",{staticClass:"el-dropdown-link"},[t._v("更多"),a("i",{staticClass:"el-icon-caret-bottom"})]),t._v(" "),a("el-dropdown-menu",{staticClass:"drop_item",attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"del"}},[t._v("删除")])],1)],1)],1):t._e()])])})],2),t._v(" "),a("el-tab-pane",{attrs:{label:"联系人",name:"second"}},[a("div",{staticClass:"entry"},[a("el-button",{staticClass:"btn info-btn",attrs:{size:"mini"},on:{click:function(e){t.addcontact()}}},[t._v("新增联系人")]),t._v(" "),a("div",{staticClass:"screen"},[a("span",{staticStyle:{"font-size":"14px"}},[t._v("首要联系人")]),t._v(" "),a("el-select",{staticClass:"pricon_sel",attrs:{placeholder:"请选择"},on:{change:t.choosePri},model:{value:t.contacts_id,callback:function(e){t.contacts_id=e},expression:"contacts_id"}},t._l(t.priconList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.cusConsDetails,border:"",stripe:""}},[a("el-table-column",{attrs:{"header-align":"center",fixed:"",align:"center",type:"index",width:"45"}}),t._v(" "),a("el-table-column",{attrs:{label:"联系人名称",prop:"name","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"手机",prop:"phone","min-width":"110"}}),t._v(" "),a("el-table-column",{attrs:{label:"固话",prop:"telephone","min-width":"110"}}),t._v(" "),a("el-table-column",{attrs:{label:"邮箱",prop:"email","min-width":"130"}}),t._v(" "),a("el-table-column",{attrs:{label:"QQ",prop:"qq","min-width":"110"}}),t._v(" "),a("el-table-column",{attrs:{label:"微信",prop:"wechat","min-width":"110"}}),t._v(" "),a("el-table-column",{attrs:{label:"地址",prop:"address","show-overflow-tooltip":"","min-width":"200"}}),t._v(" "),a("el-table-column",{attrs:{label:"职务",prop:"identity","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{label:"性别",prop:"sex","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{label:"是否在职",prop:"status","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{content:e.row.status,placement:"right"}},[a("el-switch",{attrs:{"active-value":"在职","inactive-value":"离职","active-color":"#13ce66","inactive-color":"#bbbbbb"},on:{change:function(a){t.changeState(e.row)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"是否为关键人",prop:"isCrux","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{content:e.row.isCrux,placement:"right"}},[a("el-switch",{attrs:{"active-value":"是","inactive-value":"否","active-color":"#13ce66","inactive-color":"#bbbbbb"},on:{change:function(a){t.changePrimary(e.row)}},model:{value:e.row.isCrux,callback:function(a){t.$set(e.row,"isCrux",a)},expression:"scope.row.isCrux"}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"备注",prop:"remark","min-width":"180"}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"商机管理",name:"third"}},[a("div",{staticClass:"entry"},[a("el-button",{staticClass:"btn info-btn",attrs:{size:"mini"},on:{click:function(e){t.addopp()}}},[t._v("新增商机")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.opportunityDetails,border:"",stripe:""}},[a("el-table-column",{attrs:{"header-align":"center",fixed:"",align:"center",type:"index",width:"45"}}),t._v(" "),a("el-table-column",{attrs:{label:"商机名称",prop:"opportunity_name","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"商机金额",prop:"opportunity_achievement","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                                "+t._s(t._f("rounding")(parseInt(e.row.opportunity_achievement)))+"\n                            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"预计签单时间",prop:"opportunity_deal","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"商机阶段",prop:"opportunityProgress[0].progress_name","min-width":"110"}}),t._v(" "),a("el-table-column",{attrs:{label:"预计成功率",prop:"opportunityProgress[0].progress_probability","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"商机创建时间",prop:"opportunity_time","min-width":"150"}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"合同管理",name:"fouth"}},[a("div",{staticClass:"entry"},[a("el-button",{staticClass:"btn info-btn",attrs:{size:"mini"},on:{click:function(e){t.addagree()}}},[t._v("新增合同")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.agreementDetails,border:"",stripe:""}},[a("el-table-column",{attrs:{"header-align":"center",fixed:"",align:"center",type:"index",width:"45"}}),t._v(" "),a("el-table-column",{attrs:{label:"合同编号",prop:"contract_number","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"合同名称",prop:"contract_name","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"合同类型",prop:"contract_type","min-width":"110"}}),t._v(" "),a("el-table-column",{attrs:{label:"合同金额",prop:"amount","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                                "+t._s(t._f("rounding")(e.row.amount))+"\n                            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"签约人",prop:"signatories","min-width":"110"}}),t._v(" "),a("el-table-column",{attrs:{label:"合同开始时间",prop:"start_date","min-width":"130"}}),t._v(" "),a("el-table-column",{attrs:{label:"合同到期时间",prop:"end_date","min-width":"130"}}),t._v(" "),a("el-table-column",{attrs:{label:"剩余天数",prop:"due_time","min-width":"110"}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"开票资料",name:"fifth"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.InvoiceDetails,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"公司名称",prop:"name","min-width":"200"}}),t._v(" "),a("el-table-column",{attrs:{label:"税务登记号",prop:"creditCode","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"税务地址",prop:"address","min-width":"200","show-overflow-tooltip":""}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"外勤任务",name:"sixth"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.FielDutyDetails,border:"",stripe:""}},[a("el-table-column",{attrs:{"header-align":"center",fixed:"",align:"center",type:"index",width:"45"}}),t._v(" "),a("el-table-column",{attrs:{label:"类型",prop:"type","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{label:"主题",prop:"theme","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"时间",prop:"startTime","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.startTime))]),t._v(" "),a("p",[t._v(t._s(e.row.endTime))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"负责人",prop:"private_employee","min-width":"110"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"state","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(e){return["已完成"==e.row.state?a("span",{staticStyle:{color:"#e6a23c"}},[t._v(t._s(e.row.state))]):t._e(),t._v(" "),"未完成"==e.row.state?a("span",{staticStyle:{color:"#909399"}},[t._v(t._s(e.row.state))]):t._e(),t._v(" "),"作废"==e.row.state?a("span",{staticStyle:{color:"#f56c6c"}},[t._v(t._s(e.row.state))]):t._e()]}}])})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"官网",name:"seventh"}},[a("iframe",{staticClass:"tab_iframe",attrs:{src:t.website}})]),t._v(" "),a("el-tab-pane",{attrs:{label:"附件",name:"eighth"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.EnclosureDetails,border:"",stripe:""}},[a("el-table-column",{attrs:{"header-align":"center",fixed:"",align:"center",type:"index",width:"45"}}),t._v(" "),a("el-table-column",{attrs:{label:"附件名称",prop:"name","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:e.row.src,download:""}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"上传者",prop:"uploads","min-width":"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"上传时间",prop:"uploadTime","min-width":"150"}})],1)],1)],1)],1)]),t._v(" "),a("el-col",{staticClass:"right",staticStyle:{padding:"10px","min-height":"560px"},attrs:{span:6}},[a("div",{staticClass:"searchList",staticStyle:{width:"100%"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入公司名称"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.search(e):null}},model:{value:t.searchList.keyword,callback:function(e){t.$set(t.searchList,"keyword",e)},expression:"searchList.keyword"}}),t._v(" "),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"mini"},on:{click:function(e){t.search()}}})],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"公司名称",prop:"name"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{on:{click:function(a){t.getRow(e.$index,e.row)}}},[t._v("\n                        "+t._s(e.row.name)+"\n                    ")])]}}])})],1),t._v(" "),a("div",{staticClass:"block numberPage number"},[a("el-pagination",{attrs:{"current-page":t.page,"page-sizes":[20,30,50,100],"page-size":20,layout:"total, sizes, prev, next",total:t.tableNumber},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"新增联系人",visible:t.contactdialog,width:"50%","close-on-click-modal":!1},on:{"update:visible":function(e){t.contactdialog=e}}},[a("el-form",{ref:"newform",staticStyle:{"padding-right":"30px"},attrs:{model:t.newform,"label-width":"80px",rules:t.rules}},[a("el-form-item",{attrs:{label:"公司名称"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.newform.pName,callback:function(e){t.$set(t.newform,"pName",e)},expression:"newform.pName"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"name",label:"联系人"}},[a("el-input",{model:{value:t.newform.name,callback:function(e){t.$set(t.newform,"name",e)},expression:"newform.name"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"phone",label:"手机"}},[a("el-input",{attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.newform.phone,callback:function(e){t.$set(t.newform,"phone",e)},expression:"newform.phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{model:{value:t.newform.telephone,callback:function(e){t.$set(t.newform,"telephone",e)},expression:"newform.telephone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"QQ"}},[a("el-input",{model:{value:t.newform.qq,callback:function(e){t.$set(t.newform,"qq",e)},expression:"newform.qq"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{model:{value:t.newform.email,callback:function(e){t.$set(t.newform,"email",e)},expression:"newform.email"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"微信"}},[a("el-input",{model:{value:t.newform.weChat,callback:function(e){t.$set(t.newform,"weChat",e)},expression:"newform.weChat"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"性别"}},[a("el-radio",{attrs:{label:"男"},model:{value:t.newform.sex,callback:function(e){t.$set(t.newform,"sex",e)},expression:"newform.sex"}},[t._v("男")]),t._v(" "),a("el-radio",{attrs:{label:"女"},model:{value:t.newform.sex,callback:function(e){t.$set(t.newform,"sex",e)},expression:"newform.sex"}},[t._v("女")])],1),t._v(" "),a("el-form-item",{attrs:{label:"生日"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","default-value":"1985-06-15",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.newform.birthday,callback:function(e){t.$set(t.newform,"birthday",e)},expression:"newform.birthday"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"职务"}},[a("el-input",{model:{value:t.newform.identity,callback:function(e){t.$set(t.newform,"identity",e)},expression:"newform.identity"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"explain",label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:"5",placeholder:"请输入备注"},model:{value:t.newform.remark,callback:function(e){t.$set(t.newform,"remark",e)},expression:"newform.remark"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.contactdialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitcontact}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"新增商机",visible:t.oppdialog,width:"50%","close-on-click-modal":!1},on:{"update:visible":function(e){t.oppdialog=e}}},[a("el-form",{ref:"newform",staticStyle:{"padding-right":"30px"},attrs:{model:t.newform,"label-width":"110px",rules:t.rules}},[a("el-form-item",{attrs:{label:"公司名称"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.newform.pName,callback:function(e){t.$set(t.newform,"pName",e)},expression:"newform.pName"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"opportunity_name",label:"商机名称"}},[a("el-input",{model:{value:t.newform.opportunity_name,callback:function(e){t.$set(t.newform,"opportunity_name",e)},expression:"newform.opportunity_name"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"contacts_id",label:"客户决策人"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择客户决策人"},model:{value:t.newform.contacts_id,callback:function(e){t.$set(t.newform,"contacts_id",e)},expression:"newform.contacts_id"}},t._l(t.cusConsDetails,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{prop:"opportunity_achievement",label:"预计成交金额"}},[a("el-input",{attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'.')"},model:{value:t.newform.opportunity_achievement,callback:function(e){t.$set(t.newform,"opportunity_achievement",e)},expression:"newform.opportunity_achievement"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"opportunity_deal",label:"预计成交时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择预计成交时间",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.newform.opportunity_deal,callback:function(e){t.$set(t.newform,"opportunity_deal",e)},expression:"newform.opportunity_deal"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"负责人"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.newform.our_signame,callback:function(e){t.$set(t.newform,"our_signame",e)},expression:"newform.our_signame"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:t.newform.opportunity_remarks,callback:function(e){t.$set(t.newform,"opportunity_remarks",e)},expression:"newform.opportunity_remarks"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.oppdialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitopp}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"新增合同",visible:t.agreedialog,width:"50%","close-on-click-modal":!1},on:{"update:visible":function(e){t.agreedialog=e}}},[a("el-form",{ref:"newform",staticStyle:{"padding-right":"30px"},attrs:{model:t.newform,"label-width":"110px",rules:t.rules}},[a("el-form-item",{attrs:{label:"客户名称"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.newform.pName,callback:function(e){t.$set(t.newform,"pName",e)},expression:"newform.pName"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"contract_type",label:"合同类型"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.newform.contract_type,callback:function(e){t.$set(t.newform,"contract_type",e)},expression:"newform.contract_type"}},[a("el-option",{attrs:{label:"销售合同",value:"销售合同"}}),t._v(" "),a("el-option",{attrs:{label:"服务合同",value:"服务合同"}}),t._v(" "),a("el-option",{attrs:{label:"代理合同",value:"代理合同"}}),t._v(" "),a("el-option",{attrs:{label:"其他",value:"其他"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{prop:"contract_name",label:"合同名称"}},[a("el-input",{model:{value:t.newform.contract_name,callback:function(e){t.$set(t.newform,"contract_name",e)},expression:"newform.contract_name"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"opportunity_id",label:"对应商机"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:t.handleopp},model:{value:t.newform.opportunity_id,callback:function(e){t.$set(t.newform,"opportunity_id",e)},expression:"newform.opportunity_id"}},t._l(t.opportunityDetails,function(t){return a("el-option",{key:t.opportunity_id,attrs:{label:t.opportunity_name,value:t.opportunity_id}})}))],1),t._v(" "),a("el-form-item",{attrs:{prop:"amount",label:"合同金额"}},[a("el-input",{attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'.')"},model:{value:t.newform.amount,callback:function(e){t.$set(t.newform,"amount",e)},expression:"newform.amount"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"start_date",label:"开始时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:t.handlechange},model:{value:t.newform.start_date,callback:function(e){t.$set(t.newform,"start_date",e)},expression:"newform.start_date"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"end_date",label:"结束时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.newform.end_date,callback:function(e){t.$set(t.newform,"end_date",e)},expression:"newform.end_date"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"signatories",label:"客户签约人"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.newform.signatories,callback:function(e){t.$set(t.newform,"signatories",e)},expression:"newform.signatories"}},t._l(t.cusConsDetails,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"我方签约人"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.newform.our_signame,callback:function(e){t.$set(t.newform,"our_signame",e)},expression:"newform.our_signame"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:t.newform.remarks,callback:function(e){t.$set(t.newform,"remarks",e)},expression:"newform.remarks"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.agreedialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitagree}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var m=a("VU/8")(c,d,!1,function(t){a("IRNA")},null,null);e.default=m.exports}});