webpackJsonp([49],{"9Ux3":function(e,t){},tFks:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("woOf"),o=a.n(s),r=a("INCx"),l=a.n(r),n=a("wtEF"),i=a("mtWM"),c=a.n(i),d=(a("mw3O"),{name:"order",props:{totalNum:Number},store:n.a,computed:{tableData:function(){return n.a.state.orderList},tableNumber:function(){return n.a.state.orderListnumber}},filters:{rounding:function(e){if(e){var t=l()(e).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"),a=".00",s=e.toString().split(".");return 2===s.length?1===(a=s[1].toString()).length?t+"."+a+"0":t+"."+a:t+a}}},data:function(){return{searchList:{searchName:null,label:"1",state:null,type:null,time:null,example:null},searchListNew:{searchName:null,label:"1",state:null,type:null,time:null,example:null},page:1,limit:20,idArr:{id:null},SMSId:[],SMSnames:[],SMSphones:[],SMScontacts:[],pIdData:[{label:"0",value:"全部"},{label:"1",value:"我的"},{label:"2",value:"本组"},{label:"3",value:"本机构"},{label:"4",value:"待我审核"}],timeData:[{id:"1",name:"今天"},{id:"2",name:"昨天"},{id:"3",name:"本周"},{id:"4",name:"本月"},{id:"5",name:"上月"}],nullvalue:null,filterList:null,checklist:null}},activated:function(){this.loadTable()},mounted:function(){this.loadTable(),this.reloadData()},methods:{loadTable:function(){var e=this,t=a("1nuA"),s={};s.searchName=this.searchList.searchName,0==this.searchList.label||(1==this.searchList.label?s.pId=e.$store.state.ispId:2==this.searchList.label?s.secondid=e.$store.state.deptid:3==this.searchList.label?s.deptid=e.$store.state.insid:4==this.searchList.label&&(s.examine=e.$store.state.ispId)),s.example=this.searchList.example,s.page=this.page,s.limit=this.limit,c()({method:"post",url:e.$store.state.defaultHttp+"order/selectOrderList.do?cId="+e.$store.state.iscId,data:t.stringify(s)}).then(function(t){var a=t.data.map.orders;e.$store.state.orderList=a,e.$store.state.orderListnumber=t.data.count}).catch(function(e){})},reloadData:function(){var e=this,t=a("1nuA"),s={type:"销售订单"},o={type:"销售订单",state:1};c()({method:"post",url:e.$store.state.defaultHttp+"userPageInfo/getAllUserPage.do?cId="+e.$store.state.iscId+"&pId="+e.$store.state.ispId,data:t.stringify(s)}).then(function(t){e.filterList=t.data}).catch(function(e){}),c()({method:"post",url:e.$store.state.defaultHttp+"userPageInfo/getUserPage.do?cId="+e.$store.state.iscId+"&pId="+e.$store.state.ispId,data:t.stringify(o)}).then(function(t){e.checklist=t.data}).catch(function(e){})},selectInfo:function(e){var t=e,a=[new Array];t.forEach(function(e){0!=e.id&&a.push(e.id)}),this.idArr.id=a},openDetails:function(e,t){this.$store.state.cluedetailsData={submitData:{id:t.id}},this.$router.push({path:"/clueDetails"})},handleAdd:function(){this.$router.push({path:"/orderadd"})},handleEdit:function(e,t){var a={};a.setForm={id:t.id},this.$store.state.orderupdateData=a,this.$router.push({path:"/orderupdate"})},handledeletes:function(){var e=this,t=a("1nuA"),s=[];s.id=this.idArr.id,s.id?(s.id.shift(0),e.$confirm("是否确认删除订单？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(a){a.value;c()({method:"post",url:e.$store.state.defaultHttp+"order/delete.do?cId="+e.$store.state.iscId,data:t.stringify(s)}).then(function(t){t.data.code&&"200"==t.data.code?e.$message({message:"删除成功",type:"success"}):e.$message({message:t.data.msg,type:"error"}),e.$options.methods.loadTable.bind(e)()}).catch(function(t){e.$message.error("删除失败，请重新操作")})}).catch(function(){e.$message({type:"info",message:"取消删除"})})):e.$message({type:"error",message:"请先选择要删除的订单"})},handledetele:function(e,t){var s=this,o=this,r=a("1nuA"),l={};l.id=t.id,o.$confirm("是否确认删除["+t.customerName+"]的订单？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){e.value;c()({method:"post",url:o.$store.state.defaultHttp+"order/delete.do?cId="+o.$store.state.iscId,data:r.stringify(l)}).then(function(e){e.data.code&&"200"==e.data.code?(o.$message({message:"删除成功",type:"success"}),o.$options.methods.loadTable.bind(o)(!0)):e.data.msg&&"error"==e.data.msg?o.$message({message:"对不起，您没有该权限，请联系管理员开通",type:"error"}):o.$message({message:e.data.msg,type:"error"})}).catch(function(e){o.$message.error("删除失败，请重新操作")})}).catch(function(){s.$message({type:"info",message:"取消删除["+t.customerName+"]的订单"})})},getSummaries:function(e){var t=e.columns,a=e.data,s=[];return t.forEach(function(e,t){if(0!==t){var o=a.map(function(t){return Number(t[e.property])});if("totalSum"==e.property){s[t]=o.reduce(function(e,t){return t+e},0),s[t]=s[t].toFixed(2);var r=l()(s[t]).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"),n=".00",i=s[t].split(".");2===i.length?1===(n=i[1].toString()).length?s[t]=r+"."+n+"0":s[t]=r+"."+n:s[t]=r+n,s[t]+=" 元"}else s[t]=""}else s[t]="合计"}),s},hangleChange:function(e,t){var s=this,o=a("1nuA"),r={};r.pageInfoId=t.pageInfoId,r.state=1==e?1:0,c()({method:"post",url:s.$store.state.defaultHttp+"userPageInfo/updateUserPageByid.do?cId="+s.$store.state.iscId+"&pId="+s.$store.state.ispId,data:o.stringify(r)}).then(function(e){e.data&&"success"==e.data&&s.$options.methods.reloadData.bind(s)(!0)}).catch(function(e){})},search:function(){var e=this,t=(a("1nuA"),""),s=1;0==this.searchList.label?(t="clueJurisdiction/all.do",s=0):2==this.searchList.label?(t="clueJurisdiction/second.do",s=0):3==this.searchList.label&&(t="clueJurisdiction/dept.do",s=0),0==s?c()({method:"get",url:e.$store.state.defaultHttp+t}).then(function(t){t.data.msg&&"error"==t.data.msg?e.$message({message:"对不起，您没有该权限，请联系管理员开通",type:"error"}):e.$options.methods.loadTable.bind(e)(!0)}).catch(function(e){}):e.$options.methods.loadTable.bind(e)(!0)},reset:function(){this.searchList=o()({},this.searchListNew),this.$options.methods.loadTable.bind(this)(!0)},handleSizeChange:function(e){this.limit=e,this.$options.methods.loadTable.bind(this)(!1)},handleCurrentChange:function(e){this.page=e,this.$options.methods.loadTable.bind(this)(!1)}}}),u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"radioList"},[a("el-radio-group",{model:{value:e.searchList.label,callback:function(t){e.$set(e.searchList,"label",t)},expression:"searchList.label"}},[a("span",{staticClass:"nameList"},[e._v("数据授权：")]),e._v(" "),e._l(e.pIdData,function(t){return a("el-radio",{key:t.label,attrs:{label:t.label},on:{change:function(t){e.search()}}},[e._v(e._s(t.value))])})],2),e._v(" "),a("el-radio-group",{model:{value:e.searchList.example,callback:function(t){e.$set(e.searchList,"example",t)},expression:"searchList.example"}},[a("span",{staticClass:"nameList"},[e._v("计划时间：")]),e._v(" "),a("el-radio",{attrs:{label:e.nullvalue},on:{change:function(t){e.search()}}},[e._v("全部")]),e._v(" "),e._l(e.timeData,function(t){return a("el-radio",{key:t.id,attrs:{label:t.id},on:{change:function(t){e.search()}}},[e._v(e._s(t.name))])})],2)],1),e._v(" "),a("div",{staticClass:"searchList"},[a("span",{staticClass:"nameList"},[e._v("公司名称：")]),e._v(" "),a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入公司名称"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.search(t):null}},model:{value:e.searchList.searchName,callback:function(t){e.$set(e.searchList,"searchName",t)},expression:"searchList.searchName"}}),e._v("\n          \n        "),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"mini"},on:{click:function(t){e.search()}}},[e._v("查询")])],1),e._v(" "),a("div",{staticClass:"entry"},[a("el-button",{staticClass:"btn info-btn",attrs:{size:"mini"},on:{click:function(t){e.handleAdd()}}},[e._v("新增")]),e._v(" "),a("div",{staticClass:"totalnum_head"},[e._v("共 "),a("span",{staticClass:"bold_span"},[e._v(e._s(e.tableNumber))]),e._v(" 条")]),e._v(" "),a("el-popover",{attrs:{placement:"bottom",width:"100",trigger:"click"}},[a("el-checkbox-group",{staticClass:"checklist",staticStyle:{"max-height":"600px","overflow-y":"overlay","overflow-x":"hidden"},model:{value:e.checklist,callback:function(t){e.checklist=t},expression:"checklist"}},e._l(e.filterList,function(t){return a("el-checkbox",{key:t.id,staticClass:"checkone",attrs:{label:t.name,value:t.state},on:{change:function(a){e.hangleChange(a,t)}}})})),e._v(" "),a("el-button",{staticClass:"info-btn screen",attrs:{slot:"reference",icon:"el-icon-more",type:"mini"},slot:"reference"})],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:"","summary-method":e.getSummaries,"show-summary":""},on:{"selection-change":e.selectInfo}},[a("el-table-column",{attrs:{fixed:"","header-align":"center",align:"center",type:"selection",width:"45","scope.row.id":"",prop:"id",sortable:""},on:{"selection-change":e.selectInfo}}),e._v(" "),e._l(e.filterList,function(t,s){return a("div",{key:s},["createTime"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"日期",prop:"orderTime",fixed:"","min-width":"110",sortable:""}}):e._e(),e._v(" "),"orderNo"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"订单编号",prop:"orderNo",fixed:"","min-width":"150",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"hoverline",on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("\n                        "+e._s(t.row.orderNo)+"\n                    ")])]}}])}):e._e(),e._v(" "),"customerName"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"公司名称",prop:"customerName","show-overflow-tooltip":"","min-width":"200",sortable:""}}):e._e(),e._v(" "),"totalSum"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"总金额",prop:"totalSum","min-width":"110",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e._f("rounding")(t.row.totalSum))+"\n                ")]}}])}):e._e(),e._v(" "),"checkStatus"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"状态",prop:"checkStatus",width:"90",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.checkStatus?a("el-tag",{staticStyle:{"background-color":"#ffffff",color:"#606266","border-color":"#dcdfe6"},attrs:{size:"small",effect:"dark"}},[e._v("待审核")]):e._e(),e._v(" "),1==t.row.checkStatus?a("el-tag",{staticStyle:{"background-color":"#e6a23c",color:"#ffffff","border-color":"#e6a23c"},attrs:{size:"small",effect:"dark"}},[e._v("审核中")]):e._e(),e._v(" "),2==t.row.checkStatus?a("el-tag",{staticStyle:{"background-color":"#67c23a",color:"#ffffff","border-color":"#67c23a"},attrs:{size:"small",effect:"dark"}},[e._v("已审核")]):e._e(),e._v(" "),3==t.row.checkStatus?a("el-tag",{staticStyle:{"background-color":"#f56c6c",color:"#ffffff","border-color":"#f56c6c"},attrs:{size:"small",effect:"dark"}},[e._v("未通过")]):e._e()]}}])}):e._e(),e._v(" "),"contactsName"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"联系人",prop:"contactsName","min-width":"100",sortable:""}}):e._e(),e._v(" "),"settlement"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"结算方式",prop:"settlement","min-width":"110",sortable:""}}):e._e(),e._v(" "),"delivery"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"交货方式",prop:"delivery","min-width":"110",sortable:""}}):e._e(),e._v(" "),"address"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"交货地址",prop:"deliveryAddress","show-overflow-tooltip":"","min-width":"200",sortable:""}}):e._e(),e._v(" "),"private_employee"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"制单人",prop:"private_employee","min-width":"110",sortable:""}}):e._e(),e._v(" "),"ascription"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"业务员",prop:"ascription","min-width":"110",sortable:""}}):e._e(),e._v(" "),"deptname"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"部门",prop:"deptname","min-width":"100",sortable:""}}):e._e(),e._v(" "),"parentname"==t.prop&&1==t.state?a("el-table-column",{attrs:{label:"机构",prop:"parentname","show-overflow-tooltip":"","min-width":"100",sortable:""}}):e._e()],1)}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"150","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",disabled:t.row.disabledBtn},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",disabled:t.row.disabledBtn,type:"danger"},on:{click:function(a){e.handledetele(t.$index,t.row)}}},[e._v("删除")])]}}])})],2),e._v(" "),a("div",{staticClass:"block numberPage"},[a("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[20,50,100,500],"page-size":20,layout:"total, sizes, prev, pager, next, jumper",total:e.tableNumber},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var h=a("VU/8")(d,u,!1,function(e){a("9Ux3")},null,null);t.default=h.exports}});