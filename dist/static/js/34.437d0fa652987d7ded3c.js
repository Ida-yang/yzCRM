webpackJsonp([34],{IppD:function(e,t){},iWtL:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mvHQ"),i=a.n(s),o=a("INCx"),l=a.n(o),r=a("bOdI"),n=a.n(r),c=(a("wtEF"),a("mtWM")),m=a.n(c),d=(a("mw3O"),{name:"name",data:function(){var e;return e={orderReceiveDetailData:{},list:null,orderList:[],listLoading:!1,selectData:[],itemData:[{orderNo:null,orderTime:null,order_money:null,accepted_money:null,uncollected_money:null,this_money:null,remarks:null,edit:!1},{orderNo:null,orderTime:null,order_money:null,accepted_money:null,uncollected_money:null,this_money:null,remarks:null,edit:!1}],scopeIndex:null,myform:{id:null,customerpool_id:null,createTime:null,pay_type_id:null,money:null,discountAfter:null,discountAmount:null,discount:null,remarks:null,images:null,files:null,private_employee:this.$store.state.user,ascriptionId:null,ascription:null,deptname:null,parentname:null},rules:{customerpool_id:[{required:!0,message:"公司名称不能为空",trigger:"blur"}],createTime:[{required:!0,message:"日期不能为空",trigger:"blur"}],pay_type_id:[{required:!0,message:"收款方式不能为空",trigger:"blur"}],discountAfter:[{required:!0,message:"折后金额不能为空",trigger:"blur"}],remarks:[{required:!0,message:"审核意见不能为空",trigger:"blur"}]},imagesData:[],imagesList:[],filesData:[],filesList:[],customerList:[],payTypeMethod:[],isDisable:!1,OKdisabled:!0},n()(e,"isDisable",!1),n()(e,"thisshow",!1),n()(e,"retracts",!1),n()(e,"hasCheck",null),n()(e,"examineLog",[]),n()(e,"examineList",[]),n()(e,"dialogVisible2",!1),n()(e,"exaform",{status:null,remarks:null}),n()(e,"auditing",this.$store.state.systemHttp+"/upload/staticImg/inaudit.png"),n()(e,"audited",this.$store.state.systemHttp+"/upload/staticImg/examine.png"),n()(e,"noaudit",this.$store.state.systemHttp+"/upload/staticImg/refuse.png"),n()(e,"fieldsform",{}),n()(e,"previewData",[]),n()(e,"deptData",[]),n()(e,"defaultProps",{label:"deptname",children:"next"}),n()(e,"userData",[]),n()(e,"doUpload",this.$store.state.defaultHttp+"workOrder/upload.do?cId="+this.$store.state.iscId),e},mounted:function(){this.loadOther(),this.loadfield(),this.loadUserandDept()},methods:{loadOther:function(){var e=this,t=a("1nuA"),s=this.$store.state.orderReceiveDetailData;this.orderReceiveDetailData=s;var i={page:1,limit:1e7},o=new Date,l=o.getFullYear(),r=o.getMonth()+1,n=o.getDate();r=r<10?"0"+r:r,n=n<10?"0"+n:n,this.myform.createTime=l+"-"+r+"-"+n,m()({method:"post",url:e.$store.state.defaultHttp+"customerpool/query.do?cId="+e.$store.state.iscId,data:t.stringify(i)}).then(function(t){e.customerList=t.data.map.success}).catch(function(e){}),m()({method:"post",url:e.$store.state.defaultHttp+"typeInfo/getTypeInfoGroupByType.do?cId="+e.$store.state.iscId,data:t.stringify({type:"收款方式"})}).then(function(t){e.payTypeMethod=t.data}).catch(function(e){}),e.$options.methods.loadData.bind(e)()},loadData:function(){var e=this,t=a("1nuA"),s={};s.id=this.orderReceiveDetailData.id,this.listLoading=!0,m()({method:"post",url:e.$store.state.defaultHttp+"orderBack/selectById.do?cId="+e.$store.state.iscId,data:t.stringify(s)}).then(function(t){var a=t.data;e.itemData=a.orderBackDetailList.map(function(t){return e.$set(t,"edit",!1),t}),0==a.checkStatus&&e.itemData.push({orderNo:null,orderTime:null,order_money:null,accepted_money:null,uncollected_money:null,this_money:null,remarks:null,edit:!1},{orderNo:null,orderTime:null,order_money:null,accepted_money:null,uncollected_money:null,this_money:null,remarks:null,edit:!1});var s=a.timeConsuming,i=parseInt(s/24),o=parseInt(s%24);a.takeupTime=i+"天"+o+"小时",e.myform=a,e.$options.methods.getList.bind(e)(),e.$options.methods.getFiles.bind(e)(),e.$options.methods.loadExamine.bind(e)(),e.listLoading=!1}).catch(function(e){})},loadExamine:function(){var e=this,t=a("1nuA"),s={checkStatus:this.myform.checkStatus,recordId:this.myform.examineRecordId,pId:this.$store.state.ispId};m()({method:"post",url:e.$store.state.defaultHttp+"examineRecord/queryExamineRecordList.do?cId="+e.$store.state.iscId,data:t.stringify(s)}).then(function(t){e.examineList=t.data.steps,e.examineList.forEach(function(t,a){if(t.userLength=t.userList.length,1==t.userLength?t.type_style="width:50px;":2==t.userLength?t.type_style="width:75px;":3==t.userLength?t.type_style="width:100px;":4==t.userLength?t.type_style="width:125px;":5==t.userLength&&(t.type_style="width:150px;"),0==a&&(t.userList[0].img?t.headPortrait=e.$store.state.systemHttp+"/upload/"+e.$store.state.iscId+"/"+t.userList[0].img:t.headPortrait=e.$store.state.systemHttp+"/upload/staticImg/avatar.jpg"),2==t.stepType)for(var s=0;s<t.userList.length;s++){if(t.userList[s].img&&0!==t.userList[s].examineStatus){t.headPortrait=e.$store.state.systemHttp+"/upload/"+e.$store.state.iscId+"/"+t.userList[s].img;break}if(!t.userList[s].img&&0!==t.userList[s].examineStatus){t.headPortrait=e.$store.state.systemHttp+"/upload/staticImg/avatar.jpg";break}if(t.userList[s].img&&0==t.userList[s].examineStatus){t.headPortrait=e.$store.state.systemHttp+"/upload/"+e.$store.state.iscId+"/"+t.userList[s].img;break}if(!t.userList[s].img&&0==t.userList[s].examineStatus){t.headPortrait=e.$store.state.systemHttp+"/upload/staticImg/avatar.jpg";break}}3==t.stepType&&t.userList.forEach(function(t,a){t.img?t.headPortrait=e.$store.state.systemHttp+"/upload/"+e.$store.state.iscId+"/"+t.img:t.headPortrait=e.$store.state.systemHttp+"/upload/staticImg/avatar.jpg"})}),e.hasCheck=t.data.isCheck,e.hasRecheck=t.data.isRecheck}).catch(function(e){}),m()({method:"get",url:e.$store.state.defaultHttp+"examineLog/queryExamineLogList.do?cId="+e.$store.state.iscId+"&recordId="+e.myform.examineRecordId}).then(function(t){e.examineLog=t.data}).catch(function(e){})},getFiles:function(){var e=this;this.myform.files&&(this.filesData=[],JSON.parse(this.myform.files).forEach(function(t){e.filesData.push({name:t.name,response:t.response,url:e.$store.state.systemHttp+"upload/"+e.$store.state.iscId+"/"+t.response})}));this.myform.images&&(this.imagesData=[],JSON.parse(this.myform.images).forEach(function(t){e.imagesData.push({name:t.name,response:t.response,url:e.$store.state.systemHttp+"upload/"+e.$store.state.iscId+"/"+t.response})}))},getList:function(){var e=this,t=a("1nuA"),s={customerpoolId:this.myform.customerpool_id};m()({method:"post",url:e.$store.state.defaultHttp+"orderBackDetail/selectByCustomerpoolId.do?cId="+e.$store.state.iscId,data:t.stringify(s)}).then(function(t){var a=t.data;e.list=a.map(function(t){return e.$set(t,"edit",!1),t}),e.orderList=a,e.$options.methods.getSelect.bind(e)()}).catch(function(e){})},loadfield:function(){var e=this,t=a("1nuA"),s={label:12,id:this.orderReceiveDetailData.id,batch_id:this.orderReceiveDetailData.batch_id};m()({method:"post",url:e.$store.state.defaultHttp+"field/queryField.do?cId="+e.$store.state.iscId,data:t.stringify(s)}).then(function(t){var a=t.data;a.forEach(function(t,a){t.displayVal="",t.default_value=t.value,"user"!=t.formType&&"structure"!=t.formType||(t.displayVal=t.deptOrUserName,t.default_value=parseInt(t.value)),1==t.is_null&&(e.rules[t.field_name]=[{required:!0,message:" ",trigger:"blur"}])}),e.previewData=a}).catch(function(e){})},loadUserandDept:function(){var e=this,t=a("1nuA"),s={page:1,limit:"9999"};m()({method:"post",url:e.$store.state.defaultHttp+"getPrivateUserAll.do?cId="+e.$store.state.iscId,data:t.stringify(s)}).then(function(t){e.userData=t.data.map.success}).catch(function(e){}),m()({method:"get",url:e.$store.state.defaultHttp+"dept/getDeptNodeTree.do?cId="+e.$store.state.iscId}).then(function(t){e.deptData=t.data.map.success}).catch(function(e){})},selectOrder:function(e){var t=this;this.selectData.forEach(function(a,s){a.orderNo==e&&(t.itemData[t.scopeIndex]=a,t.itemData[t.scopeIndex].edit=!0,t.itemData[t.scopeIndex].this_money=0)}),this.$options.methods.getList.bind(this)()},getSelect:function(){var e=this.list;this.selectData=[],this.itemData.forEach(function(t,a){e.forEach(function(a,s){t.order_id&&a.order_id==t.order_id&&e.splice(s,1)})}),this.selectData=e},selectCustomer:function(e){var t=this;this.customerList.forEach(function(a){a.id==e&&(t.myform.ascriptionId=a.privateUser[0].private_id,t.myform.ascription=a.privateUser[0].private_employee,t.myform.deptname=a.deptname,t.myform.parentname=a.parentname)}),this.$options.methods.getList.bind(this)()},handleAdd:function(){this.itemData.push({orderNo:null,orderTime:null,order_money:null,accepted_money:null,uncollected_money:null,this_money:null,remarks:null,edit:!1})},cellClick:function(e,t,a,s){var i=this;e.edit=!1,"操作"!==t.label&&0==this.myform.checkStatus&&(this.myform.customerpool_id?(e.edit=!0,this.itemData.forEach(function(t,a){t.order_id==e.order_id&&(i.scopeIndex=a)})):this.$message({message:"请先选择客户",type:"error"}))},rowDelete:function(e,t){var a=this;this.itemData.forEach(function(t,s){s==e&&a.itemData.splice(s,1)}),this.$options.methods.getList.bind(this)()},rowEdit:function(e){e.edit=!1,this.$message({message:"本地保存成功",type:"success"})},handleFoces:function(e,t){this.scopeIndex=e},inputDiscountAfter:function(e){if(this.myform.money){var t=parseFloat(this.myform.money)-parseFloat(e),a=parseFloat(e)/parseFloat(this.myform.money)*100;this.myform.discountAmount=t.toFixed(2),this.myform.discount=a.toFixed(2)}},handleinput:function(e,t,a){this.orderList.forEach(function(e){if(e.order_id==a.order_id){var t=parseFloat(a.this_money)+parseFloat(e.accepted_money),s=parseFloat(a.order_money)-t;a.uncollected_money=s.toFixed(2),a.accepted_money=t.toFixed(2)}});var s=0;this.itemData.forEach(function(e){e.order_id&&(s+=parseFloat(e.this_money))});var i=s.toFixed(2);this.myform.discountAfter&&this.myform.discountAfter!=this.myform.money||(this.myform.discountAfter=i),this.myform.money=i,this.inputDiscountAfter(this.myform.discountAfter)},getSummary:function(e){var t=e.columns,a=e.data,s=[];return t.forEach(function(e,t){if(0!==t){var i=a.map(function(t){return Number(t[e.property])});if("this_money"==e.property||"accepted_money"==e.property||"uncollected_money"==e.property||"order_money"==e.property){s[t]=i.reduce(function(e,t){return t+e},0),s[t]=s[t].toFixed(2);var o=l()(s[t]).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"),r=".00",n=s[t].split(".");2===n.length?1===(r=n[1].toString()).length?s[t]=o+"."+r+"0":s[t]=o+"."+r:s[t]=o+r,s[t]+=" 元"}else"num"==e.property?(s[t]=i.reduce(function(e,t){return t+e},0),s[t]):s[t]=""}else s[t]="合计"}),s},handlecheck:function(e,t){this.previewData.forEach(function(a){a.id==t.id&&(a.displayVal=e.deptname,a.default_value=e.deptid)})},beforeUpload:function(e){if(!(e.size/1024/1024<1))return this.$message.warning("文件大小不能超过 5MB!"),!1},uploadExceed:function(e,t){if(e.length>3)return this.$message.warning("文件不能超过3个!"),!1},uploadSuccess:function(e,t,a){this.previewData.forEach(function(t){"file"==t.formType&&(t.default_value=e)})},fileUploadSuccess:function(e,t,a){var s=a,o=new Array;s.forEach(function(e){o.push({name:e.name,response:e.response})}),this.myform.files=i()(o)},imageUploadSuccess:function(e,t,a){var s=a,o=new Array;console.log(s),s.forEach(function(e){o.push({name:e.name,response:e.response})}),this.myform.images=i()(o)},onSubmit:function(){var e=this,t=e.previewData,a=new Array;this.itemData.forEach(function(e,t){e.order_id&&a.push({order_id:e.order_id,order_money:parseFloat(e.order_money),this_money:parseFloat(e.this_money),accepted_money:parseFloat(e.accepted_money),uncollected_money:parseFloat(e.uncollected_money),remarks:e.remarks})});var s={id:this.orderReceiveDetailData.id,batch_id:this.orderReceiveDetailData.batch_id,customerpool_id:this.myform.customerpool_id,createTime:this.myform.createTime,money:parseFloat(this.myform.money),pay_type_id:this.myform.pay_type_id,discount:parseFloat(this.myform.discount),discountAmount:parseFloat(this.myform.discountAmount),discountAfter:parseFloat(this.myform.discountAfter),remarks:this.myform.remarks,images:this.myform.images,files:this.myform.files,pId:parseInt(this.$store.state.ispId),ascriptionId:this.myform.ascriptionId},i=!1;if(a.length||(e.$message({message:"订单不能为空",type:"error"}),i=!0),s.discountAfter||(e.$message({message:"折后金额不能为空",type:"error"}),i=!0),s.pay_type_id||(e.$message({message:"收款方式不能为空",type:"error"}),i=!0),t.forEach(function(t){"checkbox"==t.formType?t.value=t.default_value.join(","):"user"==t.formType||"structure"==t.formType?t.default_value&&(t.value=t.default_value.toString()):t.value=t.default_value,1!=t.is_null||t.value||(e.$message({message:t.name+"不能为空",type:"error"}),i=!0)}),!i){var o={orderBack:s,orderBackDetailList:a,field:t};console.log(o),this.isDisable=!0,m()({method:"post",url:e.$store.state.defaultHttp+"orderBack/saveOrUpdate.do?cId="+e.$store.state.iscId,data:o}).then(function(t){t.data.code&&"200"==t.data.code?(e.$message({message:"成功",type:"success"}),e.closeTag()):e.$message({message:t.data.msg,type:"error"}),e.isDisable=!1}).catch(function(t){e.isDisable=!1})}},closeTag:function(){var e=this,t=void 0;this.$store.state.tagsList.forEach(function(a,s){a.name==e.$options.name&&(t=s)});var a=this.$store.state.tagsList.splice(t,1)[0];(this.$store.state.tagsList[t]?this.$store.state.tagsList[t]:this.$store.state.tagsList[t-1])?a.path===this.$route.fullPath&&this.$router.push("/orderReceive"):this.$router.push("/index")},retract:function(){this.thisshow=!this.thisshow,this.retracts=!this.retracts},showexamine:function(e){this.exaform.status=e,this.dialogVisible2=!0},toexamine:function(){var e=this,t=a("1nuA"),s={};s.id=this.myform.id,s.recordId=this.myform.examineRecordId,s.pId=this.$store.state.ispId,s.status=this.exaform.status,s.remarks=this.exaform.remarks;var i=!1;s.remarks||(e.$message({message:"审核意见不能为空",type:"error"}),i=!0),i||m()({method:"post",url:e.$store.state.defaultHttp+"examineRecord/auditExamine.do?cId="+e.$store.state.iscId,data:t.stringify(s)}).then(function(t){t.data.code&&"200"==t.data.code?(e.$message({message:"操作成功",type:"success"}),e.dialogVisible2=!1,e.exaform.status=null,e.exaform.remarks=null,e.$options.methods.loadData.bind(e)()):e.$message({message:t.data.msg,type:"error"})}).catch(function(t){e.$message.error("审核失败，请稍后再试")})}}}),u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"orderadd_c"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"bold_span"},[e._v("订单收款单"),a("span",{staticClass:"bold_span"},[e._v("："+e._s(e.myform.backNo))])]),e._v(" "),a("el-button",{staticClass:"info-btn",staticStyle:{float:"right","margin-left":"10px"},attrs:{size:"mini"},on:{click:function(t){e.retract()}}},[e._v("审核")])],1),e._v(" "),a("div",{staticClass:"orderHead"},[a("el-form",{ref:"myform",attrs:{inline:!0,model:e.myform,rules:e.rules}},[a("el-form-item",{staticClass:"first_input",attrs:{prop:"customerpool_id",label:"公司名称","label-width":"90px"}},[a("el-select",{staticClass:"inputbox",attrs:{disabled:0!==e.myform.checkStatus,placeholder:"请选择公司名称",filterable:""},on:{change:e.selectCustomer},model:{value:e.myform.customerpool_id,callback:function(t){e.$set(e.myform,"customerpool_id",t)},expression:"myform.customerpool_id"}},e._l(e.customerList,function(e){return a("el-option",{key:e.id,attrs:{label:e.pName,value:e.id}})}))],1),e._v(" "),a("el-form-item",{staticClass:"first_input",attrs:{prop:"createTime",label:"收款日期","label-width":"90px"}},[a("el-date-picker",{staticClass:"inputbox",attrs:{disabled:0!==e.myform.checkStatus,type:"date",placeholder:"选择收款日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.myform.createTime,callback:function(t){e.$set(e.myform,"createTime",t)},expression:"myform.createTime"}})],1),e._v(" "),a("el-form-item",{staticClass:"first_input",attrs:{prop:"pay_type_id",label:"收款方式","label-width":"90px"}},[a("el-select",{staticClass:"inputbox",attrs:{disabled:0!==e.myform.checkStatus,placeholder:"请选择收款方式"},model:{value:e.myform.pay_type_id,callback:function(t){e.$set(e.myform,"pay_type_id",t)},expression:"myform.pay_type_id"}},e._l(e.payTypeMethod,function(e){return a("el-option",{key:e.id,attrs:{label:e.typeName,value:e.id}})}))],1),e._v(" "),a("el-form-item",{staticClass:"first_input",attrs:{label:"收款总金额","label-width":"90px"}},[a("el-input",{staticClass:"inputbox",attrs:{disabled:0!==e.myform.checkStatus,disabled:""},model:{value:e.myform.money,callback:function(t){e.$set(e.myform,"money",t)},expression:"myform.money"}})],1),e._v(" "),a("el-form-item",{staticClass:"first_input",attrs:{prop:"discountAfter",label:"折后金额","label-width":"90px"}},[a("el-input",{staticClass:"inputbox",attrs:{disabled:0!==e.myform.checkStatus},on:{input:e.inputDiscountAfter},model:{value:e.myform.discountAfter,callback:function(t){e.$set(e.myform,"discountAfter",t)},expression:"myform.discountAfter"}})],1),e._v(" "),a("el-form-item",{staticClass:"first_input",attrs:{label:"折扣额","label-width":"90px"}},[a("el-input",{staticClass:"inputbox",attrs:{disabled:0!==e.myform.checkStatus,disabled:""},model:{value:e.myform.discountAmount,callback:function(t){e.$set(e.myform,"discountAmount",t)},expression:"myform.discountAmount"}})],1),e._v(" "),a("el-form-item",{staticClass:"first_input",attrs:{label:"折扣率","label-width":"90px"}},[a("el-input",{staticClass:"inputbox",attrs:{disabled:0!==e.myform.checkStatus,disabled:""},model:{value:e.myform.discount,callback:function(t){e.$set(e.myform,"discount",t)},expression:"myform.discount"}},[a("span",{staticStyle:{"margin-right":"5px","line-height":"34px"},attrs:{slot:"suffix"},slot:"suffix"},[e._v("%")])])],1),e._v(" "),a("el-form-item",{staticClass:"first_input",attrs:{label:"备注","label-width":"90px"}},[a("el-input",{staticClass:"inputbox",attrs:{disabled:0!==e.myform.checkStatus},model:{value:e.myform.remarks,callback:function(t){e.$set(e.myform,"remarks",t)},expression:"myform.remarks"}})],1),e._v(" "),e._l(e.previewData,function(t){return a("el-form-item",{key:t.id,staticClass:"first_input",staticStyle:{"margin-right":"15px"},attrs:{label:t.name,prop:t.field_name,"label-width":"90px"}},["text"==t.formType||"email"==t.formType?a("el-input",{staticClass:"inputbox",attrs:{disabled:0!==e.myform.checkStatus,placeholder:t.input_tips},model:{value:t.default_value,callback:function(a){e.$set(t,"default_value",a)},expression:"item.default_value"}}):"textarea"==t.formType?a("el-input",{staticClass:"inputbox",attrs:{disabled:0!==e.myform.checkStatus,type:"textarea",maxlength:t.max_length,placeholder:t.input_tips},model:{value:t.default_value,callback:function(a){e.$set(t,"default_value",a)},expression:"item.default_value"}}):"number"==t.formType?a("el-input",{staticClass:"inputbox",attrs:{disabled:0!==e.myform.checkStatus,onkeyup:"value=value.replace(/[^\\d]/g,'')",placeholder:t.input_tips},model:{value:t.default_value,callback:function(a){e.$set(t,"default_value",a)},expression:"item.default_value"}}):"floatnumber"==t.formType?a("el-input",{staticClass:"inputbox",attrs:{disabled:0!==e.myform.checkStatus,onkeyup:"value=value.replace(/^\\D*(\\d*(?:\\.\\d{0,2})?).*$/g, '$1')",placeholder:t.input_tips},model:{value:t.default_value,callback:function(a){e.$set(t,"default_value",a)},expression:"item.default_value"}}):"mobile"==t.formType?a("el-input",{staticClass:"inputbox",attrs:{disabled:0!==e.myform.checkStatus,onkeyup:"value=value.replace(/[^\\d]/g,'')",maxlength:11,placeholder:t.input_tips},model:{value:t.default_value,callback:function(a){e.$set(t,"default_value",a)},expression:"item.default_value"}}):"select"==t.formType?a("el-select",{staticClass:"inputbox",attrs:{disabled:0!==e.myform.checkStatus,placeholder:t.input_tips},model:{value:t.default_value,callback:function(a){e.$set(t,"default_value",a)},expression:"item.default_value"}},e._l(t.setting,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})):"checkbox"==t.formType?a("el-select",{staticClass:"inputbox",attrs:{disabled:0!==e.myform.checkStatus,multiple:"",placeholder:t.input_tips},model:{value:t.default_value,callback:function(a){e.$set(t,"default_value",a)},expression:"item.default_value"}},e._l(t.setting,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})):"user"==t.formType?a("el-select",{staticClass:"inputbox",attrs:{disabled:0!==e.myform.checkStatus,placeholder:t.input_tips},model:{value:t.default_value,callback:function(a){e.$set(t,"default_value",a)},expression:"item.default_value"}},e._l(e.userData,function(e){return a("el-option",{key:e.private_id,attrs:{label:e.private_employee,value:e.private_id}})})):"structure"==t.formType?a("el-select",{staticClass:"noPadding_select inputbox",attrs:{disabled:0!==e.myform.checkStatus,placeholder:t.input_tips},model:{value:t.displayVal,callback:function(a){e.$set(t,"displayVal",a)},expression:"item.displayVal"}},[a("el-option",{staticClass:"droplist nopadding_option",attrs:{value:t.displayVal}},[a("el-tree",{ref:"tree",refInFor:!0,attrs:{"node-key":"deptid","highlight-current":"","default-expand-all":"","expand-on-click-node":!1,data:e.deptData,props:e.defaultProps},on:{"node-click":function(a){e.handlecheck(a,t)}}})],1)],1):"date"==t.formType?a("el-date-picker",{staticClass:"inputbox",attrs:{disabled:0!==e.myform.checkStatus,type:"date",placeholder:t.input_tips,format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.default_value,callback:function(a){e.$set(t,"default_value",a)},expression:"item.default_value"}}):"datetime"==t.formType?a("el-date-picker",{staticClass:"inputbox",attrs:{disabled:0!==e.myform.checkStatus,type:"datetime",placeholder:t.input_tips,format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.default_value,callback:function(a){e.$set(t,"default_value",a)},expression:"item.default_value"}}):"file"==t.formType?a("el-upload",{staticClass:"upload-demo",attrs:{disabled:0!==e.myform.checkStatus,action:e.doUpload,"on-success":e.uploadSuccess,"before-upload":e.beforeUpload}},[a("el-button",{staticClass:"info-btn",attrs:{size:"mini"}},[e._v("上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",staticStyle:{"margin-top":"-20px"},attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(t.input_tips))])],1):e._e()],1)})],2)],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.thisshow,expression:"thisshow"}],staticClass:"jobclass_line"}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.thisshow,expression:"thisshow"}]},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-popover",{attrs:{placement:"right-start",width:"220",trigger:"click"}},[a("div",{staticStyle:{"max-height":"400px","overflow-y":"overlay"}},e._l(e.examineLog,function(t,s){return a("div",{key:s,staticClass:"examine_popover"},[a("span",{staticClass:"examine_ico"},[0==t.examineStatus?a("i",{staticClass:"el-icon-time",staticStyle:{"font-size":"20px"}}):e._e(),e._v(" "),1==t.examineStatus?a("i",{staticClass:"el-icon-circle-check-outline",staticStyle:{color:"#67c23a","font-size":"20px"}}):e._e(),e._v(" "),2==t.examineStatus?a("i",{staticClass:"el-icon-circle-close-outline",staticStyle:{color:"#f56c6c","font-size":"20px"}}):e._e(),e._v(" "),3==t.examineStatus?a("i",{staticClass:"el-icon-time",staticStyle:{color:"#e6a23c","font-size":"20px"}}):e._e(),e._v(" "),5==t.examineStatus?a("i",{staticClass:"el-icon-circle-plus-outline",staticStyle:{color:"#67c23a","font-size":"20px"}}):e._e()]),e._v(" "),a("div",{staticClass:"examint_msg"},[a("p",{staticStyle:{"font-size":"13px",color:"#aaaaaa"}},[e._v(e._s(t.examineTime))]),e._v(" "),1==t.examineStatus?a("p",[e._v(e._s(t.realname+" 已审核"))]):e._e(),e._v(" "),2==t.examineStatus?a("p",[e._v(e._s(t.realname+" 已拒绝"))]):e._e(),e._v(" "),a("div",{staticClass:"examint_remark"},[a("p",[e._v(e._s(t.remarks))])])])])})),e._v(" "),a("span",{staticStyle:{"font-size":"14px","text-decoration":"underline"},attrs:{slot:"reference"},slot:"reference"},[e._v("查看审核历史")])]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.hasCheck&&2!==e.orderReceiveDetailData.checkStatus,expression:"hasCheck && orderReceiveDetailData.checkStatus !== 2"}],staticClass:"info-btn",staticStyle:{float:"right"},attrs:{size:"mini"},on:{click:function(t){e.showexamine(1)}}},[e._v("通过")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.hasCheck&&2!==e.orderReceiveDetailData.checkStatus,expression:"hasCheck && orderReceiveDetailData.checkStatus !== 2"}],staticClass:"info-btn",staticStyle:{float:"right"},attrs:{size:"mini"},on:{click:function(t){e.showexamine(2)}}},[e._v("拒绝")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.hasCheck,expression:"hasCheck"}],staticClass:"info-btn",staticStyle:{float:"right"},attrs:{size:"mini"},on:{click:function(t){e.showexamine(4)}}},[e._v("驳回")])],1),e._v(" "),a("div",{staticClass:"text item"},[a("div",{staticClass:"examine_c"},e._l(e.examineList,function(t,s){return a("div",{key:s,staticClass:"examine_item"},[a("el-popover",{staticClass:"examine_cont",attrs:{placement:"bottom",width:"200",trigger:"hover"}},[e._l(t.userList,function(t,s){return a("div",{key:s,staticClass:"examine_popover"},[a("span",{staticClass:"examine_ico"},[0==t.examineStatus?a("i",{staticClass:"el-icon-time",staticStyle:{"font-size":"20px"}}):e._e(),e._v(" "),1==t.examineStatus?a("i",{staticClass:"el-icon-success",staticStyle:{color:"#67c23a","font-size":"18px"}}):e._e(),e._v(" "),2==t.examineStatus?a("i",{staticClass:"el-icon-circle-close",staticStyle:{color:"#f56c6c","font-size":"20px"}}):e._e(),e._v(" "),3==t.examineStatus?a("i",{staticClass:"el-icon-time",staticStyle:{color:"#e6a23c","font-size":"20px"}}):e._e(),e._v(" "),5==t.examineStatus?a("i",{staticClass:"el-icon-circle-plus",staticStyle:{color:"#67c23a","font-size":"20px"}}):e._e()]),e._v(" "),a("div",{staticClass:"examint_msg"},[a("p",{staticStyle:{"font-size":"13px",color:"#aaaaaa"}},[e._v(e._s(t.examineTime))]),e._v(" "),a("p",[e._v(e._s(t.realname+"("+t.phone+")"))]),e._v(" "),0==t.examineStatus?a("p",[e._v("未审核此申请")]):e._e(),e._v(" "),1==t.examineStatus?a("p",[e._v("通过此申请")]):e._e(),e._v(" "),2==t.examineStatus?a("p",[e._v("拒绝此申请")]):e._e(),e._v(" "),5==t.examineStatus?a("p",[e._v("创建此申请")]):e._e()])])}),e._v(" "),a("div",{staticStyle:{width:"100%"},attrs:{slot:"reference"},slot:"reference"},[5==t.examineStatus||4==t.examineStatus?a("span",{staticClass:"examine_po"},[a("img",{staticClass:"examine_img",attrs:{src:t.headPortrait,width:"50",height:"50"}})]):e._e(),e._v(" "),2==t.stepType?a("span",{staticClass:"examine_po1"},[a("img",{staticClass:"examine_img",class:{mohu:1!==t.examineStatus},attrs:{src:t.headPortrait,width:"50",height:"50"}})]):e._e(),e._v(" "),3==t.stepType?a("div",{staticStyle:{display:"inline-block",margin:"0 15px"},style:t.type_style},e._l(t.userList,function(e,t){return a("span",{key:t,staticClass:"examine_po2"},[a("img",{staticClass:"examine_img",class:{mohu:0==e.examineStatus},attrs:{src:e.headPortrait,width:"50",height:"50"}})])})):e._e(),e._v(" "),a("br"),e._v(" "),t.examineUserName?a("span",{staticClass:"examine_type"},[e._v(e._s(t.examineUserName))]):e._e(),e._v(" "),2==t.stepType?a("span",{staticClass:"examine_type"},[e._v(e._s(t.userLength+"人或签"))]):e._e(),e._v(" "),3==t.stepType?a("span",{staticClass:"examine_type"},[e._v(e._s(t.userLength+"人会签"))]):e._e(),e._v(" "),a("br"),e._v(" "),0==t.examineStatus&&1==s?a("span",{staticClass:"examine_status"},[e._v("一级审核")]):e._e(),e._v(" "),0==t.examineStatus&&2==s?a("span",{staticClass:"examine_status"},[e._v("二级审核")]):e._e(),e._v(" "),0==t.examineStatus&&3==s?a("span",{staticClass:"examine_status"},[e._v("三级审核")]):e._e(),e._v(" "),0==t.examineStatus&&4==s?a("span",{staticClass:"examine_status"},[e._v("四级审核")]):e._e(),e._v(" "),0==t.examineStatus&&5==s?a("span",{staticClass:"examine_status"},[e._v("五级审核")]):e._e(),e._v(" "),0==t.examineStatus&&6==s?a("span",{staticClass:"examine_status"},[e._v("六级审核")]):e._e(),e._v(" "),1==t.examineStatus?a("span",{staticClass:"examine_status"},[a("i",{staticClass:"el-icon-success",staticStyle:{color:"#67c23a","font-size":"15px"}}),e._v(" 已审核")]):e._e(),e._v(" "),2==t.examineStatus?a("span",{staticClass:"examine_status"},[a("i",{staticClass:"el-icon-circle-close",staticStyle:{color:"#f56c6c","font-size":"18px"}}),e._v(" 未通过")]):e._e(),e._v(" "),3==t.examineStatus?a("span",{staticClass:"examine_status"},[a("i",{staticClass:"el-icon-time",staticStyle:{color:"#e6a23c","font-size":"18px"}}),e._v(" 审核中")]):e._e(),e._v(" "),5==t.examineStatus?a("span",{staticClass:"examine_status"},[a("i",{staticClass:"el-icon-circle-plus",staticStyle:{color:"#67c23a","font-size":"18px"}}),e._v(" 发起")]):e._e()])],2),e._v(" "),s!==e.examineList.length-1?a("span",{staticClass:"examine_next"},[a("i",{staticClass:"el-icon-arrow-right"})]):e._e()],1)}))])])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.thisshow,expression:"!thisshow"}]}),e._v(" "),a("div",{staticClass:"entry"},[0==e.myform.checkStatus?a("el-button",{staticClass:"btn info-btn",attrs:{size:"mini",icon:"el-icon-circle-plus-outline"},on:{click:e.handleAdd}}):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.itemData,border:"",fit:"","highlight-current-row":"","show-summary":"","summary-method":e.getSummary},on:{"cell-click":e.cellClick}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",fixed:"",type:"index","min-width":"45"}}),e._v(" "),a("el-table-column",{attrs:{label:"销售单号",prop:"orderNo","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-select",{attrs:{placeholder:"请选择",filterable:""},on:{focus:function(a){e.handleFoces(t.$index,t.row)},change:e.selectOrder},model:{value:t.row.orderNo,callback:function(a){e.$set(t.row,"orderNo",a)},expression:"scope.row.orderNo"}},e._l(e.selectData,function(e,t){return a("el-option",{key:t,staticClass:"droplist",attrs:{label:e.orderNo,value:e.orderNo}})}))]:a("span",[e._v(e._s(t.row.orderNo))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"订单日期",prop:"orderTime",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"订单金额",prop:"order_money",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"已收金额",prop:"accepted_money",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"未收款金额",prop:"uncollected_money",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"本次回款金额",prop:"this_money","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},on:{input:function(a){e.handleinput(a,t.$index,t.row)}},model:{value:t.row.this_money,callback:function(a){e.$set(t.row,"this_money",a)},expression:"scope.row.this_money"}})]:a("span",[e._v(e._s(t.row.this_money))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注",prop:"remarks","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.remarks,callback:function(a){e.$set(t.row,"remarks",a)},expression:"scope.row.remarks"}})]:a("span",[e._v(e._s(t.row.remarks))])]}}])}),e._v(" "),0==e.myform.checkStatus?a("el-table-column",{attrs:{align:"center",label:"操作",width:"90",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{width:"30px",height:"30px",padding:"0"},attrs:{type:"success",plain:"",disabled:!t.row.edit,icon:"el-icon-circle-check-outline"},on:{click:function(a){e.rowEdit(t.row)}}}),e._v(" "),a("el-button",{staticStyle:{width:"30px",height:"30px",padding:"0"},attrs:{type:"danger",plain:"",icon:"el-icon-delete"},on:{click:function(a){e.rowDelete(t.$index,t.row)}}})]}}])}):e._e()],1),e._v(" "),a("el-form",{ref:"myform",staticClass:"uploadForm",attrs:{inline:!0,model:e.myform}},[a("el-form-item",{attrs:{label:"上传附件","label-width":"90px"}},[a("el-upload",{staticClass:"upload-demo",attrs:{disabled:0!==e.myform.checkStatus,"file-list":e.filesData,action:e.doUpload,multiple:!0,limit:3,"on-success":e.fileUploadSuccess,"before-upload":e.beforeUpload,"on-exceed":e.uploadExceed}},[a("el-button",{attrs:{size:"mini",type:"info-btn"}},[e._v("上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",staticStyle:{"margin-top":"-20px"},attrs:{slot:"tip"},slot:"tip"},[e._v("附件大小不能超过5M，最多可上传3个")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"上传图片","label-width":"90px"}},[a("el-upload",{staticClass:"upload-demo",attrs:{disabled:0!==e.myform.checkStatus,"file-list":e.imagesData,action:e.doUpload,multiple:!0,limit:3,"on-success":e.imageUploadSuccess,"before-upload":e.beforeUpload,"on-exceed":e.uploadExceed}},[a("el-button",{attrs:{size:"mini",type:"info-btn"}},[e._v("上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",staticStyle:{"margin-top":"-20px"},attrs:{slot:"tip"},slot:"tip"},[e._v("图片大小不能超过5M，最多可上传3个")])],1)],1)],1),e._v(" "),0==e.myform.checkStatus?a("div",{staticClass:"submit_btn"},[a("el-button",{staticStyle:{"margin-right":"100px"},attrs:{type:"primary",disabled:e.isDisable},on:{click:e.onSubmit}},[e._v("立即提交")]),e._v(" "),a("el-button",{on:{click:e.closeTag}},[e._v("取消")])],1):e._e(),e._v(" "),a("el-form",{staticClass:"disabledForm",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"制单人","label-width":"110px"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.myform.private_employee,callback:function(t){e.$set(e.myform,"private_employee",t)},expression:"myform.private_employee"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人","label-width":"110px"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.myform.ascription,callback:function(t){e.$set(e.myform,"ascription",t)},expression:"myform.ascription"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门","label-width":"110px"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.myform.deptname,callback:function(t){e.$set(e.myform,"deptname",t)},expression:"myform.deptname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"机构","label-width":"110px"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.myform.parentname,callback:function(t){e.$set(e.myform,"parentname",t)},expression:"myform.parentname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"制单时间","label-width":"110px"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.myform.makingTime,callback:function(t){e.$set(e.myform,"makingTime",t)},expression:"myform.makingTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"审核完成时间","label-width":"110px"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.myform.checkTime,callback:function(t){e.$set(e.myform,"checkTime",t)},expression:"myform.checkTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"耗时","label-width":"110px"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.myform.takeupTime,callback:function(t){e.$set(e.myform,"takeupTime",t)},expression:"myform.takeupTime"}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"审核意见","close-on-click-modal":!1,visible:e.dialogVisible2,width:"40%"},on:{"update:visible":function(t){e.dialogVisible2=t}}},[a("el-form",{ref:"exaform",attrs:{model:e.exaform,rules:e.rules}},[a("el-form-item",{attrs:{prop:"remarks"}},[a("el-input",{attrs:{type:"textarea",rows:"5",placeholder:"请输入审核意见（必填）"},model:{value:e.exaform.remarks,callback:function(t){e.$set(e.exaform,"remarks",t)},expression:"exaform.remarks"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible2=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.toexamine()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(d,u,!1,function(e){a("IppD")},null,null);t.default=p.exports}});