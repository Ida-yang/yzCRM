webpackJsonp([53],{A0z7:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("wtEF"),i=l("mtWM"),o=l.n(i),d=(l("mw3O"),{name:"customer",store:a.a,data:function(){return{msg:"自定义字段",cardList:[],previewData:[],fieldsform:{},rules:{},dialogVisible:!1}},activated:function(){this.loadData()},mounted:function(){this.loadData()},methods:{loadData:function(){var e=this;o()({method:"get",url:e.$store.state.defaultHttp+"field/queryFieldType.do?cId="+e.$store.state.iscId}).then(function(t){var l=t.data;l.forEach(function(e){1==e.label?(e.module_name="线索管理",e.field_img="../../../../../static/img/field_img/clue.png",e.bgcolor="background-color: rgb(108, 162, 255);"):2==e.label?(e.module_name="客户管理",e.field_img="../../../../../static/img/field_img/customer.png",e.bgcolor="background-color: rgb(125, 211, 100);"):3==e.label?(e.module_name="联系人管理",e.field_img="../../../../../static/img/field_img/contact.png",e.bgcolor="background-color: rgb(128, 191, 255);"):4==e.label?(e.module_name="产品管理",e.field_img="../../../../../static/img/field_img/product.png",e.bgcolor="background-color: rgb(238, 205, 47);"):5==e.label?(e.module_name="商机管理",e.field_img="../../../../../static/img/field_img/opportunity.png",e.bgcolor="background-color: rgb(92, 173, 255);"):6==e.label?(e.module_name="合同管理",e.field_img="../../../../../static/img/field_img/agreement.png",e.bgcolor="background-color: rgb(114, 221, 207);"):7==e.label?(e.module_name="合同回款管理",e.field_img="../../../../../static/img/field_img/backMoney.png",e.bgcolor="background-color: rgb(106, 201, 215);"):8==e.label?(e.module_name="回款计划管理",e.field_img="../../../../../static/img/field_img/planMoney.png",e.bgcolor="background-color: rgb(209, 218, 103);"):9==e.label?(e.module_name="订单管理",e.field_img="../../../../../static/img/field_img/order.png",e.bgcolor="background-color: rgb(114, 207, 141);"):10==e.label?(e.module_name="办公管理",e.field_img="../../../../../static/img/field_img/order.png",e.bgcolor="background-color: rgb(114, 207, 141);"):11==e.label?(e.module_name="工单管理",e.field_img="../../../../../static/img/field_img/order.png",e.bgcolor="background-color: rgb(114, 207, 141);"):12==e.label&&(e.module_name="订单收款管理",e.field_img="../../../../../static/img/field_img/order.png",e.bgcolor="background-color: rgb(114, 207, 141);")}),e.cardList=l}).catch(function(e){})},toUpdateItem:function(e,t){this.$store.state.customFieldData=t,this.$router.push({path:"/customFieldsUpdate"})},topreview:function(e,t){var a=this,i=l("1nuA"),d={label:t.label};o()({method:"post",url:a.$store.state.defaultHttp+"field/list.do?cId="+a.$store.state.iscId,data:i.stringify(d)}).then(function(e){var t=e.data,l=new Array;t.forEach(function(e){1==e.is_null&&(a.rules[e.field_name]=[{required:!0,message:" "}]),0==e.is_sys&&l.push(e)}),a.previewData=l,a.dialogVisible=!0}).catch(function(e){})}}}),s={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"field_wrap"},[l("el-card",{staticClass:"box-card field_box"},[l("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[l("span",[e._v("自定义字段设置")])]),e._v(" "),l("div",{staticClass:"text item"},e._l(e.cardList,function(t){return l("div",{key:t.label,staticClass:"field_card"},[l("div",{staticClass:"field_item"},[l("span",{staticClass:"field_span",style:t.bgcolor},[l("img",{attrs:{src:t.field_img,width:"18",height:"18"}})]),e._v(" "),l("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.module_name))])]),e._v(" "),l("div",{staticClass:"field_item",staticStyle:{color:"#919191"}},[e._v(e._s(t.update_time)+" 更新")]),e._v(" "),l("div",{staticClass:"field_item",staticStyle:{"justify-content":"flex-end",color:"#ff6333"}},[l("span",{staticStyle:{cursor:"pointer","margin-right":"20px"},on:{click:function(l){e.toUpdateItem(l,t)}}},[e._v("修 改")]),e._v(" "),l("span",{staticStyle:{cursor:"pointer"},on:{click:function(l){e.topreview(l,t)}}},[e._v("预 览")])])])}))]),e._v(" "),l("el-dialog",{staticClass:"preview_dialog",attrs:{title:"自定义字段",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("div",{staticClass:"preview_dialog_body"},[l("el-form",{ref:"attributeform",attrs:{model:e.fieldsform,"label-width":"80px",rules:e.rules}},e._l(e.previewData,function(t,a){return l("el-form-item",{key:a,attrs:{label:t.name,prop:t.field_name}},["text"==t.formType||"email"==t.formType?l("el-input",{staticStyle:{width:"240px"},attrs:{disabled:"",placeholder:t.input_tips},model:{value:t.default_value,callback:function(l){e.$set(t,"default_value",l)},expression:"item.default_value"}}):"textarea"==t.formType?l("el-input",{staticStyle:{width:"240px"},attrs:{disabled:"",type:"textarea",maxlength:t.max_length,placeholder:t.input_tips},model:{value:t.default_value,callback:function(l){e.$set(t,"default_value",l)},expression:"item.default_value"}}):"number"==t.formType?l("el-input",{staticStyle:{width:"240px"},attrs:{disabled:"",onkeyup:"value=value.replace(/[^\\d]/g,'')",placeholder:t.input_tips},model:{value:t.default_value,callback:function(l){e.$set(t,"default_value",l)},expression:"item.default_value"}}):"floatnumber"==t.formType?l("el-input",{staticStyle:{width:"240px"},attrs:{disabled:"",onkeyup:"value=value.replace(/^\\D*(\\d*(?:\\.\\d{0,2})?).*$/g, '$1')",placeholder:t.input_tips},model:{value:t.default_value,callback:function(l){e.$set(t,"default_value",l)},expression:"item.default_value"}}):"mobile"==t.formType?l("el-input",{staticStyle:{width:"240px"},attrs:{disabled:"",onkeyup:"value=value.replace(/[^\\d]/g,'')",maxlength:11,placeholder:t.input_tips},model:{value:t.default_value,callback:function(l){e.$set(t,"default_value",l)},expression:"item.default_value"}}):"select"==t.formType?l("el-select",{staticStyle:{width:"240px"},attrs:{disabled:"",placeholder:t.input_tips},model:{value:t.default_value,callback:function(l){e.$set(t,"default_value",l)},expression:"item.default_value"}}):"checkbox"==t.formType?l("el-select",{staticStyle:{width:"240px"},attrs:{multiple:"",disabled:"",placeholder:t.input_tips},model:{value:t.default_value,callback:function(l){e.$set(t,"default_value",l)},expression:"item.default_value"}}):"user"==t.formType||"structure"==t.formType?l("el-select",{staticStyle:{width:"240px"},attrs:{disabled:"",multiple:"",placeholder:t.input_tips},model:{value:t.default_value,callback:function(l){e.$set(t,"default_value",l)},expression:"item.default_value"}}):"date"==t.formType?l("el-date-picker",{staticStyle:{width:"240px"},attrs:{disabled:"",type:"date",placeholder:t.input_tips,format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.default_value,callback:function(l){e.$set(t,"default_value",l)},expression:"item.default_value"}}):"datetime"==t.formType?l("el-date-picker",{staticStyle:{width:"240px"},attrs:{disabled:"",type:"datetime",placeholder:t.input_tips,format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.default_value,callback:function(l){e.$set(t,"default_value",l)},expression:"item.default_value"}}):"file"==t.formType?l("el-button",{staticClass:"info-btn",attrs:{disabled:"",size:"mini"}},[e._v("上传")]):e._e(),e._v(" "),"file"==t.formType?l("div",{staticClass:"el-upload__tip",staticStyle:{"line-height":"16px"}},[e._v(e._s(t.input_tips))]):e._e()],1)}))],1),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{size:"medium"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var r=l("VU/8")(d,s,!1,function(e){l("fDzN")},null,null);t.default=r.exports},fDzN:function(e,t){}});