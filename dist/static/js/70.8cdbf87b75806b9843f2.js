webpackJsonp([70],{AA0V:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("wtEF"),s=i("mtWM"),a=i.n(s),o=(i("mw3O"),{name:"cusportrait",store:n.a,data:function(){return{msg:"cusportrait.vue",cusportraitData:[],personalList:[{index:"1",name:"性别",isActive:!0},{index:"2",name:"年龄",isActive:!1},{index:"3",name:"职业",isActive:!1},{index:"4",name:"岗位",isActive:!1},{index:"5",name:"学历",isActive:!1}],familyList:[{index:"6",name:"婚姻状况",isActive:!1},{index:"7",name:"家庭人数",isActive:!1},{index:"8",name:"子女人数",isActive:!1},{index:"9",name:"父母人数",isActive:!1},{index:"10",name:"年收入",isActive:!1}],interestList:[{index:"11",name:"行为爱好",isActive:!1},{index:"12",name:"阅读兴趣",isActive:!1},{index:"13",name:"社交兴趣",isActive:!1},{index:"14",name:"运动兴趣",isActive:!1},{index:"19",name:"影视兴趣",isActive:!1},{index:"20",name:"音乐兴趣",isActive:!1},{index:"21",name:"饮食兴趣",isActive:!1}],consumptionList:[{index:"15",name:"手机兴趣",isActive:!1},{index:"16",name:"品牌兴趣",isActive:!1},{index:"17",name:"车辆兴趣",isActive:!1},{index:"18",name:"品茶兴趣",isActive:!1},{index:"22",name:"服饰兴趣",isActive:!1}],enterpriseList:[{index:"23",name:"大行业",isActive:!1},{index:"24",name:"小行业",isActive:!1},{index:"25",name:"企业规模",isActive:!1},{index:"26",name:"成立年限",isActive:!1},{index:"27",name:"是否上市",isActive:!1},{index:"28",name:"是否融资",isActive:!1},{index:"29",name:"经营状态",isActive:!1},{index:"30",name:"企业类型",isActive:!1}],otherList:[],valIndex:"1",newform:{type:"性别",id:null,parentid:null,typeName:null,note:null},rules:{type:[{required:!0,message:"画像类别名称不能为空",trigger:"blur"}],typeName:[{required:!0,message:"画像值不能为空",trigger:"blur"}]},dialogVisible:!1,disabledBtn:!0}},mounted:function(){this.loadOtherType(),this.loadData()},activated:function(){this.loadData()},methods:{loadData:function(){var e=this,t=i("1nuA"),n={};n.type=this.newform.type,a()({method:"post",url:e.$store.state.defaultHttp+"portraitType/getPortraitTypeGroupByType.do?cId="+e.$store.state.iscId,data:t.stringify(n)}).then(function(t){e.cusportraitData=t.data}).catch(function(e){})},loadOtherType:function(){var e=this;a()({method:"get",url:e.$store.state.defaultHttp+"portraitType/getOthersPortraitType.do?cId="+e.$store.state.iscId}).then(function(t){e.otherList=t.data.portraitTypes}).catch(function(e){})},showTableval:function(e){this.valIndex=e.index,this.newform.type=e.name,e.isActive=!e.isActive,e.id?(this.newform.parentid=e.id,this.disabledBtn=!1):(this.newform.parentid=null,this.disabledBtn=!0),this.$options.methods.loadData.bind(this)(!0)},handleAdd:function(){this.newform.id=null,this.newform.typeName=null,this.newform.notes=null,this.dialogVisible=!0},handleEdit:function(e,t){this.newform.id=t.id,this.newform.typeName=t.typeName,this.newform.notes=t.notes,this.dialogVisible=!0},handledelete:function(e,t){var n=this,s=i("1nuA"),o={};o.id=t.id;var r=!1;1==this.cusportraitData.length&&(n.$message({message:"至少保留一条数据",type:"error"}),r=!0),r||n.$confirm("确认删除 ["+t.typeName+"] 吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){e.value;a()({method:"post",url:n.$store.state.defaultHttp+"portraitType/deletePortraitTypeById.do?cId="+n.$store.state.iscId,data:s.stringify(o)}).then(function(e){e.data.code&&"200"==e.data.code?(n.$message({message:"操作成功",type:"success"}),n.$options.methods.loadData.bind(n)()):n.$message({message:e.data.msg,type:"error"})}).catch(function(e){})}).catch(function(){n.$message({type:"info",message:"取消删除【"+t.typeName+"】"})})},submit:function(){var e=this,t=i("1nuA"),n=!1,s="",o={};this.newform.parentid?(o={id:this.newform.id,parentid:this.newform.parentid,parentname:this.newform.type,typeName:this.newform.typeName,notes:this.newform.notes},n=!0,s=e.$store.state.defaultHttp+"portraitType/saveOrUpdateOthersPortrait.do?cId="+e.$store.state.iscId):(o={id:this.newform.id,type:this.newform.type,typeName:this.newform.typeName,notes:this.newform.notes},n=!1,s=e.$store.state.defaultHttp+"portraitType/saveOrUpdate.do?cId="+e.$store.state.iscId);var r=!1;o.typeName||(e.$message({message:"画像值不能为空",type:"error"}),r=!0),o.parentid&&!o.parentname&&(e.$message({message:"画像类别名称不能为空",type:"error"}),r=!0),r||a()({method:"post",url:s,data:t.stringify(o)}).then(function(t){t.data.code&&"200"==t.data.code?(e.$message({message:"操作成功",type:"success"}),e.dialogVisible=!1,n&&e.$options.methods.loadOtherType.bind(e)(),e.$options.methods.loadData.bind(e)()):e.$message({message:t.data.msg,type:"error"})}).catch(function(e){})}}}),r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"contentall"},[i("div",{staticClass:"setleftcontent"},[i("el-menu",{staticClass:"el-menu-vertical-demo base_menu",attrs:{"default-active":"1"}},[i("el-submenu",{attrs:{index:"1"}},[i("span",{attrs:{slot:"title"},slot:"title"},[e._v("个人画像")]),e._v(" "),e._l(e.personalList,function(t){return i("el-menu-item",{key:t.index,attrs:{index:t.index},on:{click:function(i){e.showTableval(t)}}},[e._v(e._s(t.name))])})],2),e._v(" "),i("el-submenu",{attrs:{index:"2"}},[i("span",{attrs:{slot:"title"},slot:"title"},[e._v("家庭画像")]),e._v(" "),e._l(e.familyList,function(t){return i("el-menu-item",{key:t.index,attrs:{index:t.index},on:{click:function(i){e.showTableval(t)}}},[e._v(e._s(t.name))])})],2),e._v(" "),i("el-submenu",{attrs:{index:"3"}},[i("span",{attrs:{slot:"title"},slot:"title"},[e._v("兴趣画像")]),e._v(" "),e._l(e.interestList,function(t){return i("el-menu-item",{key:t.index,attrs:{index:t.index},on:{click:function(i){e.showTableval(t)}}},[e._v(e._s(t.name))])})],2),e._v(" "),i("el-submenu",{attrs:{index:"4"}},[i("span",{attrs:{slot:"title"},slot:"title"},[e._v("消费画像")]),e._v(" "),e._l(e.consumptionList,function(t){return i("el-menu-item",{key:t.index,attrs:{index:t.index},on:{click:function(i){e.showTableval(t)}}},[e._v(e._s(t.name))])})],2),e._v(" "),i("el-submenu",{attrs:{index:"5"}},[i("span",{attrs:{slot:"title"},slot:"title"},[e._v("企业画像")]),e._v(" "),e._l(e.enterpriseList,function(t){return i("el-menu-item",{key:t.index,attrs:{index:t.index},on:{click:function(i){e.showTableval(t)}}},[e._v(e._s(t.name))])})],2),e._v(" "),i("el-submenu",{attrs:{index:"6"}},[i("span",{attrs:{slot:"title"},slot:"title"},[e._v("其他")]),e._v(" "),e._l(e.otherList,function(t){return i("el-menu-item",{key:t.index,attrs:{index:t.index},on:{click:function(i){e.showTableval(t)}}},[e._v(e._s(t.name))])})],2)],1)],1),e._v(" "),i("div",{staticClass:"setrightcontent"},[i("div",{staticClass:"entry"},[i("el-button",{staticClass:"btn info-btn",attrs:{size:"mini"},on:{click:function(t){e.handleAdd()}}},[e._v("新增")])],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.cusportraitData,border:"",stripe:""}},[i("el-table-column",{attrs:{"header-align":"center",align:"center",type:"index",width:"45"}}),e._v(" "),i("el-table-column",{attrs:{label:"名称",prop:"typeName","min-width":"120",sortable:""}}),e._v(" "),i("el-table-column",{attrs:{label:"备注",prop:"notes","min-width":"180",sortable:""}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"150","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){e.handledelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"添加画像",visible:e.dialogVisible,"close-on-click-modal":!1,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{ref:"newform",attrs:{model:e.newform,"label-width":"110px",rules:e.rules}},[i("el-form-item",{attrs:{prop:"type",label:"客户画像类别"}},[i("el-input",{attrs:{disabled:e.disabledBtn},model:{value:e.newform.type,callback:function(t){e.$set(e.newform,"type",t)},expression:"newform.type"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"typeName",label:"画像值"}},[i("el-input",{attrs:{placeholder:"请输入画像值"},model:{value:e.newform.typeName,callback:function(t){e.$set(e.newform,"typeName",t)},expression:"newform.typeName"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"notes",label:"备注"}},[i("el-input",{attrs:{type:"textarea",rows:"5",placeholder:"请输入备注"},model:{value:e.newform.notes,callback:function(t){e.$set(e.newform,"notes",t)},expression:"newform.notes"}})],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},l=i("VU/8")(o,r,!1,null,null,null);t.default=l.exports}});