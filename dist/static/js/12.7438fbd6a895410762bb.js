webpackJsonp([12],{Dosg:function(t,e){},Nmtr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("INCx"),i=a.n(s),n=a("wtEF"),l=a("mtWM"),r=a.n(l),o=(a("mw3O"),{name:"orderReceive",store:n.a,filters:{commaing:function(t){if(0!==t){var e=i()(t).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"),a=".00",s=t.toString().split(".");return 2===s.length?1===(a=s[1].toString()).length?e+"."+a+"0":e+"."+a:e+a}return 0}},computed:{tableData:function(){return n.a.state.orderReceiveList},tableNumber:function(){return n.a.state.orderReceiveListnumber}},data:function(){return{msg:"receive.vue",fieldHeadData:[],page:1,limit:20,searchList:{searchName:null,searchOption:"1",stateid:null,label:1},stateData:[{index:null,name:"全部"},{index:0,name:"待审核"},{index:1,name:"审核中"},{index:2,name:"已审核"},{index:3,name:"未通过"}],pIdData:[{index:0,name:"全部"},{index:1,name:"我的"},{index:2,name:"本组"},{index:3,name:"本机构"},{index:4,name:"待我审核"}],nullvalue:null,filterList:null,checklist:null}},activated:function(){this.loadFieldHead(),this.loadTable()},mounted:function(){this.loadFieldHead(),this.loadTable(),this.reloadData()},methods:{loadTable:function(){var t=this,e=a("1nuA"),s={};0==this.searchList.label?s.pId=t.nullvalue:1==this.searchList.label?s.pId=t.$store.state.ispId:2==this.searchList.label?s.secondid=t.$store.state.deptid:3==this.searchList.label?s.deptid=t.$store.state.insid:4==this.searchList.label&&(s.examine=t.$store.state.ispId),"1"==this.searchList.searchOption?s.searchName=this.searchList.searchName:"2"==this.searchList.searchOption&&(s.keyWord=this.searchList.searchName),s.stateid=this.searchList.stateid,s.page=this.page,s.limit=this.limit,s.label=12,r()({method:"post",url:t.$store.state.defaultHttp+"pageInfo/queryPageList.do?cId="+t.$store.state.iscId,data:e.stringify(s)}).then(function(e){var a=e.data.map.success;t.$store.state.orderReceiveList=a,t.$store.state.orderReceiveListnumber=e.data.count}).catch(function(t){})},loadFieldHead:function(){var t=this,e=a("1nuA"),s={label:12,pId:this.$store.state.ispId};r()({method:"post",url:t.$store.state.defaultHttp+"field/queryListHead.do?cId="+t.$store.state.iscId,data:e.stringify(s)}).then(function(e){t.fieldHeadData=e.data}).catch(function(t){})},reloadData:function(){var t=this,e=a("1nuA"),s={type:"订单收款"},i={type:"订单收款",state:1};r()({method:"post",url:t.$store.state.defaultHttp+"userPageInfo/getAllUserPage.do?cId="+t.$store.state.iscId+"&pId="+t.$store.state.ispId,data:e.stringify(s)}).then(function(e){t.filterList=e.data}).catch(function(t){}),r()({method:"post",url:t.$store.state.defaultHttp+"userPageInfo/getUserPage.do?cId="+t.$store.state.iscId+"&pId="+t.$store.state.ispId,data:e.stringify(i)}).then(function(e){t.checklist=e.data}).catch(function(t){})},openDetails:function(t,e){this.$store.state.receivdetailData={id:e.id},this.$router.push({path:"/receivedetail"})},getSummaries:function(t){var e=t.columns,a=t.data,s=[];return e.forEach(function(t,e){if(0!==e){var n=a.map(function(e){return Number(e[t.property])});if("price"==t.property){s[e]=n.reduce(function(t,e){return e+t},0),s[e]=s[e].toFixed(2);var l=i()(s[e]).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"),r=".00",o=s[e].split(".");2===o.length?1===(r=o[1].toString()).length?s[e]=l+"."+r+"0":s[e]=l+"."+r:s[e]=l+r,s[e]+=" 元"}else s[e]=""}else s[e]="总价"}),s},handleAdd:function(){this.$store.state.orderReceiveAddOrUpdateData={},this.$router.push({path:"/orderReceiveaddOrUpdate"})},handleEdit:function(t,e){this.$store.state.orderReceiveAddOrUpdateData={id:e.id,batch_id:e.batch_id},this.$router.push({path:"/orderReceiveaddOrUpdate"})},search:function(){this.$options.methods.loadTable.bind(this)()},handleSizeChange:function(t){this.limit=t,this.$options.methods.loadTable.bind(this)()},handleCurrentChange:function(t){this.page=t,this.$options.methods.loadTable.bind(this)()},hangleChange:function(t,e){var s=this,i=a("1nuA"),n={};n.pageInfoId=e.pageInfoId,n.state=1==t?1:0,r()({method:"post",url:s.$store.state.defaultHttp+"userPageInfo/updateUserPageByid.do?cId="+s.$store.state.iscId+"&pId="+s.$store.state.ispId,data:i.stringify(n)}).then(function(t){t.data&&"success"==t.data&&s.$options.methods.reloadData.bind(s)(!0)}).catch(function(t){})}}}),c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"radioList"},[a("el-radio-group",{model:{value:t.searchList.label,callback:function(e){t.$set(t.searchList,"label",e)},expression:"searchList.label"}},[a("span",{staticClass:"nameList"},[t._v("数据授权：")]),t._v(" "),t._l(t.pIdData,function(e){return a("el-radio",{key:e.index,attrs:{label:e.index},on:{change:function(e){t.search()}}},[t._v(t._s(e.name))])})],2),t._v(" "),a("el-radio-group",{model:{value:t.searchList.stateid,callback:function(e){t.$set(t.searchList,"stateid",e)},expression:"searchList.stateid"}},[a("span",{staticClass:"nameList"},[t._v("工单状态：")]),t._v(" "),t._l(t.stateData,function(e){return a("el-radio",{key:e.index,attrs:{label:e.index},on:{change:function(e){t.search()}}},[t._v(t._s(e.name))])})],2)],1),t._v(" "),a("div",{staticClass:"searchList",staticStyle:{width:"100%"}},[a("el-input",{staticStyle:{"margin-left":"20px",width:"400px"},attrs:{placeholder:"请输入公司名称或单号"},on:{input:t.search},model:{value:t.searchList.searchName,callback:function(e){t.$set(t.searchList,"searchName",e)},expression:"searchList.searchName"}},[a("el-select",{staticStyle:{width:"110px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:t.searchList.searchOption,callback:function(e){t.$set(t.searchList,"searchOption",e)},expression:"searchList.searchOption"}},[a("el-option",{attrs:{label:"公司名称",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"原单号",value:"2"}})],1)],1),t._v("\n          \n        "),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"mini"},on:{click:function(e){t.search()}}},[t._v("查询")])],1),t._v(" "),a("div",{staticClass:"entry"},[a("el-button",{staticClass:"btn info-btn",attrs:{size:"mini"},on:{click:function(e){t.handleAdd()}}},[t._v("新增")]),t._v(" "),a("div",{staticClass:"totalnum_head"},[t._v("共 "),a("span",{staticClass:"bold_span"},[t._v(t._s(t.tableNumber))]),t._v(" 条")]),t._v(" "),a("el-popover",{attrs:{placement:"bottom",width:"100",trigger:"click"}},[a("el-checkbox-group",{staticClass:"checklist",staticStyle:{"max-height":"600px","overflow-y":"overlay","overflow-x":"hidden"},model:{value:t.checklist,callback:function(e){t.checklist=e},expression:"checklist"}},t._l(t.filterList,function(e){return a("el-checkbox",{key:e.id,staticClass:"checkone",attrs:{label:e.name,value:e.state},on:{change:function(a){t.hangleChange(a,e)}}})})),t._v(" "),a("el-button",{staticClass:"info-btn screen",attrs:{slot:"reference",icon:"el-icon-more",type:"mini"},slot:"reference"})],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:"","summary-method":t.getSummaries,"show-summary":""}},[a("el-table-column",{attrs:{"header-align":"center",fixed:"",align:"center",type:"index",width:"45"}}),t._v(" "),a("el-table-column",{attrs:{label:"日期",prop:"createTime",fixed:"","min-width":"110",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"收款编号",prop:"backNo",fixed:"","min-width":"150","show-overflow-tooltip":"",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"hoverline",on:{click:function(a){t.openDetails(e.$index,e.row)}}},[t._v("\n                    "+t._s(e.row.backNo)+"\n                ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"公司名称",prop:"customerName","min-width":"200",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"原单号",prop:"contract_number","min-width":"150",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"原单类型",prop:"type","min-width":"110",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"总金额",prop:"totalAmount","min-width":"140",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.totalAmount)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"已收款金额",prop:"amount_of_repayment","min-width":"130",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.amount_of_repayment)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"本次收款金额",prop:"price","min-width":"130",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.price)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"剩余金额",prop:"amount_of_repayment","min-width":"130",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t._f("commaing")(e.row.surplusNum))+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"收款方式",prop:"pay_type","min-width":"110",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"checkStatus",width:"90",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.checkStatus?a("el-tag",{staticStyle:{"background-color":"#ffffff",color:"#606266","border-color":"#dcdfe6"},attrs:{size:"small",effect:"dark"}},[t._v("待审核")]):t._e(),t._v(" "),1==e.row.checkStatus?a("el-tag",{staticStyle:{"background-color":"#e6a23c",color:"#ffffff","border-color":"#e6a23c"},attrs:{size:"small",effect:"dark"}},[t._v("审核中")]):t._e(),t._v(" "),2==e.row.checkStatus?a("el-tag",{staticStyle:{"background-color":"#67c23a",color:"#ffffff","border-color":"#67c23a"},attrs:{size:"small",effect:"dark"}},[t._v("已审核")]):t._e(),t._v(" "),3==e.row.checkStatus?a("el-tag",{staticStyle:{"background-color":"#f56c6c",color:"#ffffff","border-color":"#f56c6c"},attrs:{size:"small",effect:"dark"}},[t._v("未通过")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"制单人",prop:"private_employee","min-width":"100",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"部门",prop:"deptname","min-width":"110",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"机构",prop:"parentname","min-width":"130","show-overflow-tooltip":"",sortable:""}}),t._v(" "),t._l(t.fieldHeadData,function(t){return a("el-table-column",{key:t.field_name,attrs:{label:t.name,prop:t.field_name,"min-width":"130",sortable:""}})}),t._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"90","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")])]}}])})],2),t._v(" "),a("div",{staticClass:"block numberPage"},[a("el-pagination",{attrs:{"current-page":t.page,"page-sizes":[20,50,100,500],"page-size":20,layout:"total, sizes, prev, pager, next, jumper",total:t.tableNumber},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var d=a("VU/8")(o,c,!1,function(t){a("Dosg")},null,null);e.default=d.exports}});