webpackJsonp([55],{q6kl:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("wtEF"),s=a("mtWM"),i=a.n(s),l=(a("mw3O"),{name:"culPondaddorUpdate",store:o.a,data:function(){return{msg:"culPondaddorUpdate.vue",myForm:{},rules:{contacts:[{required:!0,message:"联系人不能为空",trigger:"blur"}],name:[{required:!0,message:"公司名称不能为空",trigger:"blur"}],phone:[{required:!0,message:"手机号码不能为空",trigger:"blur"}]},Provinces:[],cityList:[],areaList:[],tableData:[],isDisable:!1}},mounted:function(){this.loadTable(),this.loadData()},methods:{loadTable:function(){var t=this,e=a("1nuA"),o={page:1,limit:25};i()({method:"post",url:t.$store.state.defaultHttp+"customerOne/query.do",data:e.stringify(o)}).then(function(e){t.tableData=e.data.rows}).catch(function(t){})},loadData:function(){a("1nuA");var t=this.$store.state.culPondaddorUpdateData;t.id?this.myForm={id:t.id,name:t.name,contacts:t.contacts,phone:t.phone,email:t.email,qq:t.qq,telephone:t.telephone,microblog:t.microblog,wangwang:t.wangwang,address:t.address,position:t.position,sex:t.sex,birthday:t.birthday,countryid:t.countryid,cityid:t.cityid,areaid:t.areaid,weChat:t.weChat,alipay:t.alipay,label:t.label,pId:this.$store.state.ispId,secondid:this.$store.state.deptid,deptid:this.$store.state.insid}:this.myForm={name:null,contacts:null,phone:null,email:null,qq:null,telephone:null,microblog:null,wangwang:null,address:null,position:null,sex:null,birthday:null,countryid:null,cityid:null,areaid:null,weChat:null,alipay:null,label:null,pId:this.$store.state.ispId,secondid:this.$store.state.deptid,deptid:this.$store.state.insid},this.$options.methods.loadCountry.bind(this)()},loadCountry:function(){var t=this,e=a("1nuA"),o={};this.myForm.cityid&&(o.id=this.myForm.cityid,i()({method:"post",url:t.$store.state.defaultHttp+"address/getAddress.do",data:e.stringify(o)}).then(function(e){t.areaList=e.data}).catch(function(t){})),this.myForm.countryid&&(o.id=this.myForm.countryid,i()({method:"post",url:t.$store.state.defaultHttp+"address/getAddress.do",data:e.stringify(o)}).then(function(e){t.cityList=e.data}).catch(function(t){})),o.id="",i()({method:"post",url:t.$store.state.defaultHttp+"address/getAddress.do",data:e.stringify(o)}).then(function(e){t.Provinces=e.data}).catch(function(t){})},handleoninput:function(t){var e=this;this.myForm.name=t;var o=a("1nuA"),s={page:1,limit:25};s.keyword=t,i()({method:"post",url:e.$store.state.defaultHttp+"customerOne/query.do",data:o.stringify(s)}).then(function(t){e.tableData=t.data.rows}).catch(function(t){})},choseProvince:function(t){this.myForm.cityid="",this.myForm.areaid="",this.myForm.countryid=t,this.$options.methods.loadCountry.bind(this)(!0)},choseCity:function(t){this.myForm.areaid="",this.myForm.cityid=t,this.$options.methods.loadCountry.bind(this)(!0)},choseBlock:function(t){this.myForm.areaid=t},getRow:function(t,e){this.myForm.name=e.name,this.myForm.address=e.address},submit:function(){var t=this,e=a("1nuA"),o=this.myForm,s=!1;o.email&&!/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/.test(o.email)&&(t.$message({message:"邮箱格式不正确",type:"error"}),s=!0),o.contacts||(t.$message({message:"联系人名称不能为空",type:"error"}),s=!0),o.name||(t.$message({message:"公司名称不能为空",type:"error"}),s=!0),o.phone||(t.$message({message:"手机号码不能为空",type:"error"}),s=!0),s||(this.isDisable=!0,i()({method:"post",url:t.$store.state.defaultHttp+"cultivationPool/saveOrUpdate.do?cId="+t.$store.state.iscId,data:e.stringify(o)}).then(function(e){e.data.code&&"200"==e.data.code?(t.$message({message:"成功",type:"success"}),t.closeTag()):t.$message({message:e.data.msg,type:"error"}),t.isDisable=!1}).catch(function(e){t.$message.error("提交失败，请重新提交")}))},closeTag:function(){var t=this,e=void 0;this.$store.state.tagsList.forEach(function(a,o){a.name==t.$options.name&&(e=o)});var a=this.$store.state.tagsList.splice(e,1)[0];(this.$store.state.tagsList[e]?this.$store.state.tagsList[e]:this.$store.state.tagsList[e-1])?a.path===this.$route.fullPath&&this.$router.push("/culturePond"):this.$router.push("/index")}}}),r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addorupdatecontent"},[a("el-form",{ref:"myForm",staticClass:"myForm",attrs:{model:t.myForm,rules:t.rules,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"联系人",prop:"contacts"}},[a("el-input",{staticStyle:{width:"90%"},model:{value:t.myForm.contacts,callback:function(e){t.$set(t.myForm,"contacts",e)},expression:"myForm.contacts"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"公司名称",prop:"name"}},[a("el-input",{staticStyle:{width:"90%"},on:{input:t.handleoninput},model:{value:t.myForm.name,callback:function(e){t.$set(t.myForm,"name",e)},expression:"myForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"手机",prop:"phone"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.myForm.phone,callback:function(e){t.$set(t.myForm,"phone",e)},expression:"myForm.phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{staticStyle:{width:"90%"},model:{value:t.myForm.telephone,callback:function(e){t.$set(t.myForm,"telephone",e)},expression:"myForm.telephone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"微信"}},[a("el-input",{staticStyle:{width:"90%"},model:{value:t.myForm.weChat,callback:function(e){t.$set(t.myForm,"weChat",e)},expression:"myForm.weChat"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"QQ"}},[a("el-input",{staticStyle:{width:"90%"},model:{value:t.myForm.qq,callback:function(e){t.$set(t.myForm,"qq",e)},expression:"myForm.qq"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{staticStyle:{width:"90%"},model:{value:t.myForm.email,callback:function(e){t.$set(t.myForm,"email",e)},expression:"myForm.email"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"性别"}},[a("el-radio",{attrs:{label:"男"},model:{value:t.myForm.sex,callback:function(e){t.$set(t.myForm,"sex",e)},expression:"myForm.sex"}},[t._v("男")]),t._v(" "),a("el-radio",{attrs:{label:"女"},model:{value:t.myForm.sex,callback:function(e){t.$set(t.myForm,"sex",e)},expression:"myForm.sex"}},[t._v("女")])],1),t._v(" "),a("el-form-item",{attrs:{label:"生日"}},[a("el-date-picker",{staticStyle:{width:"90%"},attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","default-value":"1985-06-15"},model:{value:t.myForm.birthday,callback:function(e){t.$set(t.myForm,"birthday",e)},expression:"myForm.birthday"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"职业"}},[a("el-input",{staticStyle:{width:"90%"},model:{value:t.myForm.position,callback:function(e){t.$set(t.myForm,"position",e)},expression:"myForm.position"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"省/市/区"}},[a("el-select",{staticStyle:{width:"28%"},attrs:{placeholder:"请选择省"},on:{change:t.choseProvince},model:{value:t.myForm.countryid,callback:function(e){t.$set(t.myForm,"countryid",e)},expression:"myForm.countryid"}},t._l(t.Provinces,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("el-select",{staticStyle:{width:"28%"},attrs:{placeholder:"请选择市"},on:{change:t.choseCity},model:{value:t.myForm.cityid,callback:function(e){t.$set(t.myForm,"cityid",e)},expression:"myForm.cityid"}},t._l(t.cityList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("el-select",{staticStyle:{width:"28%"},attrs:{placeholder:"请选择区"},on:{change:t.choseBlock},model:{value:t.myForm.areaid,callback:function(e){t.$set(t.myForm,"areaid",e)},expression:"myForm.areaid"}},t._l(t.areaList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"微博"}},[a("el-input",{staticStyle:{width:"90%"},model:{value:t.myForm.microblog,callback:function(e){t.$set(t.myForm,"microblog",e)},expression:"myForm.microblog"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"支付宝"}},[a("el-input",{staticStyle:{width:"90%"},model:{value:t.myForm.alipay,callback:function(e){t.$set(t.myForm,"alipay",e)},expression:"myForm.alipay"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"旺旺"}},[a("el-input",{staticStyle:{width:"90%"},model:{value:t.myForm.wangwang,callback:function(e){t.$set(t.myForm,"wangwang",e)},expression:"myForm.wangwang"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{staticStyle:{width:"90%"},model:{value:t.myForm.address,callback:function(e){t.$set(t.myForm,"address",e)},expression:"myForm.address"}})],1)],1),t._v(" "),a("div",{staticClass:"line",staticStyle:{height:"770px"}}),t._v(" "),a("div",{staticClass:"formlist"},[a("el-table",{attrs:{data:t.tableData,border:"",stripe:"","default-sort":{order:"ascending"},"max-height":"760"}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",width:"35"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{width:"15px",height:"15px",padding:"0","border-radius":"50%"},on:{click:function(a){t.getRow(e.$index,e.row)}}},[t._v(" ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name","min-width":"200",label:"公司名称",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"address","show-overflow-tooltip":"","min-width":"200",label:"公司地址",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"representative","min-width":"90",label:"法人",sortable:""}})],1)],1),t._v(" "),a("div",{staticClass:"submit_btn"},[a("el-button",{staticStyle:{"margin-right":"50px !important"},attrs:{type:"primary",disabled:t.isDisable},on:{click:t.submit}},[t._v("立即提交")]),t._v(" "),a("el-button",{on:{click:t.closeTag}},[t._v("取消")])],1)],1)},staticRenderFns:[]};var n=a("VU/8")(l,r,!1,function(t){a("yxWd")},null,null);e.default=n.exports},yxWd:function(t,e){}});