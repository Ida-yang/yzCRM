webpackJsonp([30],{"5yay":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("wtEF"),n=a("mtWM"),o=a.n(n),i=(a("mw3O"),{name:"approvalProcess",store:s.a,computed:{tableData:function(){return s.a.state.approvalProcessList},tableNumber:function(){return s.a.state.approvalProcessListnumber}},data:function(){return{page:1,limit:20,workApprovalId:null,workList:[]}},activated:function(){this.loadTable()},mounted:function(){this.loadLabel()},methods:{loadLabel:function(){var t=this;o()({method:"get",url:t.$store.state.defaultHttp+"oaExamineCategoryType/selectList.do?cId="+t.$store.state.iscId}).then(function(e){var a=e.data;a.forEach(function(e,a){0==a&&(t.workApprovalId=e.id);var s=a+1;e.index=s.toString()}),t.workList=a,t.$options.methods.loadTable.bind(t)()}).catch(function(t){})},loadTable:function(){var t=this,e=a("1nuA"),s={};s.page=this.page,s.limit=this.limit,s.type=this.workApprovalId,s.secondid=this.$store.state.deptid,o()({method:"post",url:t.$store.state.defaultHttp+"oaExamineCategory/selectList.do?cId="+t.$store.state.iscId,data:e.stringify(s)}).then(function(e){var a=e.data.map.success;t.$store.state.approvalProcessList=a,t.$store.state.approvalProcessListnumber=e.data.count}).catch(function(t){})},showWorkleval:function(t){this.workApprovalId=t.id,this.$options.methods.loadTable.bind(this)()},handleAdd:function(){this.$store.state.workApprovalData={examineTypeId:this.workApprovalId},this.$router.push({path:"/workApprovaladdOrUpdate"})},handleEdit:function(t,e){this.$store.state.workApprovalData=e,this.$router.push({path:"/workApprovaladdOrUpdate"})},editForm:function(t,e){this.$store.state.associatedFormsData=e,this.$router.push({path:"/associatedFormsaddOrUpdate"})},toApproval:function(t,e){this.$store.state.jumpvalData=e,this.$router.push({path:"/approvalProcess"})},handleDelete:function(t,e){var s=this,n=this,i=a("1nuA"),r={};r.id=e.id,r.deleted=1,n.$confirm("是否确认删除【"+e.title+"】？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){t.value;o()({method:"post",url:n.$store.state.defaultHttp+"oaExamineCategory/saveOrUpdate.do?cId="+n.$store.state.iscId,data:i.stringify(r)}).then(function(t){t.data.code&&"200"==t.data.code?(n.$message({message:"删除成功",type:"success"}),n.$options.methods.loadTable.bind(n)()):n.$message({message:t.data.msg,type:"error"})}).catch(function(t){n.$message.error("删除失败,请重新删除")})}).catch(function(){s.$message({type:"info",message:"取消删除【"+e.title+"】"})})},handleSizeChange:function(t){this.limit=t,this.$options.methods.loadTable.bind(this)(!1)},handleCurrentChange:function(t){this.page=t,this.$options.methods.loadTable.bind(this)(!1)}}}),r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contentall"},[a("div",{staticClass:"setleftcontent"},[a("el-menu",{staticClass:"el-menu-vertical-demo base_menu",attrs:{"default-active":"1"}},t._l(t.workList,function(e){return a("el-menu-item",{key:e.id,attrs:{index:e.index},on:{click:function(a){t.showWorkleval(e)}}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("div",{staticClass:"centercontent"}),t._v(" "),a("div",{staticClass:"setrightcontent"},[a("div",{staticClass:"entry"},[a("el-button",{staticClass:"btn info-btn",attrs:{size:"mini"},on:{click:function(e){t.handleAdd()}}},[t._v("新增")]),t._v(" "),a("div",{staticClass:"totalnum_head"},[t._v("共 "),a("span",{staticClass:"bold_span"},[t._v(t._s(t.tableNumber))]),t._v(" 条")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"审核类型",prop:"title",fixed:"","min-width":"110",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"可见部门",prop:"deptIdLs","min-width":"150",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.deptIdLs,function(e,s){return a("span",{key:e.id},[0!==s?a("span",[t._v("，")]):t._e(),t._v(t._s(e.name))])})}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime","min-width":"150",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"备注",prop:"remarks","min-width":"180",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"330","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.toApproval(e.$index,e.row)}}},[t._v("流程设置")]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.editForm(e.$index,e.row)}}},[t._v("编辑表单")]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v("名称编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"block numberPage"},[a("el-pagination",{attrs:{"current-page":t.page,"page-sizes":[20,50,100,500],"page-size":20,layout:"total, sizes, prev, pager, next, jumper",total:t.tableNumber},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("9XpI")},null,null);e.default=l.exports},"9XpI":function(t,e){}});