webpackJsonp([27],{PXDc:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("wtEF"),o=n("mtWM"),s=n.n(o),i=(n("mw3O"),n("PQp9")),l={name:"note",store:a.a,components:{UE:i.a},data:function(){return{msg:"note.vue",defaultIndex:null,noteMenu:[],noteData:[],noneData:[{index:"1",name:""}],menuDialog:!1,noteDialog:!1,newform:{parentid:null,parentname:null,name:null},rules:{},defaultMsg:"",config:{initialFrameWidth:"",initialFrameHeight:300,toolbars:[["bold","italic","underline","forecolor","|","insertorderedlist","insertunorderedlist","|","justifyleft","justifycenter","justifyright","justifyjustify","|"]],elementPathEnabled:!1,wordCount:!1},loadStart:!0}},mounted:function(){this.loadMenu()},activated:function(){this.loadMenu(),this.loadNote()},methods:{loadMenu:function(){var t=this;s()({method:"get",url:t.$store.state.defaultHttp+"noteType/getNote.do?cId="+t.$store.state.iscId+"&pId="+t.$store.state.ispId}).then(function(e){t.noteMenu=e.data,e.data.forEach(function(e,n){0==n&&(t.newform.parentid=e.id,t.newform.parentname=e.name,t.defaultIndex=e.index),t.loadStart&&t.$options.methods.loadNote.bind(t)()})}).catch(function(t){})},loadNote:function(){var t=this,e=n("1nuA"),a={};a.parentid=this.newform.parentid,a.parentid&&s()({method:"post",url:t.$store.state.defaultHttp+"noteType/getNoteTypeByParentId.do?cId="+t.$store.state.iscId+"&pId="+t.$store.state.ispId,data:e.stringify(a)}).then(function(e){t.noteData=e.data}).catch(function(t){})},showTableval:function(t){this.newform.parentid=t.id,this.newform.parentname=t.name,this.$options.methods.loadNote.bind(this)()},addMenu:function(){this.menuDialog=!0,this.newform.name=null,this.newform.parentid=null},updateMenu:function(t){this.menuDialog=!0,this.newform.name=t.name},menuSubmit:function(){var t=this,e=n("1nuA"),a={};a.name=this.newform.name;var o=null;this.newform.parentid?(a.id=this.newform.parentid,o=t.$store.state.defaultHttp+"noteType/updateNoteTypeById.do?cId="+t.$store.state.iscId+"&pId="+t.$store.state.ispId):o=t.$store.state.defaultHttp+"noteType/insertNoteType.do?cId="+t.$store.state.iscId+"&pId="+t.$store.state.ispId,s()({method:"post",url:o,data:e.stringify(a)}).then(function(e){e.data.code&&"200"==e.data.code?(t.$message({message:"操作成功",type:"success"}),t.menuDialog=!1,t.loadStart=!1,t.$options.methods.loadMenu.bind(t)(),t.$options.methods.loadNote.bind(t)()):t.$message({message:e.data.msg,type:"error"})}).catch(function(t){})},addNote:function(){this.noteDialog=!0,this.$refs.ue&&(this.$refs.ue.editor.body.textContent="")},noteSubmit:function(){var t=this,e=n("1nuA"),a=this.$refs.ue.getUEContent(),o={};o.name=a,o.parentid=this.newform.parentid,s()({method:"post",url:t.$store.state.defaultHttp+"noteType/insertNote.do?cId="+t.$store.state.iscId+"&pId="+t.$store.state.ispId,data:e.stringify(o)}).then(function(e){e.data.code&&"200"==e.data.code?(t.$message({message:"操作成功",type:"success"}),t.noteDialog=!1,t.$options.methods.loadNote.bind(t)()):t.$message({message:e.data.msg,type:"error"})}).catch(function(t){})},handleDelete:function(t,e){var a=this,o=n("1nuA"),i={};i.id=e.id,a.$confirm("确认删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){e.value;s()({method:"post",url:a.$store.state.defaultHttp+"noteType/deleteNoteTypeById.do?cId="+a.$store.state.iscId+"&pId="+a.$store.state.ispId,data:o.stringify(i)}).then(function(e){e.data.code&&"200"==e.data.code?(a.$message({message:"操作成功",type:"success"}),0==t?(a.loadStart=!0,a.$options.methods.loadMenu.bind(a)()):1==t&&(a.loadStart=!1,a.$options.methods.loadMenu.bind(a)(),a.$options.methods.loadNote.bind(a)())):a.$message({message:e.data.msg,type:"error"})}).catch(function(t){})}).catch(function(){a.$message({type:"info",message:"取消删除"})})}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contentall"},[n("div",{staticClass:"setleftcontent"},[n("el-menu",{staticClass:"el-menu-vertical-demo base_menu",attrs:{"default-active":t.defaultIndex}},[n("el-submenu",{attrs:{index:"1"}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("\n                    便签\n                    "),n("i",{staticClass:"el-icon-plus",staticStyle:{"margin-left":"112px","line-height":"40px","font-size":"12px",color:"#606266"},on:{click:t.addMenu}})]),t._v(" "),t._l(t.noteMenu,function(e,a){return n("el-menu-item",{key:a,staticStyle:{position:"relative"},attrs:{index:e.index},on:{click:function(n){t.showTableval(e)}}},[t._v("\n                    "+t._s(e.name)+"\n                    "),n("span",{staticClass:"menu_btn"},[n("i",{staticClass:"el-icon-edit",staticStyle:{"font-size":"12px",margin:"0"},on:{click:function(n){t.updateMenu(e)}}}),t._v(" "),n("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"12px",margin:"0"},on:{click:function(n){t.handleDelete(0,e)}}})])])})],2)],1)],1),t._v(" "),n("div",{staticClass:"setrightcontent"},[n("ul",{directives:[{name:"show",rawName:"v-show",value:0==t.noteData.length&&t.newform.parentid,expression:"noteData.length == 0 && newform.parentid"}],staticClass:"note_ul"},t._l(t.noneData,function(e){return n("li",{key:e.index,staticClass:"note_li"},[n("div",{staticClass:"note_set"},[n("i",{staticClass:"el-icon-plus",on:{click:t.addNote}}),t._v(" "),n("span"),t._v(" "),n("i")]),t._v(" "),n("div",{staticClass:"note_c"})])})),t._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:0!==t.noteData.length,expression:"noteData.length !== 0"}],staticClass:"note_ul"},t._l(t.noteData,function(e){return n("li",{key:e.index,staticClass:"note_li"},[n("div",{staticClass:"note_set"},[n("i",{staticClass:"el-icon-plus",on:{click:t.addNote}}),t._v(" "),n("span",[t._v("2019-06-28 18:12:26")]),t._v(" "),n("i",{staticClass:"el-icon-delete",on:{click:function(n){t.handleDelete(1,e)}}})]),t._v(" "),n("div",{staticClass:"note_c",domProps:{innerHTML:t._s(e.name)}})])}))]),t._v(" "),n("el-dialog",{attrs:{title:"便签分类",visible:t.menuDialog,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(e){t.menuDialog=e}}},[n("el-form",{ref:"newform",attrs:{model:t.newform,"label-width":"110px",rules:t.rules}},[n("el-form-item",{attrs:{prop:"name",label:"便签类别"}},[n("el-input",{staticStyle:{width:"90%"},model:{value:t.newform.name,callback:function(e){t.$set(t.newform,"name",e)},expression:"newform.name"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.menuDialog=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.menuSubmit()}}},[t._v("确 定")])],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"便签信息",visible:t.noteDialog,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(e){t.noteDialog=e}}},[n("el-form",{ref:"newform",attrs:{model:t.newform,"label-width":"110px",rules:t.rules}},[n("el-form-item",{attrs:{label:"便签类别"}},[n("el-input",{staticStyle:{width:"90%"},attrs:{disabled:!0},model:{value:t.newform.parentname,callback:function(e){t.$set(t.newform,"parentname",e)},expression:"newform.parentname"}})],1),t._v(" "),n("div",{staticClass:"editor-container"},[n("UE",{ref:"ue",attrs:{defaultMsg:t.defaultMsg,config:t.config}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.noteDialog=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.noteSubmit()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=n("VU/8")(l,d,!1,function(t){n("PtIY")},null,null);e.default=r.exports},PtIY:function(t,e){}});