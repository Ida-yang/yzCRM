webpackJsonp([31],{"8GKx":function(e,t){},Ns0n:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("wtEF"),s=a("mtWM"),i=a.n(s),o=(a("mw3O"),{name:"logs",store:l.a,computed:{oplogData:function(){return l.a.state.logList},oplogNumber:function(){return l.a.state.logListnumber},SMSlogData:function(){return l.a.state.SMSlogList},SMSlogNumber:function(){return l.a.state.SMSlogListnumber}},data:function(){return{nameList:[{index:1,name:"操作日志",isActive:!0},{index:2,name:"短信日志",isActive:!1}],index:"1",searchList:{keyType:"1",yearrange:null,startTime:null,endTime:null,label:"1"},searchList2:{model:null,private_employee:null,yearrange:null,startTime:null,endTime:null},page:1,limit:100,modelData:[{label:"1",value:"社交营销"},{label:"2",value:"商机状态"},{label:"3",value:"工商数据"},{label:"4",value:"方案目标"},{label:"5",value:"联系人"},{label:"6",value:"合同"},{label:"7",value:"数据中心"},{label:"8",value:"客户"},{label:"9",value:"线索"},{label:"10",value:"部门机构"},{label:"11",value:"跟进记录"},{label:"12",value:"图片"},{label:"14",value:"行业"},{label:"15",value:"登录"},{label:"16",value:"提醒信息"},{label:"17",value:"商机"},{label:"18",value:"辅助资料"},{label:"19",value:"用户"},{label:"20",value:"角色"},{label:"21",value:"短信模板"},{label:"22",value:"类别信息"},{label:"23",value:"外勤"},{label:"24",value:"微信二维码"},{label:"25",value:"任务"}],pIdlist:[],pIdData:[{label:"0",value:"全部"},{label:"1",value:"我的"},{label:"2",value:"本组"},{label:"3",value:"本机构"}],searchName:null}},mounted:function(){this.loadpId(),this.loadOplog(),this.loadSMSlog()},activated:function(){this.loadOplog(),this.loadSMSlog()},methods:{loadOplog:function(){var e=this,t=a("1nuA"),l={};l.model=this.searchList2.model,l.private_employee=this.searchList2.private_employee,l.startTime=this.searchList2.startTime,l.endTime=this.searchList2.endTime,l.page=this.page,l.limit=this.limit,i()({method:"post",url:e.$store.state.defaultHttp+"logInfo/selectLogInfo.do?cId="+e.$store.state.iscId,data:t.stringify(l)}).then(function(t){e.$store.state.logList=t.data.map.logInfos,e.$store.state.logListnumber=t.data.count}).catch(function(e){})},loadSMSlog:function(){var e=this,t=a("1nuA"),l={};"1"==this.searchList.keyType?l.searchName=this.searchName:"2"==this.searchList.keyType&&(l.keyWord=this.searchName),0==this.searchList.label?l.pId=e.nullvalue:1==this.searchList.label?l.pId=e.$store.state.ispId:2==this.searchList.label?l.secondid=e.$store.state.deptid:3==this.searchList.label&&(l.deptid=e.$store.state.insid),l.startTime=this.searchList.startTime,l.endTime=this.searchList.endTime,l.page=this.page,l.limit=this.limit,i()({method:"post",url:e.$store.state.defaultHttp+"sendRecord/selectSendRecord.do?cId="+e.$store.state.iscId,data:t.stringify(l)}).then(function(t){e.$store.state.SMSlogList=t.data.map.sendRecords,e.$store.state.SMSlogListnumber=t.data.count}).catch(function(e){})},loadpId:function(){var e=this;i()({method:"get",url:e.$store.state.defaultHttp+"customerTwo/getNameAndId.do?cId="+e.$store.state.iscId}).then(function(t){e.pIdlist=t.data.map.success}).catch(function(e){})},showTableval:function(e){this.index=e.index,this.nameList.forEach(function(e){e.isActive=!1}),e.isActive=!e.isActive},oplogDatepick:function(e){e?(this.searchList2.startTime=e[0],this.searchList2.endTime=e[1]):(this.searchList2.startTime="",this.searchList2.endTime=""),this.$options.methods.loadOplog.bind(this)()},SMSlogdatepick:function(e){e?(this.searchList.startTime=e[0],this.searchList.endTime=e[1]):(this.searchList.startTime="",this.searchList.endTime=""),this.$options.methods.loadSMSlog.bind(this)()},searchSMSlog:function(){var e=this,t="",a=1;0==this.searchList.label?(t="sendRecordJurisdiction/all.do",a=0):2==this.searchList.label?(t="sendRecordJurisdiction/second.do",a=0):3==this.searchList.label&&(t="sendRecordJurisdiction/dept.do",a=0),0==a?i()({method:"get",url:e.$store.state.defaultHttp+t}).then(function(t){t.data.msg&&"error"==t.data.msg?e.$message({message:"对不起，您没有该权限，请联系管理员开通",type:"error"}):e.$options.methods.loadSMSlog.bind(e)(!0)}).catch(function(e){}):e.$options.methods.loadSMSlog.bind(e)(!0)},searchOplog:function(){this.$options.methods.loadOplog.bind(this)(!0)},oplogSizeChange:function(e){this.limit=e,this.$options.methods.loadOplog.bind(this)(!1)},oplogCurrentChange:function(e){this.page=e,this.$options.methods.loadOplog.bind(this)(!1)},SMSlogSizeChange:function(e){this.limit=e,this.$options.methods.loadSMSlog.bind(this)(!1)},SMSlogCurrentChange:function(e){this.page=e,this.$options.methods.loadSMSlog.bind(this)(!1)}}}),n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contentall"},[a("div",{staticClass:"setleftcontent"},[a("ul",{staticClass:"namecontent"},e._l(e.nameList,function(t){return a("li",{key:t.index,class:{actived:t.isActive},attrs:{value:t.name},on:{click:function(a){e.showTableval(t)}}},[e._v(e._s(t.name))])}))]),e._v(" "),a("div",{staticClass:"centercontent"}),e._v(" "),1==e.index?a("div",{staticClass:"setrightcontent"},[a("div",{staticClass:"searchList",staticStyle:{width:"100%"}},[a("span",{staticClass:"nameList"},[e._v("操作模块：")]),e._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:e.searchOplog},model:{value:e.searchList2.model,callback:function(t){e.$set(e.searchList2,"model",t)},expression:"searchList2.model"}},e._l(e.modelData,function(e){return a("el-option",{key:e.label,attrs:{label:e.value,value:e.value}})}))],1),e._v(" "),a("div",{staticClass:"searchList",staticStyle:{width:"100%"}},[a("span",{staticClass:"nameList"},[e._v("用户：")]),e._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:e.searchOplog},model:{value:e.searchList2.private_employee,callback:function(t){e.$set(e.searchList2,"private_employee",t)},expression:"searchList2.private_employee"}},e._l(e.pIdlist,function(e){return a("el-option",{key:e.private_id,attrs:{label:e.private_employee,value:e.private_employee}})}))],1),e._v(" "),a("div",{staticClass:"searchList",staticStyle:{width:"100%"}},[a("span",{staticClass:"nameList"},[e._v("操作时间：")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.oplogDatepick},model:{value:e.searchList2.yearrange,callback:function(t){e.$set(e.searchList2,"yearrange",t)},expression:"searchList2.yearrange"}})],1),e._v(" "),a("div",{staticClass:"searchList",staticStyle:{width:"100%"}}),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.oplogData,border:"",stripe:""}},[a("el-table-column",{attrs:{fixed:"","header-align":"center",align:"center",type:"index",width:"45"}}),e._v(" "),a("el-table-column",{attrs:{label:"模块",prop:"model",fixed:"","min-width":"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"对象",prop:"workName","show-overflow-tooltip":"","min-width":"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作类型",prop:"type","min-width":"130",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"用户",prop:"private_employee","min-width":"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"时间",prop:"startDate","min-width":"150",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"IP地址",prop:"ip","show-overflow-tooltip":"","min-width":"160",sortable:""}})],1),e._v(" "),a("div",{staticClass:"block numberPage"},[a("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[100,300,500],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.oplogNumber},on:{"size-change":e.oplogSizeChange,"current-change":e.oplogCurrentChange}})],1)],1):e._e(),e._v(" "),2==e.index?a("div",{staticClass:"setrightcontent"},[a("div",{staticClass:"radioList"},[a("el-radio-group",{model:{value:e.searchList.label,callback:function(t){e.$set(e.searchList,"label",t)},expression:"searchList.label"}},[a("span",{staticClass:"nameList"},[e._v("数据授权：")]),e._v(" "),e._l(e.pIdData,function(t){return a("el-radio",{key:t.label,attrs:{label:t.label},on:{change:function(t){e.searchSMSlog()}}},[e._v(e._s(t.value))])})],2)],1),e._v(" "),a("div",{staticClass:"searchList",staticStyle:{width:"100%"}},[a("span",{staticClass:"nameList"},[e._v("发送时间：")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.SMSlogdatepick},model:{value:e.searchList.yearrange,callback:function(t){e.$set(e.searchList,"yearrange",t)},expression:"searchList.yearrange"}})],1),e._v(" "),a("div",{staticClass:"searchList"},[a("el-input",{staticStyle:{"margin-left":"20px",width:"400px"},attrs:{placeholder:"请输入联系人或公司名称"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchSMSlog(t):null}},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}},[a("el-select",{staticStyle:{width:"125px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.searchList.keyType,callback:function(t){e.$set(e.searchList,"keyType",t)},expression:"searchList.keyType"}},[a("el-option",{attrs:{label:"联系人名称",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"公司名称",value:"2"}})],1)],1),e._v("\n              \n            "),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"mini"},on:{click:function(t){e.searchSMSlog()}}},[e._v("查询")])],1),e._v(" "),a("div",{staticClass:"searchList",staticStyle:{width:"100%"}}),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.SMSlogData,border:"",stripe:""}},[a("el-table-column",{attrs:{fixed:"","header-align":"center",align:"center",type:"index",width:"45"}}),e._v(" "),a("el-table-column",{attrs:{label:"公司名称",prop:"workname","show-overflow-tooltip":"","min-width":"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"联系人",prop:"contact","min-width":"110",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"电话",prop:"phone","min-width":"110",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"模板标题",prop:"title","min-width":"130",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"模板内容",prop:"content","show-overflow-tooltip":"","min-width":"180",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"短信说明",prop:"explain","show-overflow-tooltip":"","min-width":"180",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"发送者",prop:"private_employee","min-width":"110",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"部门",prop:"deptname","show-overflow-tooltip":"","min-width":"110",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"机构",prop:"parentname","show-overflow-tooltip":"","min-width":"110",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"发送时间",prop:"createTime","show-overflow-tooltip":"","min-width":"150",sortable:""}})],1),e._v(" "),a("div",{staticClass:"block numberPage"},[a("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[100,300,500],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.SMSlogNumber},on:{"size-change":e.SMSlogSizeChange,"current-change":e.SMSlogCurrentChange}})],1)],1):e._e()])},staticRenderFns:[]};var r=a("VU/8")(o,n,!1,function(e){a("8GKx")},null,null);t.default=r.exports}});