webpackJsonp([62],{NO4C:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("INCx"),l=a.n(s),r=a("wtEF"),n=a("mtWM"),i=a.n(n),o=(a("mw3O"),{name:"receive",store:r.a,filters:{commaing:function(e){if(0!==e){var t=l()(e).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"),a=".00",s=e.toString().split(".");return 2===s.length?1===(a=s[1].toString()).length?t+"."+a+"0":t+"."+a:t+a}return 0}},computed:{tableData:function(){return r.a.state.receiveList},tableNumber:function(){return r.a.state.receiveListnumber}},data:function(){return{msg:"receive.vue",page:1,limit:20,searchList:{searchName:null,searchOption:"1",stateid:null,label:1},stateData:[{index:null,name:"全部"},{index:0,name:"待审核"},{index:1,name:"审核中"},{index:2,name:"已审核"},{index:3,name:"未通过"}],pIdData:[{index:0,name:"全部"},{index:1,name:"我的"},{index:2,name:"本组"},{index:3,name:"本机构"},{index:4,name:"待我审核"}],nullvalue:null}},activated:function(){this.loadTable()},mounted:function(){this.loadTable()},methods:{loadTable:function(){var e=this,t=a("1nuA"),s={};0==this.searchList.label?s.pId=e.nullvalue:1==this.searchList.label?s.pId=e.$store.state.ispId:2==this.searchList.label?s.secondid=e.$store.state.deptid:3==this.searchList.label?s.deptid=e.$store.state.insid:4==this.searchList.label&&(s.examine=e.$store.state.ispId),"1"==this.searchList.searchOption?s.searchName=this.searchList.searchName:"2"==this.searchList.searchOption&&(s.keyWord=this.searchList.searchName),s.stateid=this.searchList.stateid,s.page=this.page,s.limit=this.limit,i()({method:"post",url:e.$store.state.defaultHttp+"back/queryForList.do?cId="+e.$store.state.iscId,data:t.stringify(s)}).then(function(t){var a=t.data.map.success;a.forEach(function(e){var t=e.totalAmount-e.amount_of_repayment;e.surplusNum=t.toFixed(2)}),e.$store.state.receiveList=a,e.$store.state.receiveListnumber=t.data.count}).catch(function(e){})},openDetails:function(e,t){this.$store.state.receivdetailData={id:t.id},this.$router.push({path:"/receivedetail"})},getSummaries:function(e){var t=e.columns,a=e.data,s=[];return t.forEach(function(e,t){if(0!==t){var r=a.map(function(t){return Number(t[e.property])});if("price"==e.property){s[t]=r.reduce(function(e,t){return t+e},0),s[t]=s[t].toFixed(2);var n=l()(s[t]).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"),i=".00",o=s[t].split(".");2===o.length?1===(i=o[1].toString()).length?s[t]=n+"."+i+"0":s[t]=n+"."+i:s[t]=n+i,s[t]+=" 元"}else s[t]=""}else s[t]="总价"}),s},search:function(){this.$options.methods.loadTable.bind(this)()},handleSizeChange:function(e){this.limit=e,this.$options.methods.loadTable.bind(this)()},handleCurrentChange:function(e){this.page=e,this.$options.methods.loadTable.bind(this)()}}}),c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"radioList"},[a("el-radio-group",{model:{value:e.searchList.label,callback:function(t){e.$set(e.searchList,"label",t)},expression:"searchList.label"}},[a("span",{staticClass:"nameList"},[e._v("数据授权：")]),e._v(" "),e._l(e.pIdData,function(t){return a("el-radio",{key:t.index,attrs:{label:t.index},on:{change:function(t){e.search()}}},[e._v(e._s(t.name))])})],2),e._v(" "),a("el-radio-group",{model:{value:e.searchList.stateid,callback:function(t){e.$set(e.searchList,"stateid",t)},expression:"searchList.stateid"}},[a("span",{staticClass:"nameList"},[e._v("工单状态：")]),e._v(" "),e._l(e.stateData,function(t){return a("el-radio",{key:t.index,attrs:{label:t.index},on:{change:function(t){e.search()}}},[e._v(e._s(t.name))])})],2)],1),e._v(" "),a("div",{staticClass:"searchList",staticStyle:{width:"100%"}},[a("el-input",{staticStyle:{"margin-left":"20px",width:"400px"},attrs:{placeholder:"请输入公司名称或单号"},on:{input:e.search},model:{value:e.searchList.searchName,callback:function(t){e.$set(e.searchList,"searchName",t)},expression:"searchList.searchName"}},[a("el-select",{staticStyle:{width:"110px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.searchList.searchOption,callback:function(t){e.$set(e.searchList,"searchOption",t)},expression:"searchList.searchOption"}},[a("el-option",{attrs:{label:"公司名称",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"原单号",value:"2"}})],1)],1),e._v("\n          \n        "),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"mini"},on:{click:function(t){e.search()}}},[e._v("查询")])],1),e._v(" "),a("div",{staticClass:"entry"},[a("div",{staticClass:"totalnum_head"},[e._v("共 "),a("span",{staticClass:"bold_span"},[e._v(e._s(e.tableNumber))]),e._v(" 条")])]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:"","summary-method":e.getSummaries,"show-summary":""}},[a("el-table-column",{attrs:{"header-align":"center",fixed:"",align:"center",type:"index",width:"45"}}),e._v(" "),a("el-table-column",{attrs:{label:"日期",prop:"createTime",fixed:"","min-width":"110",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"回款编号",prop:"backNo",fixed:"","min-width":"150","show-overflow-tooltip":"",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"hoverline",on:{click:function(a){e.openDetails(t.$index,t.row)}}},[e._v("\n                    "+e._s(t.row.backNo)+"\n                ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"公司名称",prop:"customerName","min-width":"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"原单号",prop:"contract_number","min-width":"150",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"原单类型",prop:"type","min-width":"110",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"总金额",prop:"totalAmount","min-width":"140",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.totalAmount)+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"已回款金额",prop:"amount_of_repayment","min-width":"130",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.amount_of_repayment)+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"本次回款金额",prop:"price","min-width":"130",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.price)+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"剩余金额",prop:"amount_of_repayment","min-width":"130",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("commaing")(t.row.surplusNum))+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"收款方式",prop:"pay_type","min-width":"110",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"checkStatus",width:"90",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.checkStatus?a("el-tag",{staticStyle:{"background-color":"#ffffff",color:"#606266","border-color":"#dcdfe6"},attrs:{size:"small",effect:"dark"}},[e._v("待审核")]):e._e(),e._v(" "),1==t.row.checkStatus?a("el-tag",{staticStyle:{"background-color":"#e6a23c",color:"#ffffff","border-color":"#e6a23c"},attrs:{size:"small",effect:"dark"}},[e._v("审核中")]):e._e(),e._v(" "),2==t.row.checkStatus?a("el-tag",{staticStyle:{"background-color":"#67c23a",color:"#ffffff","border-color":"#67c23a"},attrs:{size:"small",effect:"dark"}},[e._v("已审核")]):e._e(),e._v(" "),3==t.row.checkStatus?a("el-tag",{staticStyle:{"background-color":"#f56c6c",color:"#ffffff","border-color":"#f56c6c"},attrs:{size:"small",effect:"dark"}},[e._v("未通过")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"制单人",prop:"private_employee","min-width":"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"部门",prop:"deptname","min-width":"110",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"机构",prop:"parentname","min-width":"130","show-overflow-tooltip":"",sortable:""}})],1),e._v(" "),a("div",{staticClass:"block numberPage"},[a("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[20,50,100,500],"page-size":20,layout:"total, sizes, prev, pager, next, jumper",total:e.tableNumber},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]},u=a("VU/8")(o,c,!1,null,null,null);t.default=u.exports}});