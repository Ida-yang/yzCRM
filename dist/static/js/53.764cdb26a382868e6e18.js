webpackJsonp([53],{m3oN:function(t,e){},y2yt:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("wtEF"),s=a("mtWM"),o=a.n(s),l=(a("mw3O"),{name:"programmeDetails",store:i.a,data:function(){return{detailData:null,searchList:{keyword:null},programme:{},tableData:null,tableNumber:null,visitprojects:null,cLueProjects:null,contractProjects:null,opportunityProjects:null,page:1,limit:20,thisshow:!0,idArr:{id:null},active:0,stepList:null,updateList:{id:null,projectid:null,addClue:null,monthNum:null,toUpdate:null,weekNum:null,weekMoney:null,monthMoney:null,opportunityNum:null,visitNum:null,monthMinimum:null},dialogVisible:!1,dialogVisible2:!1,dialogVisible3:!1,dialogVisible4:!1,shownext:!0,showfail:!1,retracts:!0}},activated:function(){this.loadData()},methods:{loadData:function(){this.detailData=this.$store.state.prodetailsData.submitData,this.idArr.id=this.$store.state.prodetailsData.submitData.id;var t=this,e=a("1nuA"),i={};i.page=this.page,i.limit=this.limit,o()({method:"get",url:t.$store.state.defaultHttp+"project/getProjectById.do?cId="+t.$store.state.iscId+"&id="+t.detailData.id}).then(function(e){t.programme=e.data,t.cLueProjects=e.data.cLueProjects,t.contractProjects=e.data.contractProjects,t.opportunityProjects=e.data.opportunityProjects,t.visitprojects=e.data.visitprojects}).catch(function(t){}),o()({method:"post",url:t.$store.state.defaultHttp+"project/getProject.do?cId="+t.$store.state.iscId,data:e.stringify(i)}).then(function(e){t.tableData=e.data.map.success,t.tableNumber=e.data.count}).catch(function(t){})},retract:function(){this.thisshow=!this.thisshow,this.retracts=!this.retracts},getRow:function(t,e){this.$store.state.prodetailsData.submitData={id:e.id},this.idArr.id=e.id,this.$options.methods.loadData.bind(this)(!0)},handleclue:function(t,e){this.updateList.id=e.id,this.updateList.projectid=e.projectid,this.updateList.addClue=null,this.updateList.toUpdate=null,this.updateList.monthNum=null,this.updateList.weekNum=null,this.dialogVisible=!0},addcLue:function(){var t=this,e=a("1nuA"),i={};i.id=this.updateList.id,i.projectid=this.updateList.projectid,i.addClue=this.updateList.addClue,i.toUpdate=this.updateList.toUpdate,i.monthNum=this.updateList.monthNum,i.weekNum=this.updateList.weekNum,o()({method:"post",url:t.$store.state.defaultHttp+"cLueProject/updateClueProject.do?cId="+t.$store.state.iscId,data:e.stringify(i)}).then(function(e){e.data.code&&200==e.data.code?(t.$message({message:"操作成功",type:"success"}),t.dialogVisible=!1,t.$store.state.prodetailsData.submitData={id:i.projectid},t.$options.methods.loadData.bind(t)(!0)):t.$message({message:e.data.msg,type:"error"})}).catch(function(e){t.$message.error("提交失败,请重新提交")})},handlevisit:function(t,e){this.updateList.id=e.id,this.updateList.projectid=e.projectid,this.updateList.visitNum=null,this.updateList.monthMinimum=null,this.dialogVisible2=!0},addvisit:function(){var t=this,e=a("1nuA"),i={};i.id=this.updateList.id,i.projectid=this.updateList.projectid,i.visitNum=this.updateList.visitNum,i.monthMinimum=this.updateList.monthMinimum,o()({method:"post",url:t.$store.state.defaultHttp+"visitproject/updateVisitproject.do?cId="+t.$store.state.iscId,data:e.stringify(i)}).then(function(e){e.data.code&&200==e.data.code?(t.$message({message:"操作成功",type:"success"}),t.dialogVisible2=!1,t.$store.state.prodetailsData.submitData={id:i.projectid},t.$options.methods.loadData.bind(t)(!0)):t.$message({message:e.data.msg,type:"error"})}).catch(function(e){t.$message.error("提交失败,请重新提交")})},handleopportunity:function(t,e){this.updateList.id=e.id,this.updateList.projectid=e.projectid,this.updateList.opportunityNum=null,this.dialogVisible3=!0},addopportunity:function(){var t=this,e=a("1nuA"),i={};i.id=this.updateList.id,i.projectid=this.updateList.projectid,i.opportunityNum=this.updateList.opportunityNum,o()({method:"post",url:t.$store.state.defaultHttp+"opportunityProject/updateOpportunityProject.do?cId="+t.$store.state.iscId,data:e.stringify(i)}).then(function(e){e.data.code&&200==e.data.code?(t.$message({message:"操作成功",type:"success"}),t.dialogVisible3=!1,t.$store.state.prodetailsData.submitData={id:i.projectid},t.$options.methods.loadData.bind(t)(!0)):t.$message({message:e.data.msg,type:"error"})}).catch(function(e){t.$message.error("提交失败,请重新提交")})},handlecontract:function(t,e){this.updateList.id=e.id,this.updateList.projectid=e.projectid,this.updateList.monthMoney=null,this.updateList.weekMoney=null,this.dialogVisible4=!0},addcontract:function(){var t=this,e=a("1nuA"),i={};i.id=this.updateList.id,i.projectid=this.updateList.projectid,i.monthMoney=this.updateList.monthMoney,i.weekMoney=this.updateList.weekMoney,o()({method:"post",url:t.$store.state.defaultHttp+"contractProject/updateContractProject.do?cId="+t.$store.state.iscId,data:e.stringify(i)}).then(function(e){e.data.code&&200==e.data.code?(t.$message({message:"操作成功",type:"success"}),t.dialogVisible4=!1,t.$store.state.prodetailsData.submitData={id:i.projectid},t.$options.methods.loadData.bind(t)(!0)):t.$message({message:e.data.msg,type:"error"})}).catch(function(e){t.$message.error("提交失败,请重新提交")})},search:function(){var t=this,e=a("1nuA"),i={};i.searchName=this.searchList.keyword,i.page=this.page,i.limit=this.limit,o()({method:"post",url:t.$store.state.defaultHttp+"opportunity/query.do?cId="+t.$store.state.iscId,data:e.stringify(i)}).then(function(e){t.tableData=e.data.map.success,t.tableNumber=e.data.count}).catch(function(t){})},handleSizeChange:function(t){this.limit=t,this.$options.methods.loadData.bind(this)()},handleCurrentChange:function(t){this.page=t,this.$options.methods.loadData.bind(this)()}}}),n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"prodetcontent",attrs:{gutter:10}},[a("el-col",{attrs:{span:18}},[a("div",{staticClass:"top"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"bold_span"},[t._v(t._s(t.programme.projectName))]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.retracts,expression:"retracts"}],staticClass:"info-btn",staticStyle:{float:"right","margin-left":"10px"},attrs:{size:"mini"},on:{click:function(e){t.retract()}}},[t._v("收起")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.retracts,expression:"!retracts"}],staticClass:"info-btn",staticStyle:{float:"right","margin-left":"10px"},attrs:{size:"mini"},on:{click:function(e){t.retract()}}},[t._v("显示")])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.thisshow,expression:"thisshow"}],staticClass:"text item"},[a("ul",[a("li",[t._v("年份："),a("span",[t._v(t._s(t.programme.time))])]),t._v(" "),a("li",[t._v("状态："),a("span",[t._v(t._s(t.programme.state))])]),t._v(" "),a("li",[t._v("创建时间："),a("span",[t._v(t._s(t.programme.createTime))])]),t._v(" "),a("li",[t._v("创建人："),a("span",[t._v(t._s(t.programme.private_employee))])]),t._v(" "),a("li",[t._v("应用部门："),a("span",[t._v(t._s(t.programme.deptname))])]),t._v(" "),a("li",[t._v("应用机构："),a("span",[t._v(t._s(t.programme.parentname))])])]),t._v(" "),a("p",[t._v(" ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.thisshow,expression:"!thisshow"}]})])],1),t._v(" "),a("div",{staticClass:"top"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("线索和每日考核目标")])]),t._v(" "),a("div",{staticClass:"text item"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.cLueProjects,border:"",strip:""}},[a("el-table-column",{attrs:{label:"岗位","min-width":"110",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"线索/客户新增目标",prop:"addClue","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"线索更新目标",prop:"toUpdate","min-width":"130"}}),t._v(" "),a("el-table-column",{attrs:{label:"每月",prop:"monthNum","min-width":"110"}}),t._v(" "),a("el-table-column",{attrs:{label:"每周",prop:"weekNum","min-width":"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"90","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handleclue(e.$index,e.row)}}},[t._v("编辑")])]}}])})],1)],1)])],1),t._v(" "),a("div",{staticClass:"top"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("拜访周目标")])]),t._v(" "),a("div",{staticClass:"text item"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.visitprojects,border:"",strip:""}},[a("el-table-column",{attrs:{label:"岗位",prop:"name","min-width":"110"}}),t._v(" "),a("el-table-column",{attrs:{label:"拜访目标",prop:"visitNum","min-width":"110"}}),t._v(" "),a("el-table-column",{attrs:{label:"每月最低",prop:"monthMinimum","min-width":"110"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"90","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handlevisit(e.$index,e.row)}}},[t._v("编辑")])]}}])})],1)],1)])],1),t._v(" "),a("div",{staticClass:"top"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("每日商机考核")])]),t._v(" "),a("div",{staticClass:"text item"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.opportunityProjects,border:"",strip:""}},[a("el-table-column",{attrs:{label:"岗位",prop:"name","min-width":"110"}}),t._v(" "),a("el-table-column",{attrs:{label:"商机新增目标",prop:"opportunityNum","min-width":"130"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"90","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handleopportunity(e.$index,e.row)}}},[t._v("编辑")])]}}])})],1)],1)])],1)]),t._v(" "),a("el-col",{staticClass:"right",staticStyle:{padding:"10px"},attrs:{span:6}},[a("div",{staticClass:"searchList",staticStyle:{width:"100%"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入公司名称"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.search(e):null}},model:{value:t.searchList.keyword,callback:function(e){t.$set(t.searchList,"keyword",e)},expression:"searchList.keyword"}}),t._v(" "),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"mini"},on:{click:function(e){t.search()}}})],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"方案名称",prop:"projectName"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{on:{click:function(a){t.getRow(e.$index,e.row)}}},[t._v("\n                        "+t._s(e.row.projectName)+"\n                    ")])]}}])})],1),t._v(" "),a("div",{staticClass:"block numberPage number"},[a("el-pagination",{attrs:{"current-page":t.page,"page-sizes":[20,30,50,100],"page-size":20,layout:"total, sizes, prev, next",total:t.tableNumber},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"线索和每日考核方案",visible:t.dialogVisible,"close-on-click-modal":!1,width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{attrs:{"label-width":"130px",model:t.updateList}},[a("el-form-item",{attrs:{label:"线索/客户新增目标"}},[a("el-input",{staticClass:"oppinput",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.updateList.addClue,callback:function(e){t.$set(t.updateList,"addClue",e)},expression:"updateList.addClue"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"线索更新目标"}},[a("el-input",{staticClass:"oppinput",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.updateList.toUpdate,callback:function(e){t.$set(t.updateList,"toUpdate",e)},expression:"updateList.toUpdate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"每月"}},[a("el-input",{staticClass:"oppinput",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.updateList.monthNum,callback:function(e){t.$set(t.updateList,"monthNum",e)},expression:"updateList.monthNum"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"每周"}},[a("el-input",{staticClass:"oppinput",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.updateList.weekNum,callback:function(e){t.$set(t.updateList,"weekNum",e)},expression:"updateList.weekNum"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addcLue()}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"拜访周目标",visible:t.dialogVisible2,"close-on-click-modal":!1,width:"40%"},on:{"update:visible":function(e){t.dialogVisible2=e}}},[a("el-form",{attrs:{"label-width":"80px",model:t.updateList}},[a("el-form-item",{attrs:{label:"拜访目标"}},[a("el-input",{staticClass:"oppinput",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.updateList.visitNum,callback:function(e){t.$set(t.updateList,"visitNum",e)},expression:"updateList.visitNum"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"每月最低"}},[a("el-input",{staticClass:"oppinput",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.updateList.monthMinimum,callback:function(e){t.$set(t.updateList,"monthMinimum",e)},expression:"updateList.monthMinimum"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible2=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addvisit()}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"每周商机考核",visible:t.dialogVisible3,"close-on-click-modal":!1,width:"40%"},on:{"update:visible":function(e){t.dialogVisible3=e}}},[a("el-form",{attrs:{"label-width":"100px",model:t.updateList}},[a("el-form-item",{attrs:{label:"商机新增目标"}},[a("el-input",{staticClass:"oppinput",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.updateList.opportunityNum,callback:function(e){t.$set(t.updateList,"opportunityNum",e)},expression:"updateList.opportunityNum"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible3=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addopportunity()}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"合同金额",visible:t.dialogVisible4,"close-on-click-modal":!1,width:"40%"},on:{"update:visible":function(e){t.dialogVisible4=e}}},[a("el-form",{attrs:{"label-width":"80px",model:t.updateList}},[a("el-form-item",{attrs:{label:"每月"}},[a("el-input",{staticClass:"oppinput",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.updateList.monthMoney,callback:function(e){t.$set(t.updateList,"monthMoney",e)},expression:"updateList.monthMoney"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"每周"}},[a("el-input",{staticClass:"oppinput",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.updateList.weekMoney,callback:function(e){t.$set(t.updateList,"weekMoney",e)},expression:"updateList.weekMoney"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible4=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addcontract()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(l,n,!1,function(t){a("m3oN")},null,null);e.default=r.exports}});