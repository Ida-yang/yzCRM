webpackJsonp([26],{NqLL:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("wtEF"),i=a("mtWM"),l=a.n(i),o=(a("mw3O"),a("9igS")),n={name:"followlog",store:s.a,data:function(){return{followList:[],listNumber:0,msg:"followlog",searchList:{type:"",label:1,example:"",keyType:null,mechanism:"",department:"",user:""},nullvalue:null,page:1,limit:50,pIdData:[{label:0,value:"全部"},{label:1,value:"我的"},{label:2,value:"部门"},{label:3,value:"机构"}],moduleData:[{label:"",value:"全部"},{label:1,value:"线索"},{label:2,value:"客户"}],timeData:[{label:"",value:"全部"},{label:1,value:"今天"},{label:2,value:"昨天"},{label:3,value:"本周"},{label:4,value:"本月"},{label:5,value:"上月"}],typeData:[{label:1,value:"电话"},{label:2,value:"QQ"},{label:3,value:"微信"},{label:4,value:"邮箱"},{label:5,value:"拜访"}],mechanismData:[],deptnameData:[],userData:[],dialogVisible2:!1,dialogImageUrl2:null,customer_id:null,cusfollow:!1}},mounted:function(){this.loadmechanism(),this.loadData()},activated:function(){this.loadData()},methods:{loadmechanism:function(){var t=this;l()({method:"get",url:t.$store.state.defaultHttp+"dept/selectAllMechanism.do?cId="+t.$store.state.iscId}).then(function(e){t.mechanismData=e.data.map.success}).catch(function(t){})},loadData:function(){var t=this,e=a("1nuA"),s={};0==this.searchList.label?(s.dept=this.searchList.mechanism,s.second=this.searchList.department,s.id=this.searchList.user):1==this.searchList.label?s.pId=t.$store.state.ispId:2==this.searchList.label?s.secondid=t.$store.state.deptid:3==this.searchList.label&&(s.deptid=t.$store.state.insid),s.type=this.searchList.type,s.example=this.searchList.example,s.keyType=this.searchList.keyType,s.page=this.page,s.limit=this.limit,l()({method:"post",url:t.$store.state.defaultHttp+"selectFollowReportForm.do?cId="+t.$store.state.iscId,data:e.stringify(s)}).then(function(e){var a=e.data.map.success;a.forEach(function(e){e.userImagName&&(e.imgUrl=t.$store.state.systemHttp+"/upload/"+t.$store.state.iscId+"/"+e.userImagName),e.userImagName&&null!=e.userImagName||(e.imgUrl=t.$store.state.systemHttp+"/upload/staticImg/avatar.jpg"),e.imgName&&null!==e.imgName&&(e.picture_detail=t.$store.state.systemHttp+"/upload/"+t.$store.state.iscId+"/"+e.imgName),e.enclosureName&&null!==e.enclosureName&&(e.enclosureUrl=t.$store.state.systemHttp+"/upload/"+t.$store.state.iscId+"/"+e.enclosureName),e.followContent=e.followContent.replace(/\n/g,"<br/>")}),t.followList=a,t.listNumber=e.data.count}).catch(function(t){})},openfollow:function(t){this.$store.state.customfollowId={},t.customerpool_id?this.$store.state.customfollowId={customerpool_id:t.customerpool_id,submitUrl:this.$store.state.defaultHttp+"customerpool/getFollowStaffAndpool.do?cId="+this.$store.state.iscId}:t.customertwo_id&&(this.$store.state.customfollowId={customertwoId:t.customertwo_id,submitUrl:this.$store.state.defaultHttp+"getFollowStaff.do?cId="+this.$store.state.iscId}),this.cusfollow=!0,o.a.$emit("cusfollow",this.cusfollow)},showImg:function(t,e){this.dialogImageUrl2=_this.$store.state.systemHttp+"/upload/"+this.$store.state.iscId+"/"+e.imgName,this.dialogVisible2=!0},loaddeptList:function(){var t=this,e=a("1nuA"),s={};s.deptid=this.searchList.mechanism,l()({method:"post",url:t.$store.state.defaultHttp+"dept/getChildrenByMechanism.do?cId="+t.$store.state.iscId,data:e.stringify(s)}).then(function(e){var a=e.data.map.success;t.deptnameData=[{deptid:"",deptname:"全部"}],a.forEach(function(e){t.deptnameData.push({deptid:e.deptid,deptname:e.deptname})})}).catch(function(t){})},loadUser:function(){var t=this,e=a("1nuA"),s={};s.deptid=this.searchList.department,s.page=1,s.limit=1e5,l()({method:"post",url:t.$store.state.defaultHttp+"getPrivateUserAll.do?cId="+t.$store.state.iscId,data:e.stringify(s)}).then(function(e){var a=e.data.map.success;t.userData=[{private_id:"",private_employee:"全部"}],a.forEach(function(e){t.userData.push({private_id:e.private_id,private_employee:e.private_employee})})}).catch(function(t){})},search:function(){!this.searchList.department&&this.searchList.mechanism?this.$options.methods.loaddeptList.bind(this)():this.searchList.department&&this.searchList.mechanism&&this.$options.methods.loadUser.bind(this)(),this.$options.methods.loadData.bind(this)()},SizeChange:function(t){this.limit=t,this.$options.methods.loadData.bind(this)()},CurrentChange:function(t){this.page=t,this.$options.methods.loadData.bind(this)()}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"radioList"},[a("el-radio-group",{model:{value:t.searchList.label,callback:function(e){t.$set(t.searchList,"label",e)},expression:"searchList.label"}},[a("span",{staticClass:"nameList"},[t._v("数据授权：")]),t._v(" "),t._l(t.pIdData,function(e){return a("el-radio",{key:e.label,attrs:{label:e.label},on:{change:function(e){t.search()}}},[t._v(t._s(e.value))])})],2),t._v(" "),a("el-radio-group",{model:{value:t.searchList.type,callback:function(e){t.$set(t.searchList,"type",e)},expression:"searchList.type"}},[a("span",{staticClass:"nameList"},[t._v("模块：")]),t._v(" "),t._l(t.moduleData,function(e){return a("el-radio",{key:e.label,attrs:{label:e.label},on:{change:function(e){t.search()}}},[t._v(t._s(e.value))])})],2),t._v(" "),a("el-radio-group",{model:{value:t.searchList.example,callback:function(e){t.$set(t.searchList,"example",e)},expression:"searchList.example"}},[a("span",{staticClass:"nameList"},[t._v("跟进时间：")]),t._v(" "),t._l(t.timeData,function(e){return a("el-radio",{key:e.label,attrs:{label:e.label},on:{change:function(e){t.search()}}},[t._v(t._s(e.value))])})],2),t._v(" "),a("el-radio-group",{model:{value:t.searchList.keyType,callback:function(e){t.$set(t.searchList,"keyType",e)},expression:"searchList.keyType"}},[a("span",{staticClass:"nameList"},[t._v("跟进类型：")]),t._v(" "),a("el-radio",{attrs:{label:t.nullvalue}},[t._v("全部")]),t._v(" "),t._l(t.typeData,function(e){return a("el-radio",{key:e.label,attrs:{label:e.value},on:{change:function(e){t.search()}}},[t._v(t._s(e.value))])})],2)],1),t._v(" "),0==t.searchList.label?a("div",{staticClass:"searchList",staticStyle:{width:"100%"}},[a("span",{staticClass:"nameList"},[t._v("机构：")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.search},model:{value:t.searchList.mechanism,callback:function(e){t.$set(t.searchList,"mechanism",e)},expression:"searchList.mechanism"}},t._l(t.mechanismData,function(t){return a("el-option",{key:t.deptid,attrs:{label:t.deptname,value:t.deptid}})})),t._v(" "),a("el-button",{staticStyle:{"margin-left":"55px",background:"rgb(52, 63, 83)",color:"#ffffff"},attrs:{icon:"el-icon-circle-close-outline",size:"mini"},on:{click:function(e){t.reset()}}},[t._v("清空")])],1):t._e(),t._v(" "),0==t.searchList.label?a("div",{staticClass:"radioList"},[a("el-radio-group",{model:{value:t.searchList.department,callback:function(e){t.$set(t.searchList,"department",e)},expression:"searchList.department"}},t._l(t.deptnameData,function(e){return a("el-radio",{key:e.deptid,attrs:{label:e.deptid},on:{change:t.search}},[t._v(t._s(e.deptname))])}))],1):t._e(),t._v(" "),0==t.searchList.label?a("div",{staticClass:"radioList"},[a("el-radio-group",{model:{value:t.searchList.user,callback:function(e){t.$set(t.searchList,"user",e)},expression:"searchList.user"}},t._l(t.userData,function(e){return a("el-radio",{key:e.private_id,attrs:{label:e.private_id},on:{change:t.search}},[t._v(t._s(e.private_employee))])})),t._v(" "),a("div",{staticStyle:{width:"100%",height:"20px"}})],1):t._e(),t._v(" "),a("div",{staticClass:"folog_c"},t._l(t.followList,function(e){return a("ul",{key:e.followId,staticClass:"followrecord"},[a("li",{staticClass:"recordicon"},[a("img",{staticClass:"detail_portrait",attrs:{src:e.imgUrl,alt:e.private_employee,title:e.private_employee}})]),t._v(" "),a("li",{staticClass:"verticalline"}),t._v(" "),a("li",{staticClass:"recordcontent"},[a("div",{staticClass:"left_more"},[a("p",[a("span",{staticClass:"de_span_2"},[t._v(t._s(e.contacts[0].name))]),t._v(" "),a("span",{staticClass:"de_span_1"},[t._v(" | ")]),t._v(" "),a("span",{staticClass:"de_span_1"},[t._v(t._s(e.createTime))]),t._v(" "),e.contactTime?a("span",{staticClass:"de_span_1"},[t._v("  --  ")]):t._e(),t._v(" "),a("span",{staticClass:"de_span_1"},[t._v(t._s(e.contactTime))]),t._v("\n                          \n                        "),a("span",{staticClass:"de_span_2"},[t._v(t._s(e.state))]),t._v("\n                          \n                        "),a("span",{staticClass:"de_span_3"},[t._v("  "+t._s(e.followType)+"  ")]),t._v("\n                          \n                        "),a("span",{staticClass:"de_span_4",on:{click:function(a){t.openfollow(e)}}},[t._v(t._s(e.poolname))])]),t._v(" "),a("div",{staticStyle:{"margin-top":"15px","margin-bottom":"15px"},domProps:{innerHTML:t._s(e.followContent)}}),t._v(" "),e.imgName?a("div",{staticClass:"imgbox_two"},[a("img",{attrs:{src:e.picture_detail,alt:"图片",width:"80",height:"80"},on:{click:function(a){t.showImg(a,e)}}})]):t._e(),t._v(" "),e.enclosureName?a("div",[a("a",{attrs:{href:e.enclosureUrl,download:""}},[t._v(t._s(e.enclosureOldName))])]):t._e(),t._v(" "),a("p",{staticClass:"de_span_1"},[t._v(t._s(e.inputType))]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible2},on:{"update:visible":function(e){t.dialogVisible2=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl2,alt:""}})])],1)])])})),t._v(" "),a("div",{staticClass:"block numberPage"},[a("el-pagination",{attrs:{"current-page":t.page,"page-sizes":[50,100,200],"page-size":50,layout:"total, sizes, prev, pager, next, jumper",total:t.listNumber},on:{"size-change":t.SizeChange,"current-change":t.CurrentChange}})],1)])},staticRenderFns:[]};var c=a("VU/8")(n,r,!1,function(t){a("Rgsr")},null,null);e.default=c.exports},Rgsr:function(t,e){}});