webpackJsonp([19],{"5kuu":function(e,t){},D85x:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});s("wtEF");var a=s("mtWM"),r=s.n(a),i=(s("mw3O"),{data:function(){return{datalist:[],defaultProps:{label:"deptname",children:"next"},myform:{title:null,examineTypeId:null,deptNames:[],deptIds:[],remarks:null,id:null},labelList:[],rules:{deptNames:[{required:!0,message:"可见部门不能为空",trigger:"blur"}],title:[{required:!0,message:"审核类型不能为空",trigger:"blur"}]},isDisable:!1,showaddStep:!0}},mounted:function(){this.loadData(),this.setMyForm()},methods:{loadData:function(){var e=this;r()({method:"get",url:e.$store.state.defaultHttp+"dept/getDeptNodeTree.do?cId="+e.$store.state.iscId}).then(function(t){e.datalist=t.data.map.success}).catch(function(e){}),r()({method:"get",url:e.$store.state.defaultHttp+"oaExamineCategoryType/selectList.do?cId="+e.$store.state.iscId}).then(function(t){var s=t.data;e.labelList=s}).catch(function(e){})},setMyForm:function(){var e=this,t=e.$store.state.workApprovalData;e.myform.deptIds=[],e.myform.deptNames=[],e.myform.examineTypeId=t.examineTypeId,t.id&&(e.myform.id=t.id,e.myform.title=t.title,e.myform.remarks=t.remarks,t.deptIdLs.forEach(function(t){e.myform.deptIds.push(t.id),e.myform.deptNames.push(t.name)}),e.$refs.tree.setCheckedKeys(e.myform.deptIds))},handlecheck:function(e,t){var a=this;s("1nuA");this.myform.deptNames=[],t.checkedNodes.forEach(function(e,t){a.myform.deptNames.push(e.deptname)}),this.myform.deptIds=t.checkedKeys},onSubmit:function(){var e=this,t=s("1nuA"),a={id:this.myform.id,examineTypeId:this.myform.examineTypeId,deptIds:this.myform.deptIds,title:this.myform.title,remarks:this.myform.remarks,createUserId:this.$store.state.ispId};this.isDisable=!0,r()({method:"post",url:e.$store.state.defaultHttp+"oaExamineCategory/saveOrUpdate.do?cId="+e.$store.state.iscId+"&pId="+this.$store.state.ispId,data:t.stringify(a)}).then(function(t){t.data.code&&"200"==t.data.code?(e.$message({message:"成功",type:"success"}),e.myform.id?e.closeTag():(e.$store.state.associatedFormsData=t.data.map.oaExamineCategory,e.closeTag(),e.$router.push({path:"/associatedFormsaddOrUpdate"}))):e.$message({message:t.data.msg,type:"error"}),e.isDisable=!1}).catch(function(t){e.isDisable=!1})},closeTag:function(){var e=this,t=void 0;this.$store.state.tagsList.forEach(function(s,a){s.name==e.$options.name&&(t=a)});var s=this.$store.state.tagsList.splice(t,1)[0];(this.$store.state.tagsList[t]?this.$store.state.tagsList[t]:this.$store.state.tagsList[t-1])?s.path===this.$route.fullPath&&this.$router.push("/associatedForms"):this.$router.push("/index")}}}),o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"work_approval_wrap"},[s("el-form",{ref:"myform",attrs:{inline:!0,model:e.myform,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"审核流名称",prop:"title"}},[s("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:e.myform.title,callback:function(t){e.$set(e.myform,"title",t)},expression:"myform.title"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"应用部门",prop:"deptNames"}},[s("el-select",{staticClass:"dept_select",attrs:{multiple:"",placeholder:"请选择应用部门",size:"mini"},model:{value:e.myform.deptNames,callback:function(t){e.$set(e.myform,"deptNames",t)},expression:"myform.deptNames"}},[s("el-option",{staticClass:"droplist",attrs:{value:e.myform.deptNames}},[s("el-tree",{ref:"tree",staticClass:"drop_tree",attrs:{"node-key":"deptid","highlight-current":"","default-expand-all":"","show-checkbox":"","expand-on-click-node":!1,data:e.datalist,props:e.defaultProps},on:{check:e.handlecheck}})],1)],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"审核分类"}},[s("el-select",{attrs:{placeholder:"请选择审核分类",size:"mini"},model:{value:e.myform.examineTypeId,callback:function(t){e.$set(e.myform,"examineTypeId",t)},expression:"myform.examineTypeId"}},e._l(e.labelList,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:"备注"}},[s("el-input",{staticStyle:{width:"38vw"},attrs:{type:"textarea",rows:"5",size:"mini"},model:{value:e.myform.remarks,callback:function(t){e.$set(e.myform,"remarks",t)},expression:"myform.remarks"}})],1)],1),e._v(" "),s("div",{staticClass:"submit_btn"},[s("el-button",{staticStyle:{"margin-right":"100px"},attrs:{type:"primary",disabled:e.isDisable},on:{click:e.onSubmit}},[e._v("立即提交")]),e._v(" "),s("el-button",{on:{click:e.closeTag}},[e._v("取消")])],1)],1)},staticRenderFns:[]};var m=s("VU/8")(i,o,!1,function(e){s("5kuu")},null,null);t.default=m.exports}});