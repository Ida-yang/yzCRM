webpackJsonp([16],{"8CJv":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("INCx"),s=a.n(o),i=a("wtEF"),n=a("mtWM"),l=a.n(n),r=(a("mw3O"),a("PQp9")),u={name:"workOrderDetail",store:i.a,components:{UE:r.a},data:function(){return{msg:"工单详情页",detailData:null,workorderDetails:{},fieldData:[],myform:{id:null,pId:this.$store.state.ispId,solutionMan:this.$store.state.user,solveType:null,time:null,timeConsuming:null},rules:{},solveTypeList:[{index:1,name:"电话"},{index:2,name:"QQ"},{index:3,name:"微信"},{index:4,name:"邮箱"},{index:5,name:"上门"}],knowledgeBase:[],activeName:"first",defaultMsg:"",config:{initialFrameWidth:null,initialFrameHeight:500,elementPathEnabled:!1,wordCount:!1},itemData:[{id:10,amountOfMoney:null,commitTime:null,brand:null,discount:null,discountAfter:null,discountAmount:null,tbGoods:{goodsName:"",describe:""},num:null,price:null,taxAfter:null,taxAmount:null,taxRate:null,unit:null,edit:!1},{id:11,amountOfMoney:null,commitTime:null,brand:null,discount:null,discountAfter:null,discountAmount:null,tbGoods:{goodsName:"",describe:""},num:null,price:null,taxAfter:null,taxAmount:null,taxRate:null,unit:null,edit:!1},{id:12,amountOfMoney:null,commitTime:null,brand:null,discount:null,discountAfter:null,discountAmount:null,tbGoods:{goodsName:"",describe:""},num:null,price:null,taxAfter:null,taxAmount:null,taxRate:null,unit:null,edit:!1}],list:null,selectData:[],scopeIndex:"",cusdiscount:null,custaxRate:null,OKdisabled:!0,classification_id:null,goodsName:null,dialogVisible1:!1,tableData:[],itemList:[],multipleSelection:[],idArr:[],datalist:[],defaultProps:{label:"name",children:"next"},defaultkeys:[1],nodeChange:!1,updateData:[],showsolution:!0,showevaluate:!1,woRemarks:null,ratetexts:["2","4","6","8","10"],isDisable:!1}},activated:function(){this.loadData(),this.getList(),this.getknowledgeBase()},methods:{loadData:function(){var t=this,e=a("1nuA");this.detailData=this.$store.state.workOrderdetaildsData;var o={};o.id=this.detailData.id,l()({method:"post",url:t.$store.state.defaultHttp+"workOrder/queryById.do?cId="+t.$store.state.iscId,data:e.stringify(o)}).then(function(e){t.workorderDetails=e.data,e.data.discount?t.cusdiscount=e.data.discount:t.cusdiscount="100",e.data.taxRate?t.custaxRate=e.data.taxRate:t.custaxRate="0",e.data.solution&&(t.showsolution=!1,t.myform=e.data.solution,t.defaultMsg=e.data.solution.remarks,t.updateData=e.data.solution.partsDetails,t.$options.methods.getItem.bind(t)(),e.data.solution.score&&(t.showevaluate=!0)),t.$options.methods.loadFieldValue.bind(t)()}).catch(function(t){}),l()({method:"get",url:t.$store.state.defaultHttp+"classification/getClassificationNodeTree.do?cId="+t.$store.state.iscId}).then(function(e){t.datalist=e.data.map.success}).catch(function(t){})},getItem:function(){var t=this;this.itemData=[],0!==this.updateData.length&&this.updateData.forEach(function(e,a){for(var o in e.aaa=JSON.parse(e.spec),e.goodspec=[],e.aaa)"null"!==o&&"undefined"!==o&&e.goodspec.push({label:o,value:e.aaa[o]});t.itemData.push({amountOfMoney:e.amountOfMoney,brand:e.brand,discount:e.discount,discountAfter:e.discountAfter,discountAmount:e.discountAmount,goodsId:e.goodsId,tbGoods:{goodsName:e.goodsName,describe:e.describe},id:e.itemId,itemId:e.itemId,num:e.num,price:e.price,taxAfter:e.taxAfter,taxAmount:e.taxAmount,taxRate:e.taxRate,goodspec:e.goodspec,unit:e.unit,edit:!1})})},loadFieldValue:function(){var t=this,e=a("1nuA"),o={};o.id=this.detailData.id,o.label=11,l()({method:"post",url:t.$store.state.defaultHttp+"field/information.do?cId="+t.$store.state.iscId,data:e.stringify(o)}).then(function(e){t.fieldData=e.data}).catch(function(t){})},doShowUE:function(){this.showsolution=!0},selectBase:function(t){this.defaultMsg=t},loadTime:function(){var t=new Date(this.workorderDetails.feedbackTime.replace(/-/g,"/")),e=new Date(this.myform.time.replace(/-/g,"/")).getTime()-t.getTime(),a=Math.floor(e/36e5),o=Math.floor(a/24),s=a%24;this.myform.timeConsuming=o+" 天 "+s+" 小时"},getList:function(){var t=this,e=a("1nuA"),o={page:1,limit:1e6};l()({method:"post",url:t.$store.state.defaultHttp+"goods/search.do?cId="+t.$store.state.iscId,data:e.stringify(o)}).then(function(e){var a=e.data.map.goods;a.forEach(function(e){for(var a in e.aaa=JSON.parse(e.spec),e.goodspec=[],e.aaa)"null"!==a&&"undefined"!==a&&e.goodspec.push({label:a,value:e.aaa[a]});e.image?e.productImg=t.$store.state.systemHttp+"product/"+t.$store.state.iscId+"/"+e.image:e.productImg="../../../../static/img/noProduct.png"}),t.list=a.map(function(e){return t.$set(e,"edit",!1),e}),t.$options.methods.getSelect.bind(t)()}).catch(function(t){})},getknowledgeBase:function(){var t=this,e=a("1nuA"),o={page:1,limit:1e6};l()({method:"post",url:t.$store.state.defaultHttp+"knowledgeBase/queryForList.do?cId="+t.$store.state.iscId,data:e.stringify(o)}).then(function(e){t.knowledgeBase=e.data.map.success}).catch(function(t){})},getData:function(){var t=this,e=a("1nuA"),o={page:1,limit:1e6};o.classification_id=this.classification_id,o.searchName=this.goodsName,l()({method:"post",url:t.$store.state.defaultHttp+"goods/search.do?cId="+t.$store.state.iscId,data:e.stringify(o)}).then(function(e){var a=e.data.map.goods;a.map(function(e){return t.$set(e,"edit",!1),e}),a.forEach(function(e){for(var a in e.aaa=JSON.parse(e.spec),e.goodspec=[],e.aaa)"null"!==a&&"undefined"!==a&&e.goodspec.push({label:a,value:e.aaa[a]});e.image?e.productImg=t.$store.state.systemHttp+"product/"+t.$store.state.iscId+"/"+e.image:e.productImg="../../../../static/img/noProduct.png"}),t.tableData=a}).catch(function(t){})},getSelect:function(){var t=this;this.itemData.forEach(function(e,a){t.list.forEach(function(a,o){a.id==e.id&&t.list.splice(o,1)})}),this.selectData=this.list},handleAdd:function(){this.itemData.push({amountOfMoney:null,commitTime:null,brand:null,discount:null,discountAfter:null,discountAmount:null,tbGoods:{goodsName:"",describe:""},num:null,price:null,taxAfter:null,taxAmount:null,taxRate:null,unit:null,edit:!1})},getSummary:function(t){var e=t.columns,a=t.data,o=[];return e.forEach(function(t,e){if(0!==e){var i=a.map(function(e){return Number(e[t.property])});if("amountOfMoney"==t.property||"discountAmount"==t.property||"discountAfter"==t.property||"taxAmount"==t.property||"taxAfter"==t.property){o[e]=i.reduce(function(t,e){return e+t},0),o[e]=o[e].toFixed(2);var n=s()(o[e]).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"),l=".00",r=o[e].split(".");2===r.length?1===(l=r[1].toString()).length?o[e]=n+"."+l+"0":o[e]=n+"."+l:o[e]=n+l,o[e]+=" 元"}else"num"==t.property?(o[e]=i.reduce(function(t,e){return e+t},0),o[e]):o[e]=""}else o[e]="合计"}),o},cellClick:function(t,e,a,o){var s=this;t.edit=!1,"操作"!==e.label&&(t.edit=!0,this.itemData.forEach(function(e,a){t.id==e.id&&(s.scopeIndex=a)}))},handleFoces:function(t,e){this.scopeIndex=t},handleFilter:function(t){var e=this;this.selectData=[],this.list.forEach(function(a){-1!=a.tbGoods.goodsName.indexOf(t)&&e.selectData.push(a)})},currentChange:function(t){var e=this;this.itemData.forEach(function(a,o){o==e.scopeIndex&&t&&(t.edit=!0,t.price=t.tbGoods.price,t.discount=e.cusdiscount,t.taxRate=e.custaxRate,t.num=1,e.itemData.splice(o,1,t),e.OKdisabled=!1,e.$options.methods.handleinput(1,o,t))}),this.list.forEach(function(a,o){t&&t.id==a.id&&e.list.splice(o,1)}),this.selectData=this.list},handleinput:function(t,e,a){if(a.num&&a.price){var o=parseInt(a.num)*parseFloat(a.price);a.amountOfMoney=o.toFixed(2)}if(a.amountOfMoney&&a.discount){var s=parseFloat(a.amountOfMoney)*parseFloat(a.discount)/100,i=parseFloat(a.amountOfMoney)-s;a.discountAmount=i.toFixed(2),a.discountAfter=s.toFixed(2)}else a.discountAmount=0,a.discountAfter=0;if(a.amountOfMoney&&a.taxRate)if(a.discountAfter){var n=parseFloat(a.discountAfter)*parseFloat(a.taxRate)/100,l=parseFloat(a.discountAfter)+n;a.taxAmount=n.toFixed(2),a.taxAfter=l.toFixed(2)}else{var r=parseFloat(a.amountOfMoney)*parseFloat(a.taxRate)/100,u=parseFloat(a.amountOfMoney)+r;a.taxAmount=r.toFixed(2),a.taxAfter=u.toFixed(2)}else a.taxAmount=0,a.taxAfter=0},showDialog:function(){this.dialogVisible1=!0,this.$options.methods.getData.bind(this)()},handleNodeClick:function(t){this.classification_id=t.id,0==t.next.length&&(this.nodeChange=!0,this.$options.methods.getData.bind(this)())},addInput:function(t){this.goodsName=t,this.$options.methods.getData.bind(this)()},selectInfo:function(t){this.itemList=[],this.multipleSelection=t;var e=t,a=new Array;e.forEach(function(t){0!=t.id&&a.push(t.id)}),this.idArr=a,this.itemList=t},handleSubmit:function(){var t=this,e=[];this.itemData.forEach(function(a,o){a.goodsId&&e.push(a),t.itemList.length&&t.itemList.forEach(function(e,o){e.edit=!0,a.id==e.id&&t.itemList.splice(o,1)})}),this.itemData=e.concat(this.itemList),this.itemData.forEach(function(e,a){t.list.forEach(function(o,s){o.id==e.id&&(e.price=o.tbGoods.price,e.discount=t.cusdiscount,e.taxRate=t.custaxRate,e.num=1,t.list.splice(s,1),t.$options.methods.handleinput(1,a,e))})}),this.selectData=this.list,this.dialogVisible1=!1},confirmEdit:function(t){t.edit=!1,this.$message({message:"本地保存成功",type:"success"})},handleDelete:function(t,e){var a=this;this.itemData.forEach(function(e,o){o==t&&a.itemData.splice(o,1)}),this.$options.methods.getList.bind(this)()},onSubmit:function(){var t=this,e=this.$refs.ue.getUEContent();t.$store.commit("getNowTime"),t.myform.time=t.$store.state.nowtime,t.$options.methods.loadTime.bind(t)(!0);var a=new Array;this.itemData.forEach(function(t){(t.goodsId||t.itemId)&&a.push({price:t.price,num:t.num,itemId:t.id,amountOfMoney:t.amountOfMoney,discount:t.discount,discountAmount:t.discountAmount,discountAfter:t.discountAfter,taxRate:t.taxRate,taxAmount:t.taxAmount,taxAfter:t.taxAfter})});var o={id:this.myform.id,pId:this.myform.pId,solveType:this.myform.solveType,timeConsuming:this.myform.timeConsuming,workOrderId:this.workorderDetails.id,remarks:e,partsDetails:a},s=!1;this.myform.time||(t.$message({message:"解决时间不能为空",type:"error"}),s=!0),s||(this.isDisable=!0,l()({method:"post",url:t.$store.state.defaultHttp+"solution/saveOrUpdate.do?cId="+t.$store.state.iscId,data:o}).then(function(e){e.data.code&&"200"==e.data.code?(t.$message({message:"操作成功",type:"success"}),t.itemData.forEach(function(t){t.edit=!1}),t.$options.methods.loadData.bind(t)()):t.$message({message:e.data.msg,type:"error"}),t.isDisable=!1}).catch(function(e){t.isDisable=!1}))},closeTag:function(){var t=this,e=void 0;this.$store.state.tagsList.forEach(function(a,o){a.name==t.$options.name&&(e=o)});var a=this.$store.state.tagsList.splice(e,1)[0];(this.$store.state.tagsList[e]?this.$store.state.tagsList[e]:this.$store.state.tagsList[e-1])?a.path===this.$route.fullPath&&this.$router.push("/workOrder"):this.$router.push("/index")}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"wo_content",attrs:{gutter:10}},[a("el-col",{attrs:{span:18}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"bold_span"},[t._v("服务工单："+t._s(t.workorderDetails.workOrderNo))])]),t._v(" "),a("div",{staticClass:"wo_c"},[a("ul",{staticClass:"wo_ul_left"},[a("li",{staticClass:"wo_li_left"},[a("span",{staticClass:"bold_span"},[t._v(t._s(t.workorderDetails.problem))])]),t._v(" "),a("li",{staticClass:"wo_li_left"},[a("span",{staticClass:"wo_span_2",domProps:{innerHTML:t._s(t.workorderDetails.describe)}})])])])]),t._v(" "),a("hr",{staticStyle:{height:"20px","background-color":"#f0f0f0",border:"0"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showsolution&&!t.showevaluate,expression:"showsolution && !showevaluate"}],staticClass:"orderHead wo_head"},[a("el-form",{ref:"myform",attrs:{inline:!0,model:t.myform,rules:t.rules}},[a("el-form-item",{staticClass:"first_input",attrs:{prop:"solveType",label:"解决方式","label-width":"90px"}},[a("el-select",{staticClass:"inputbox",attrs:{placeholder:"请选择解决方式"},model:{value:t.myform.solveType,callback:function(e){t.$set(t.myform,"solveType",e)},expression:"myform.solveType"}},t._l(t.solveTypeList,function(t){return a("el-option",{key:t.index,attrs:{label:t.name,value:t.name}})}))],1),t._v(" "),a("el-form-item",{staticClass:"first_input",attrs:{prop:"baseInput",label:"经验库引入","label-width":"90px"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"",filterable:""},on:{change:t.selectBase},model:{value:t.myform.baseInput,callback:function(e){t.$set(t.myform,"baseInput",e)},expression:"myform.baseInput"}},t._l(t.knowledgeBase,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.describe}})}))],1)],1)],1),t._v(" "),a("el-tabs",{staticClass:"wo_card",attrs:{type:"card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticStyle:{"min-height":"300px"},attrs:{label:"说明",name:"first"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showsolution&&!t.showevaluate,expression:"!showsolution && !showevaluate"}],staticStyle:{padding:"0 30px","box-sizing":"border-box"}},[a("div",{domProps:{innerHTML:t._s(t.defaultMsg)}}),t._v(" "),a("el-button",{staticClass:"btn info-btn wo_show",attrs:{size:"mini"},on:{click:t.doShowUE}},[t._v("编辑")])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showsolution&&!t.showevaluate,expression:"showsolution && !showevaluate"}]},[a("div",{staticClass:"editor-container"},[a("UE",{ref:"ue",attrs:{defaultMsg:t.defaultMsg,config:t.config}})],1)])]),t._v(" "),a("el-tab-pane",{attrs:{label:"配件详情",name:"second"}},[a("div",{staticClass:"entry"},[a("el-button",{staticClass:"btn info-btn",attrs:{size:"mini",icon:"el-icon-circle-plus-outline"},on:{click:t.handleAdd}})],1),t._v(" "),a("el-table",{attrs:{data:t.itemData,border:"","highlight-current-row":"","show-summary":"","summary-method":t.getSummary},on:{"cell-click":t.cellClick}},[a("el-table-column",{attrs:{"header-align":"center",fixed:"",align:"center",type:"index",width:"45"}}),t._v(" "),a("el-table-column",{attrs:{label:"产品名称",prop:"tbGoods.goodsName","min-width":"280",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[a("el-select",{attrs:{placeholder:"请选择",filterable:"","filter-method":t.handleFilter},on:{focus:function(a){t.handleFoces(e.$index,e.row)}},model:{value:e.row.tbGoods.goodsName,callback:function(a){t.$set(e.row.tbGoods,"goodsName",a)},expression:"scope.row.tbGoods.goodsName"}},[a("el-option",{staticClass:"droplist",attrs:{value:e.row.tbGoods.goodsName}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.selectData,border:""},on:{"current-change":t.currentChange}},[a("el-table-column",{attrs:{"header-align":"center",type:"index","min-width":"45"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tbGoods.goodsName",label:"产品名称",width:"130"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tbGoods.describe","show-overflow-tooltip":"",label:"描述",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"goodspec",label:"规格属性","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.goodspec,function(e,o){return a("span",{key:o},[t._v(t._s(e.label+"："+e.value))])})}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"unit",label:"单位","min-width":"90"}})],1)],1)],1),t._v(" "),a("el-button",{staticClass:"btn info-btn",staticStyle:{width:"30px",height:"28px",padding:"0"},attrs:{size:"mini",icon:"el-icon-more"},on:{click:function(e){t.showDialog()}}})]:a("span",[t._v(t._s(e.row.tbGoods.goodsName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"描述",prop:"tbGoods.describe","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"规格属性",prop:"goodspec","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.goodspec,function(e,o){return a("span",{key:o},[t._v(t._s(e.value+"/"))])})}}])}),t._v(" "),a("el-table-column",{attrs:{label:"单位",prop:"unit","min-width":"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"num","min-width":"100",label:"数量"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')",size:"small"},on:{input:function(a){t.handleinput(a,e.$index,e.row)}},model:{value:e.row.num,callback:function(a){t.$set(e.row,"num",a)},expression:"scope.row.num"}})]:a("span",[t._v(t._s(e.row.num))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"price","min-width":"120",label:"单价"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'.')",size:"small"},on:{input:function(a){t.handleinput(a,e.$index,e.row)}},model:{value:e.row.price,callback:function(a){t.$set(e.row,"price",a)},expression:"scope.row.price"}})]:a("span",[t._v(t._s(e.row.price))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"amountOfMoney","min-width":"120",label:"金额"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'.')",size:"small"},on:{input:function(a){t.handleinput(a,e.$index,e.row)}},model:{value:e.row.amountOfMoney,callback:function(a){t.$set(e.row,"amountOfMoney",a)},expression:"scope.row.amountOfMoney"}})]:a("span",[t._v(t._s(e.row.amountOfMoney))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"discount","min-width":"90",label:"折扣"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'.')",size:"small"},on:{input:function(a){t.handleinput(a,e.$index,e.row)}},model:{value:e.row.discount,callback:function(a){t.$set(e.row,"discount",a)},expression:"scope.row.discount"}},[a("span",{staticStyle:{"margin-right":"5px","line-height":"34px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v("%")])])]:e.row.discount?a("span",[t._v(t._s(e.row.discount+" %"))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"discountAmount","min-width":"120",label:"折扣额"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'.')",size:"small"},model:{value:e.row.discountAmount,callback:function(a){t.$set(e.row,"discountAmount",a)},expression:"scope.row.discountAmount"}})]:a("span",[t._v(t._s(e.row.discountAmount))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"discountAfter","min-width":"120",label:"折后金额"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'.')",size:"small"},model:{value:e.row.discountAfter,callback:function(a){t.$set(e.row,"discountAfter",a)},expression:"scope.row.discountAfter"}})]:a("span",[t._v(t._s(e.row.discountAfter))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"taxRate","min-width":"90",label:"税率"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'.')",size:"small"},on:{input:function(a){t.handleinput(a,e.$index,e.row)}},model:{value:e.row.taxRate,callback:function(a){t.$set(e.row,"taxRate",a)},expression:"scope.row.taxRate"}},[a("span",{staticStyle:{"margin-right":"5px","line-height":"34px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v("%")])])]:a("span",[t._v(t._s(e.row.taxRate))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"taxAmount","min-width":"120",label:"税额"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'.')",size:"small"},model:{value:e.row.taxAmount,callback:function(a){t.$set(e.row,"taxAmount",a)},expression:"scope.row.taxAmount"}})]:a("span",[t._v(t._s(e.row.taxAmount))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"taxAfter","min-width":"120",label:"税后金额"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'.')",size:"small"},model:{value:e.row.taxAfter,callback:function(a){t.$set(e.row,"taxAfter",a)},expression:"scope.row.taxAfter"}})]:a("span",[t._v(t._s(e.row.taxAfter))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"brand","min-width":"80",label:"产品品牌"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{width:"30px",height:"30px",padding:"0"},attrs:{type:"success",plain:"",disabled:!e.row.edit,icon:"el-icon-circle-check-outline"},on:{click:function(a){t.confirmEdit(e.row)}}}),t._v(" "),a("el-button",{staticStyle:{width:"30px",height:"30px",padding:"0"},attrs:{type:"danger",plain:"",icon:"el-icon-delete"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}})]}}])})],1)],1)],1),t._v(" "),t.showevaluate?a("hr",{staticStyle:{height:"20px","background-color":"#f0f0f0",border:"0"}}):t._e(),t._v(" "),t.showevaluate?a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"bold_span"},[t._v("评价")])]),t._v(" "),a("div",{staticClass:"block"},[a("el-rate",{staticClass:"wo_evaluate",attrs:{disabled:"","show-text":"",texts:t.ratetexts},model:{value:t.workorderDetails.solution.score,callback:function(e){t.$set(t.workorderDetails.solution,"score",e)},expression:"workorderDetails.solution.score"}}),t._v(" "),a("p",{staticClass:"wo_p"},[t._v(t._s(t.workorderDetails.solution.content))])],1)]):t._e(),t._v(" "),a("el-dialog",{staticClass:"orderDialog",attrs:{title:"选择产品",visible:t.dialogVisible1,"close-on-click-modal":!1,width:"80%",center:""},on:{"update:visible":function(e){t.dialogVisible1=e}}},[a("div",{staticClass:"otherleftcontent"},[a("el-tree",{attrs:{"node-key":"id","highlight-current":"",accordion:"","expand-on-click-node":"",data:t.datalist,props:t.defaultProps,"default-expanded-keys":t.defaultkeys},on:{"node-click":t.handleNodeClick}})],1),t._v(" "),a("div",{staticClass:"otherightcontent"},[a("span",[t._v("产品名称：")]),a("el-input",{staticStyle:{width:"200px"},on:{input:t.addInput},model:{value:t.goodsName,callback:function(e){t.goodsName=e},expression:"goodsName"}}),t._v(" "),a("br"),a("br"),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",fit:""},on:{"selection-change":t.selectInfo}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",type:"selection","min-width":"45"},on:{"selection-change":t.selectInfo}}),t._v(" "),a("el-table-column",{attrs:{prop:"tbGoods.goodsName",label:"产品名称",width:"130"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tbGoods.describe","show-overflow-tooltip":"",label:"描述",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"goodspec",label:"规格属性","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.goodspec,function(e,o){return a("span",{key:o},[t._v(t._s(e.label+"："+e.value))])})}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"unit",label:"单位",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"brand",label:"品牌",width:"90"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer order_foot",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible1=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.handleSubmit()}}},[t._v("确 定")])],1)])],1),t._v(" "),a("el-col",{staticClass:"right",attrs:{span:6}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"bold_span"},[t._v("基本信息")])]),t._v(" "),a("div",{staticClass:"wo_c"},[a("ul",{staticClass:"wo_ul_right"},[a("li",[a("span",[t._v("公司名称：")]),t._v(t._s(t.workorderDetails.customerpool))]),t._v(" "),a("li",[a("span",[t._v("联系人：")]),t._v(t._s(t.workorderDetails.contacts))]),t._v(" "),a("li",[a("span",[t._v("电话：")]),t._v(t._s(t.workorderDetails.phone))]),t._v(" "),a("li",[a("span",[t._v("反馈时间：")]),t._v(t._s(t.workorderDetails.feedbackTime))]),t._v(" "),a("li",[a("span",[t._v("反馈方式：")]),t._v(t._s(t.workorderDetails.feedbackType))]),t._v(" "),a("li",[a("span",[t._v("受理人：")]),t._v(t._s(t.workorderDetails.acceptanceName))]),t._v(" "),a("li",[a("span",[t._v("工单类型：")]),t._v(t._s(t.workorderDetails.serviceTypeName))]),t._v(" "),a("li",[a("span",[t._v("销售单号：")]),t._v(t._s(t.workorderDetails.orderNo))]),t._v(" "),a("li",[a("span",[t._v("制单人：")]),t._v(t._s(t.workorderDetails.private_employee))]),t._v(" "),a("li",[a("span",[t._v("负责人：")]),t._v(t._s(t.workorderDetails.ascription))]),t._v(" "),a("li",[a("span",[t._v("部门：")]),t._v(t._s(t.workorderDetails.deptname))]),t._v(" "),a("li",[a("span",[t._v("机构：")]),t._v(t._s(t.workorderDetails.parentname))]),t._v(" "),t._l(t.fieldData,function(e,o){return a("li",{key:o},[a("span",[t._v(t._s(e.name)+"：")]),t._v(t._s(e.value)+"\n                    ")])})],2),t._v(" "),t.workorderDetails.solution?a("ul",{staticClass:"wo_ul_right"},[a("li",[a("span",[t._v("解决人：")]),t._v(t._s(t.myform.solutionMan))]),t._v(" "),a("li",[a("span",[t._v("解决时间：")]),t._v(t._s(t.myform.time))]),t._v(" "),a("li",[a("span",[t._v("耗时：")]),t._v(t._s(t.myform.timeConsuming))]),t._v(" "),a("li",[a("span",[t._v("解决方式：")]),t._v(t._s(t.myform.solveType))])]):t._e()])])],1),t._v(" "),a("div",{staticClass:"submit_btn"},[a("el-button",{staticStyle:{"margin-right":"100px"},attrs:{type:"primary",disabled:t.isDisable},on:{click:t.onSubmit}},[t._v("立即提交")]),t._v(" "),a("el-button",{on:{click:t.closeTag}},[t._v("取消")])],1)],1)},staticRenderFns:[]};var c=a("VU/8")(u,d,!1,function(t){a("iLqX")},null,null);e.default=c.exports},iLqX:function(t,e){}});