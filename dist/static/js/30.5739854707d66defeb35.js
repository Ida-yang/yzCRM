webpackJsonp([30],{XhB4:function(t,e){},z4oW:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("INCx"),a=o.n(s),i=(o("wtEF"),o("mtWM")),n=o.n(i),l=(o("mw3O"),{name:"name",data:function(){return{orderNo:null,datalist:[],defaultProps:{label:"name",children:"next"},defaultkeys:[1],list:null,selectData:[],options:[],itemData:[{id:10,amountOfMoney:null,commitTime:null,brand:null,discount:null,discountAfter:null,discountAmount:null,tbGoods:{goodsName:"",describe:""},num:null,price:null,taxAfter:null,taxAmount:null,taxRate:null,unit:null,edit:!1},{id:11,amountOfMoney:null,commitTime:null,brand:null,discount:null,discountAfter:null,discountAmount:null,tbGoods:{goodsName:"",describe:""},num:null,price:null,taxAfter:null,taxAmount:null,taxRate:null,unit:null,edit:!1},{id:12,amountOfMoney:null,commitTime:null,brand:null,discount:null,discountAfter:null,discountAmount:null,tbGoods:{goodsName:"",describe:""},num:null,price:null,taxAfter:null,taxAmount:null,taxRate:null,unit:null,edit:!1},{id:13,amountOfMoney:null,commitTime:null,brand:null,discount:null,discountAfter:null,discountAmount:null,tbGoods:{goodsName:"",describe:""},num:null,price:null,taxAfter:null,taxAmount:null,taxRate:null,unit:null,edit:!1},{id:14,amountOfMoney:null,commitTime:null,brand:null,discount:null,discountAfter:null,discountAmount:null,tbGoods:{goodsName:"",describe:""},num:null,price:null,taxAfter:null,taxAmount:null,taxRate:null,unit:null,edit:!1}],selectList:[],itemList:[],tableData:[],scopeIndex:null,nodeChange:!1,myform:{customerpoolId:null,contactId:null,orderTime:null,settlement:null,deliveryMode:null,deliveryAddress:null,user:this.$store.state.user,ascriptionId:null,ascription:null,department:null,mechanism:null,remarks:null},rules:{customerpoolId:[{required:!0,message:"公司名称不能为空",trigger:"blur"}],orderTime:[{required:!0,message:"订单时间不能为空",trigger:"blur"}],settlement:[{required:!0,message:"结算方式不能为空",trigger:"blur"}]},deliveryMethod:[],customerList:[],contactsList:[],brandList:[],settlementMethod:[{id:101,name:"一次性付款"},{id:102,name:"分次付款"},{id:103,name:"月结付款"}],customerId:null,cusdiscount:null,custaxRate:null,isDisable:!1,submitAdd:!0,goodsName:"",dialogVisible:!1,classification_id:null,idArr:[],multipleSelection:null,OKdisabled:!0,filterList:null,checklist:null}},mounted:function(){this.getList(),this.loadOther(),this.getData(),this.reloadData()},methods:{reloadData:function(){var t=this,e=o("1nuA"),s={type:"销售订单详情"},a={type:"销售订单详情",state:1};n()({method:"post",url:t.$store.state.defaultHttp+"userPageInfo/getAllUserPage.do?cId="+t.$store.state.iscId+"&pId="+t.$store.state.ispId,data:e.stringify(s)}).then(function(e){t.filterList=e.data}).catch(function(t){}),n()({method:"post",url:t.$store.state.defaultHttp+"userPageInfo/getUserPage.do?cId="+t.$store.state.iscId+"&pId="+t.$store.state.ispId,data:e.stringify(a)}).then(function(e){t.checklist=e.data}).catch(function(t){})},getList:function(){var t=this,e=o("1nuA"),s={page:1,limit:1e6};n()({method:"post",url:t.$store.state.defaultHttp+"goods/search.do?cId="+t.$store.state.iscId,data:e.stringify(s)}).then(function(e){var o=e.data.map.goods;t.list=o.map(function(e){return t.$set(e,"edit",!1),e}),o.forEach(function(t){for(var e in t.aaa=JSON.parse(t.spec),t.goodspec=[],t.aaa)"null"!==e&&"undefined"!==e&&t.goodspec.push({label:e,value:t.aaa[e]})}),t.$options.methods.getSelect.bind(t)()}).catch(function(t){})},getData:function(){var t=this,e=o("1nuA"),s={page:1,limit:1e6};s.classification_id=this.classification_id,s.searchName=this.goodsName,n()({method:"post",url:t.$store.state.defaultHttp+"goods/search.do?cId="+t.$store.state.iscId,data:e.stringify(s)}).then(function(e){var o=e.data.map.goods;o.map(function(e){return t.$set(e,"edit",!1),e}),o.forEach(function(t){for(var e in t.aaa=JSON.parse(t.spec),t.goodspec=[],t.aaa)"null"!==e&&"undefined"!==e&&t.goodspec.push({label:e,value:t.aaa[e]})}),t.tableData=o}).catch(function(t){})},loadOther:function(){var t=this,e=o("1nuA"),s={type:"交货方式"},a={page:1,limit:1e7},i=new Date,l=i.getFullYear(),r=i.getMonth()+1,d=i.getDate();r=r<10?"0"+r:r,d=d<10?"0"+d:d,this.myform.orderTime=l+"-"+r+"-"+d,n()({method:"post",url:t.$store.state.defaultHttp+"typeInfo/getTypeInfoGroupByType.do?cId="+t.$store.state.iscId,data:e.stringify(s)}).then(function(e){t.deliveryMethod=e.data}).catch(function(t){}),n()({method:"post",url:t.$store.state.defaultHttp+"customerpool/query.do?cId="+t.$store.state.iscId,data:e.stringify(a)}).then(function(e){t.customerList=e.data.map.success}).catch(function(t){}),n()({method:"post",url:t.$store.state.defaultHttp+"brand/selectBrandList.do?cId="+t.$store.state.iscId,data:e.stringify(a)}).then(function(e){t.brandList=e.data.map.brands}).catch(function(t){}),n()({method:"get",url:t.$store.state.defaultHttp+"classification/getClassificationNodeTree.do?cId="+t.$store.state.iscId}).then(function(e){t.datalist=e.data.map.success}).catch(function(t){})},loadContact:function(){var t=this,e=o("1nuA"),s={};s.customerpool_id=this.customerId,n()({method:"post",url:t.$store.state.defaultHttp+"getPoolContactsName.do?cId="+t.$store.state.iscId,data:e.stringify(s)}).then(function(e){t.contactsList=e.data.map.success}).catch(function(t){})},getSelect:function(){var t=this;this.itemData.forEach(function(e,o){t.list.forEach(function(o,s){o.id==e.id&&t.list.splice(s,1)})}),this.selectData=this.list},selectCustomer:function(t){var e=this;this.customerId=t,this.customerList.forEach(function(o){o.id==t&&(e.myform.ascriptionId=o.privateUser[0].private_id,e.myform.ascription=o.privateUser[0].private_employee,e.myform.department=o.deptname,e.myform.mechanism=o.parentname),o.discount?e.cusdiscount=o.discount:e.cusdiscount="100",o.taxRate?e.custaxRate=o.taxRate:e.custaxRate="0"}),this.$options.methods.loadContact.bind(this)()},handleAdd:function(){this.itemData.push({amountOfMoney:null,commitTime:null,brand:null,discount:null,discountAfter:null,discountAmount:null,tbGoods:{goodsName:"",describe:""},num:null,price:null,taxAfter:null,taxAmount:null,taxRate:null,unit:null,edit:!1})},cellClick:function(t,e,o,s){var a=this;t.edit=!1,"操作"!==e.label&&(this.myform.customerpoolId?(t.edit=!0,this.itemData.forEach(function(e,o){t.id==e.id&&(a.scopeIndex=o)})):this.$message({message:"请先选择客户",type:"error"}))},handleDelete:function(t,e){var o=this;this.itemData.forEach(function(e,s){s==t&&o.itemData.splice(s,1)}),this.$options.methods.getList.bind(this)()},confirmEdit:function(t){t.edit=!1,this.$message({message:"本地保存成功",type:"success"})},handleFoces:function(t,e){this.scopeIndex=t},handleFilter:function(t){var e=this;this.selectData=[],this.list.forEach(function(o){-1!=o.tbGoods.goodsName.indexOf(t)&&e.selectData.push(o)})},currentChange:function(t){var e=this;this.itemData.forEach(function(o,s){s==e.scopeIndex&&t&&(t.edit=!0,t.price=t.tbGoods.price,t.discount=e.cusdiscount,t.taxRate=e.custaxRate,t.num=1,e.itemData.splice(s,1,t),e.OKdisabled=!1,e.$options.methods.handleinput(1,s,t))}),this.list.forEach(function(o,s){t&&t.id==o.id&&e.list.splice(s,1)}),this.selectData=this.list},handleinput:function(t,e,o){if(o.num&&o.price){var s=parseInt(o.num)*parseFloat(o.price);o.amountOfMoney=s.toFixed(2)}if(o.amountOfMoney&&o.discount){var a=parseFloat(o.amountOfMoney)*parseFloat(o.discount)/100,i=parseFloat(o.amountOfMoney)-a;o.discountAmount=i.toFixed(2),o.discountAfter=a.toFixed(2)}else o.discountAmount=0,o.discountAfter=0;if(o.amountOfMoney&&o.taxRate)if(o.discountAfter){var n=parseFloat(o.discountAfter)*parseFloat(o.taxRate)/100,l=parseFloat(o.discountAfter)+n;o.taxAmount=n.toFixed(2),o.taxAfter=l.toFixed(2)}else{var r=parseFloat(o.amountOfMoney)*parseFloat(o.taxRate)/100,d=parseFloat(o.amountOfMoney)+r;o.taxAmount=r.toFixed(2),o.taxAfter=d.toFixed(2)}else o.taxAmount=0,o.taxAfter=0},showDialog:function(){this.dialogVisible=!0,this.$options.methods.getData.bind(this)()},handleNodeClick:function(t){this.classification_id=t.id,0==t.next.length&&(this.nodeChange=!0,this.$options.methods.getData.bind(this)())},addInput:function(t){this.goodsName=t,this.$options.methods.getData.bind(this)()},selectInfo:function(t){this.itemList=[],this.multipleSelection=t;var e=t,o=new Array;e.forEach(function(t){0!=t.id&&o.push(t.id)}),this.idArr=o,this.itemList=t},selectItem:function(){var t=this;this.selectList.length&&this.selectList.forEach(function(e,o){t.itemList.push(e),t.itemList.forEach(function(o,s){e.id==o.id&&t.itemList.splice(s,1)})})},handleSubmit:function(){var t=this,e=[];this.itemData.forEach(function(o,s){o.goodsId&&e.push(o),t.itemList.length&&t.itemList.forEach(function(e,s){e.edit=!0,o.id==e.id&&t.itemList.splice(s,1)})}),this.itemData=e.concat(this.itemList),this.itemData.forEach(function(e,o){t.list.forEach(function(s,a){s.id==e.id&&(e.price=s.tbGoods.price,e.discount=t.cusdiscount,e.taxRate=t.custaxRate,e.num=1,t.list.splice(a,1),t.$options.methods.handleinput(1,o,e))})}),this.selectData=this.list,this.dialogVisible=!1},getSummary:function(t){var e=t.columns,o=t.data,s=[];return e.forEach(function(t,e){if(0!==e){var i=o.map(function(e){return Number(e[t.property])});if("amountOfMoney"==t.property||"discountAmount"==t.property||"discountAfter"==t.property||"taxAmount"==t.property||"taxAfter"==t.property){s[e]=i.reduce(function(t,e){return e+t},0),s[e]=s[e].toFixed(2);var n=a()(s[e]).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"),l=".00",r=s[e].split(".");2===r.length?1===(l=r[1].toString()).length?s[e]=n+"."+l+"0":s[e]=n+"."+l:s[e]=n+l,s[e]+=" 元"}else"num"==t.property?(s[e]=i.reduce(function(t,e){return e+t},0),s[e]):s[e]=""}else s[e]="合计"}),s},onSubmit:function(){var t=this,e=(o("1nuA"),0),s=new Array;this.itemData.forEach(function(t,o){t.goodsId&&(e+=parseFloat(t.taxAfter),s.push({itemId:t.id,num:parseInt(t.num),price:parseFloat(t.price),commitTime:t.commitTime,amountOfMoney:t.amountOfMoney,discount:t.discount,discountAmount:t.discountAmount,discountAfter:t.discountAfter,taxRate:t.taxRate,taxAmount:t.taxAmount,taxAfter:t.taxAfter}))});var a={customerpoolId:this.myform.customerpoolId,contactId:this.myform.contactId,orderTime:this.myform.orderTime,settlement:this.myform.settlement,deliveryMode:this.myform.deliveryMode,deliveryAddress:this.myform.deliveryAddress,pId:parseInt(this.$store.state.ispId),ascriptionId:this.myform.ascriptionId,remarks:this.myform.remarks,totalSum:e,orderDetails:s},i=!1;a.orderDetails.length||(t.$message({message:"产品不能为空",type:"error"}),i=!0),a.settlement||(t.$message({message:"结算方式不能为空",type:"error"}),i=!0),a.orderTime||(t.$message({message:"订单时间不能为空",type:"error"}),i=!0),a.customerpoolId||(t.$message({message:"客户名称不能为空",type:"error"}),i=!0),i||(this.isDisable=!0,n()({method:"post",url:t.$store.state.defaultHttp+"order/insert.do?cId="+t.$store.state.iscId,data:a}).then(function(e){e.data.code&&"200"==e.data.code?(t.$message({message:"添加成功",type:"success"}),e.data.map.order&&(t.submitAdd=!1,t.myform.id=e.data.map.order.id,t.orderNo=e.data.map.order.orderNo),t.itemData.forEach(function(t){t.edit=!1})):t.$message({message:e.data.msg,type:"error"}),t.isDisable=!1}).catch(function(e){t.isDisable=!1}))},updateSubmit:function(){var t=this,e=(o("1nuA"),0),s=new Array;this.itemData.forEach(function(t,o){t.goodsId&&(e+=parseFloat(t.taxAfter),s.push({itemId:t.id,num:parseInt(t.num),price:parseFloat(t.price),commitTime:t.commitTime,amountOfMoney:t.amountOfMoney,discount:t.discount,discountAmount:t.discountAmount,discountAfter:t.discountAfter,taxRate:t.taxRate,taxAmount:t.taxAmount,taxAfter:t.taxAfter}))});var a={id:this.myform.id,customerpoolId:this.myform.customerpoolId,contactId:this.myform.contactId,orderTime:this.myform.orderTime,settlement:this.myform.settlement,deliveryMode:this.myform.deliveryMode,deliveryAddress:this.myform.deliveryAddress,pId:parseInt(this.$store.state.ispId),ascriptionId:this.myform.ascriptionId,remarks:this.myform.remarks,totalSum:e,orderDetails:s};this.isDisable=!0,n()({method:"post",url:t.$store.state.defaultHttp+"order/update.do?cId="+t.$store.state.iscId,data:a}).then(function(e){e.data.code&&"200"==e.data.code?t.$message({message:"编辑成功",type:"success"}):t.$message({message:e.data.msg,type:"error"}),t.isDisable=!1}).catch(function(e){t.isDisable=!1})},submitOrClose:function(){var t=this,e=(o("1nuA"),0),s=new Array;this.itemData.forEach(function(t,o){t.goodsId&&(e+=parseFloat(t.taxAfter),s.push({itemId:t.id,num:parseInt(t.num),price:parseFloat(t.price),commitTime:t.commitTime,amountOfMoney:t.amountOfMoney,discount:t.discount,discountAmount:t.discountAmount,discountAfter:t.discountAfter,taxRate:t.taxRate,taxAmount:t.taxAmount,taxAfter:t.taxAfter}))});var a={customerpoolId:this.myform.customerpoolId,contactId:this.myform.contactId,orderTime:this.myform.orderTime,settlement:this.myform.settlement,deliveryMode:this.myform.deliveryMode,deliveryAddress:this.myform.deliveryAddress,pId:parseInt(this.$store.state.ispId),ascriptionId:this.myform.ascriptionId,remarks:this.myform.remarks,totalSum:e,orderDetails:s},i=!1;a.orderDetails.length||(t.$message({message:"产品不能为空",type:"error"}),i=!0),a.settlement||(t.$message({message:"结算方式不能为空",type:"error"}),i=!0),a.orderTime||(t.$message({message:"订单时间不能为空",type:"error"}),i=!0),a.customerpoolId||(t.$message({message:"客户名称不能为空",type:"error"}),i=!0),i||(this.isDisable=!0,n()({method:"post",url:t.$store.state.defaultHttp+"order/insert.do?cId="+t.$store.state.iscId,data:a}).then(function(e){e.data.code&&"200"==e.data.code?(t.$message({message:"添加成功",type:"success"}),t.closeTag()):t.$message({message:e.data.msg,type:"error"}),t.isDisable=!1}).catch(function(e){t.isDisable=!1}))},closeTag:function(){var t=this,e=void 0;this.$store.state.tagsList.forEach(function(o,s){o.name==t.$options.name&&(e=s)});var o=this.$store.state.tagsList.splice(e,1)[0];(this.$store.state.tagsList[e]?this.$store.state.tagsList[e]:this.$store.state.tagsList[e-1])?o.path===this.$route.fullPath&&this.$router.push("/order"):this.$router.push("/index")},hangleChange:function(t,e){var s=this,a=o("1nuA"),i={};i.pageInfoId=e.pageInfoId,i.state=1==t?1:0,n()({method:"post",url:s.$store.state.defaultHttp+"userPageInfo/updateUserPageByid.do?cId="+s.$store.state.iscId+"&pId="+s.$store.state.ispId,data:a.stringify(i)}).then(function(t){t.data&&"success"==t.data&&s.$options.methods.reloadData.bind(s)(!0)}).catch(function(t){s.$message.error("提交失败，请重新提交")})}}}),r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"orderadd_c"},[o("el-card",{staticClass:"box-card"},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",{staticClass:"bold_span"},[t._v("销售订单"),t.orderNo?o("span",{staticClass:"bold_span"},[t._v("："+t._s(t.orderNo))]):t._e()])]),t._v(" "),o("div",{staticClass:"orderHead"},[o("el-form",{ref:"myform",attrs:{inline:!0,model:t.myform,rules:t.rules}},[o("el-form-item",{staticClass:"first_input",attrs:{prop:"customerpoolId",label:"公司名称","label-width":"90px"}},[o("el-select",{staticClass:"inputbox",attrs:{placeholder:"请选择公司名称",filterable:""},on:{change:t.selectCustomer},model:{value:t.myform.customerpoolId,callback:function(e){t.$set(t.myform,"customerpoolId",e)},expression:"myform.customerpoolId"}},t._l(t.customerList,function(t){return o("el-option",{key:t.id,attrs:{label:t.pName,value:t.id}})}))],1),t._v(" "),o("el-form-item",{staticClass:"first_input",attrs:{label:"联系人","label-width":"90px"}},[o("el-select",{staticClass:"inputbox",attrs:{placeholder:"请选择联系人"},model:{value:t.myform.contactId,callback:function(e){t.$set(t.myform,"contactId",e)},expression:"myform.contactId"}},t._l(t.contactsList,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),o("el-form-item",{staticClass:"first_input",attrs:{prop:"orderTime",label:"订单时间","label-width":"90px"}},[o("el-date-picker",{staticClass:"inputbox",attrs:{type:"date",placeholder:"选择订单时间",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.myform.orderTime,callback:function(e){t.$set(t.myform,"orderTime",e)},expression:"myform.orderTime"}})],1),t._v(" "),o("el-form-item",{staticClass:"first_input",attrs:{prop:"settlement",label:"结算方式","label-width":"90px"}},[o("el-select",{staticClass:"inputbox",attrs:{placeholder:"请选择结算方式"},model:{value:t.myform.settlement,callback:function(e){t.$set(t.myform,"settlement",e)},expression:"myform.settlement"}},t._l(t.settlementMethod,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})}))],1),t._v(" "),o("el-form-item",{staticClass:"first_input",attrs:{label:"交货方式","label-width":"90px"}},[o("el-select",{staticClass:"inputbox",attrs:{placeholder:"请选择交货方式"},model:{value:t.myform.deliveryMode,callback:function(e){t.$set(t.myform,"deliveryMode",e)},expression:"myform.deliveryMode"}},t._l(t.deliveryMethod,function(t){return o("el-option",{key:t.id,attrs:{label:t.typeName,value:t.id}})}))],1),t._v(" "),o("el-form-item",{staticClass:"first_input",attrs:{label:"交货地址","label-width":"90px"}},[o("el-input",{staticClass:"inputbox",model:{value:t.myform.deliveryAddress,callback:function(e){t.$set(t.myform,"deliveryAddress",e)},expression:"myform.deliveryAddress"}})],1),t._v(" "),o("el-form-item",{staticClass:"first_input",attrs:{label:"备注","label-width":"90px"}},[o("el-input",{staticClass:"inputbox",model:{value:t.myform.remarks,callback:function(e){t.$set(t.myform,"remarks",e)},expression:"myform.remarks"}})],1)],1)],1)]),t._v(" "),o("div",{staticClass:"entry"},[o("el-button",{staticClass:"btn info-btn",attrs:{size:"mini",icon:"el-icon-circle-plus-outline"},on:{click:t.handleAdd}}),t._v(" "),o("el-popover",{attrs:{placement:"bottom",width:"100",trigger:"click"}},[o("el-checkbox-group",{staticClass:"checklist",staticStyle:{"max-height":"600px","overflow-y":"overlay","overflow-x":"hidden"},model:{value:t.checklist,callback:function(e){t.checklist=e},expression:"checklist"}},t._l(t.filterList,function(e){return o("el-checkbox",{key:e.id,staticClass:"checkone",attrs:{label:e.name,value:e.state},on:{change:function(o){t.hangleChange(o,e)}}})})),t._v(" "),o("el-button",{staticClass:"info-btn screen",attrs:{slot:"reference",icon:"el-icon-more",type:"mini"},slot:"reference"})],1)],1),t._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.itemData,border:"",fit:"","highlight-current-row":"","show-summary":"","summary-method":t.getSummary},on:{"cell-click":t.cellClick}},[o("el-table-column",{attrs:{"header-align":"center",fixed:"",align:"center",type:"index","min-width":"45"}}),t._v(" "),t._l(t.filterList,function(e,s){return o("div",{key:s},["goodsName"==e.prop&&1==e.state?o("el-table-column",{attrs:{label:"产品名称",prop:"tbGoods.goodsName",width:"280px","class-name":"table_required",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[o("el-select",{attrs:{placeholder:"请选择",filterable:"","filter-method":t.handleFilter},on:{focus:function(o){t.handleFoces(e.$index,e.row)}},model:{value:e.row.tbGoods.goodsName,callback:function(o){t.$set(e.row.tbGoods,"goodsName",o)},expression:"scope.row.tbGoods.goodsName"}},[o("el-option",{staticClass:"droplist",attrs:{value:e.row.tbGoods.goodsName}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.selectData,border:"",fit:""},on:{"current-change":t.currentChange}},[o("el-table-column",{attrs:{"header-align":"center",type:"index","min-width":"45"}}),t._v(" "),o("el-table-column",{attrs:{prop:"tbGoods.goodsName",label:"产品名称",width:"130"}}),t._v(" "),o("el-table-column",{attrs:{prop:"tbGoods.describe","show-overflow-tooltip":"",label:"描述",width:"150"}}),t._v(" "),o("el-table-column",{attrs:{prop:"goodspec",label:"规格属性","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.goodspec,function(e,s){return o("span",{key:s},[t._v(t._s(e.label+"："+e.value))])})}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"unit",label:"单位",width:"90"}})],1)],1)],1),t._v(" "),o("el-button",{staticClass:"btn info-btn",staticStyle:{width:"30px",height:"28px",padding:"0"},attrs:{size:"mini",icon:"el-icon-more"},on:{click:function(e){t.showDialog()}}})]:o("span",[t._v(t._s(e.row.tbGoods.goodsName))])]}}])}):t._e(),t._v(" "),"describe"==e.prop&&1==e.state?o("el-table-column",{attrs:{label:"描述",prop:"tbGoods.describe",width:"120"}}):t._e(),t._v(" "),"spec"==e.prop&&1==e.state?o("el-table-column",{attrs:{label:"规格属性",prop:"goodspec","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.goodspec,function(e,s){return o("span",{key:s},[t._v(t._s(e.value+"/"))])})}}])}):t._e(),t._v(" "),"unit"==e.prop&&1==e.state?o("el-table-column",{attrs:{label:"单位",prop:"unit",width:"50"}}):t._e(),t._v(" "),"num"==e.prop&&1==e.state?o("el-table-column",{attrs:{label:"数量",prop:"num","min-width":"100","class-name":"table_required"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[o("el-input",{staticClass:"edit-input",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')",size:"small"},on:{input:function(o){t.handleinput(o,e.$index,e.row)}},model:{value:e.row.num,callback:function(o){t.$set(e.row,"num",o)},expression:"scope.row.num"}})]:o("span",[t._v(t._s(e.row.num))])]}}])}):t._e(),t._v(" "),"price"==e.prop&&1==e.state?o("el-table-column",{attrs:{label:"单价",prop:"price","min-width":"120","class-name":"table_required"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[o("el-input",{staticClass:"edit-input",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'.')",size:"small"},on:{input:function(o){t.handleinput(o,e.$index,e.row)}},model:{value:e.row.price,callback:function(o){t.$set(e.row,"price",o)},expression:"scope.row.price"}})]:o("span",[t._v(t._s(e.row.price))])]}}])}):t._e(),t._v(" "),"amountOfMoney"==e.prop&&1==e.state?o("el-table-column",{attrs:{label:"金额",prop:"amountOfMoney","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[o("el-input",{staticClass:"edit-input",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'.')",size:"small"},on:{input:function(o){t.handleinput(o,e.$index,e.row)}},model:{value:e.row.amountOfMoney,callback:function(o){t.$set(e.row,"amountOfMoney",o)},expression:"scope.row.amountOfMoney"}})]:o("span",[t._v(t._s(e.row.amountOfMoney))])]}}])}):t._e(),t._v(" "),"discount"==e.prop&&1==e.state?o("el-table-column",{attrs:{label:"折扣",prop:"discount",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[o("el-input",{staticClass:"edit-input",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'.')",size:"small"},on:{input:function(o){t.handleinput(o,e.$index,e.row)}},model:{value:e.row.discount,callback:function(o){t.$set(e.row,"discount",o)},expression:"scope.row.discount"}},[o("span",{staticStyle:{"margin-right":"5px","line-height":"34px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v("%")])])]:e.row.discount?o("span",[t._v(t._s(e.row.discount+" %"))]):t._e()]}}])}):t._e(),t._v(" "),"discountAmount"==e.prop&&1==e.state?o("el-table-column",{attrs:{label:"折扣额",prop:"discountAmount","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[o("el-input",{staticClass:"edit-input",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'.')",size:"small"},model:{value:e.row.discountAmount,callback:function(o){t.$set(e.row,"discountAmount",o)},expression:"scope.row.discountAmount"}})]:o("span",[t._v(t._s(e.row.discountAmount))])]}}])}):t._e(),t._v(" "),"discountAfter"==e.prop&&1==e.state?o("el-table-column",{attrs:{label:"折后金额",prop:"discountAfter","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[o("el-input",{staticClass:"edit-input",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'.')",size:"small"},model:{value:e.row.discountAfter,callback:function(o){t.$set(e.row,"discountAfter",o)},expression:"scope.row.discountAfter"}})]:o("span",[t._v(t._s(e.row.discountAfter))])]}}])}):t._e(),t._v(" "),"taxRate"==e.prop&&1==e.state?o("el-table-column",{attrs:{label:"税率",prop:"taxRate",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[o("el-input",{staticClass:"edit-input",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'.')",size:"small"},on:{input:function(o){t.handleinput(o,e.$index,e.row)}},model:{value:e.row.taxRate,callback:function(o){t.$set(e.row,"taxRate",o)},expression:"scope.row.taxRate"}},[o("span",{staticStyle:{"margin-right":"5px","line-height":"34px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v("%")])])]:o("span",[t._v(t._s(e.row.taxRate))])]}}])}):t._e(),t._v(" "),"taxAmount"==e.prop&&1==e.state?o("el-table-column",{attrs:{label:"税额",prop:"taxAmount","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[o("el-input",{staticClass:"edit-input",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'.')",size:"small"},model:{value:e.row.taxAmount,callback:function(o){t.$set(e.row,"taxAmount",o)},expression:"scope.row.taxAmount"}})]:o("span",[t._v(t._s(e.row.taxAmount))])]}}])}):t._e(),t._v(" "),"taxAfter"==e.prop&&1==e.state?o("el-table-column",{attrs:{label:"税后金额",prop:"taxAfter","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[o("el-input",{staticClass:"edit-input",attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'.')",size:"small"},model:{value:e.row.taxAfter,callback:function(o){t.$set(e.row,"taxAfter",o)},expression:"scope.row.taxAfter"}})]:o("span",[t._v(t._s(e.row.taxAfter))])]}}])}):t._e(),t._v(" "),"commitTime"==e.prop&&1==e.state?o("el-table-column",{attrs:{label:"交货日期",prop:"commitTime",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[o("el-date-picker",{staticClass:"table_date",attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",size:"small"},model:{value:e.row.commitTime,callback:function(o){t.$set(e.row,"commitTime",o)},expression:"scope.row.commitTime"}})]:o("span",[t._v(t._s(e.row.commitTime))])]}}])}):t._e(),t._v(" "),"brand"==e.prop&&1==e.state?o("el-table-column",{attrs:{label:"产品品牌",prop:"brand",width:"80"}}):t._e()],1)}),t._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作",width:"90",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{staticStyle:{width:"30px",height:"30px",padding:"0"},attrs:{type:"success",plain:"",disabled:!e.row.edit,icon:"el-icon-circle-check-outline"},on:{click:function(o){t.confirmEdit(e.row)}}}),t._v(" "),o("el-button",{staticStyle:{width:"30px",height:"30px",padding:"0"},attrs:{type:"danger",plain:"",icon:"el-icon-delete"},on:{click:function(o){t.handleDelete(e.$index,e.row)}}})]}}])})],2),t._v(" "),o("el-form",{staticClass:"disabledForm",attrs:{inline:!0}},[o("el-form-item",{attrs:{label:"制单人","label-width":"90px"}},[o("el-input",{attrs:{disabled:!0},model:{value:t.myform.user,callback:function(e){t.$set(t.myform,"user",e)},expression:"myform.user"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"负责人","label-width":"90px"}},[o("el-input",{attrs:{disabled:!0},model:{value:t.myform.ascription,callback:function(e){t.$set(t.myform,"ascription",e)},expression:"myform.ascription"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"部门","label-width":"90px"}},[o("el-input",{attrs:{disabled:!0},model:{value:t.myform.department,callback:function(e){t.$set(t.myform,"department",e)},expression:"myform.department"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"机构","label-width":"90px"}},[o("el-input",{attrs:{disabled:!0},model:{value:t.myform.mechanism,callback:function(e){t.$set(t.myform,"mechanism",e)},expression:"myform.mechanism"}})],1)],1),t._v(" "),o("div",{staticClass:"submit_btn"},[o("el-button",{directives:[{name:"show",rawName:"v-show",value:t.submitAdd,expression:"submitAdd"}],staticStyle:{"margin-right":"50px !important"},attrs:{type:"primary",disabled:t.isDisable},on:{click:t.onSubmit}},[t._v("立即提交")]),t._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.submitAdd,expression:"!submitAdd"}],staticStyle:{"margin-right":"50px !important"},attrs:{type:"primary",disabled:t.isDisable},on:{click:t.updateSubmit}},[t._v("立即编辑")]),t._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:t.submitAdd,expression:"submitAdd"}],staticStyle:{"margin-right":"50px !important"},attrs:{type:"primary",disabled:t.isDisable},on:{click:t.submitOrClose}},[t._v("保存并关闭")]),t._v(" "),o("el-button",{on:{click:t.closeTag}},[t._v("取消")])],1),t._v(" "),o("el-dialog",{staticClass:"orderDialog",attrs:{title:"选择产品",visible:t.dialogVisible,"close-on-click-modal":!1,width:"80%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("div",{staticClass:"otherleftcontent"},[o("el-tree",{attrs:{"node-key":"id","highlight-current":"",accordion:"","expand-on-click-node":"",data:t.datalist,props:t.defaultProps,"default-expanded-keys":t.defaultkeys},on:{"node-click":t.handleNodeClick}})],1),t._v(" "),o("div",{staticClass:"otherightcontent"},[o("span",[t._v("产品名称：")]),o("el-input",{staticStyle:{width:"200px"},on:{input:t.addInput},model:{value:t.goodsName,callback:function(e){t.goodsName=e},expression:"goodsName"}}),t._v(" "),o("br"),o("br"),t._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",fit:""},on:{"selection-change":t.selectInfo}},[o("el-table-column",{attrs:{"header-align":"center",align:"center",type:"selection","min-width":"45"},on:{"selection-change":t.selectInfo}}),t._v(" "),o("el-table-column",{attrs:{prop:"tbGoods.goodsName",label:"产品名称",width:"130"}}),t._v(" "),o("el-table-column",{attrs:{prop:"tbGoods.describe","show-overflow-tooltip":"",label:"描述",width:"150"}}),t._v(" "),o("el-table-column",{attrs:{prop:"goodspec",label:"规格属性","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.goodspec,function(e,s){return o("span",{key:s},[t._v(t._s(e.label+"："+e.value))])})}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"unit",label:"单位",width:"90"}}),t._v(" "),o("el-table-column",{attrs:{prop:"brand",label:"品牌",width:"90"}})],1)],1),t._v(" "),o("span",{staticClass:"dialog-footer order_foot",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.handleSubmit()}}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var d=o("VU/8")(l,r,!1,function(t){o("XhB4")},null,null);e.default=d.exports}});